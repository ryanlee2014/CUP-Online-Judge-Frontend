(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-706b473e"],{"2cd4":function(t,e,s){"use strict";s("e260"),s("ddb0");var a=s("9ab4"),r=s("2b0e"),i=s("60a3"),n=s("3657"),o=s("0443"),c=class extends r["a"]{constructor(){super(...arguments),this.customConfig=o}mounted(){n["a"].init(this.$store.getters.homepage),document.title=o.title}};c=Object(a["c"])([i["a"]],c),e["a"]=c},"5dbd":function(t,e,s){"use strict";s.d(e,"a",(function(){return u})),s.d(e,"d",(function(){return d})),s.d(e,"b",(function(){return p})),s.d(e,"f",(function(){return m})),s.d(e,"e",(function(){return v})),s.d(e,"c",(function(){return f}));var a=s("1da1"),r=s("2ef0"),i=s.n(r),n=(s("e260"),s("ddb0"),function(){}),o=n;function c(t){return function(){for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];o(t,...s)}}var l=c("Decorator mounted: ");function u(t,e){return function(s,a,r){l("debounce, target:".concat(s.constructor.name,", propertyName:").concat(a));var n=r.value;return r.value=i.a.debounce(n,t,e),r}}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(e,s,a){l("Interval, target:".concat(e.constructor.name,", propertyName:").concat(s));var r=a.value;a.value=function(){for(var a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];if("undefined"===typeof this.timer_||"undefined"===typeof this.timer_.length)throw new Error("You should mixin TimerMixin to your component");r.apply(this,i),this.timer_.push(setInterval(()=>{l("".concat(e.constructor.name,".").concat(s," called.")),r.apply(this,i)},t))},o("mounted interval")}}function p(t,e,s){l("Debuglogging, target:".concat(t.constructor.name,", propertyName:").concat(e));var a=s.value;s.value=function(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];var i=s.map(t=>JSON.stringify(t)).join(),n=a.apply(this,s),c=JSON.stringify(n);return o("Call: ".concat(e,"(").concat(i,") => ").concat(c)),n}}function m(t,e,s){l("WebSocketRequest, target:".concat(t.constructor.name,", propertyName:").concat(e));var a=s.value;s.value=function(){if(this.$socket.connected){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return a.apply(this,e)}alert("WebSocket服务未启动，请等待服务启动后提交\nWebSocket服务启动标志未:\n右上角显示在线人数")}}function v(t){return function(e,s,r){l("Lock, target:".concat(e.constructor.name,", propertyName:").concat(s));var i=r.value;r.value=function(){var e=Object(a["a"])((function*(){yield t.acquireAsync();for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];var r=i.apply(this,s);return t.release(),r}));return function(){return e.apply(this,arguments)}}()}}function f(t,e,s){var a=s.value;s.value=function(){try{for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return a.apply(this,e)}catch(r){alert(r.message)}}}},"87ea":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ui container padding"},[1===t.status?s("init-config",{on:{configUpdated:t.updateStatus}}):t._e(),2===t.status?s("init-admin"):t._e()],1)},r=[],i=(s("e260"),s("ddb0"),s("9ab4")),n=s("60a3"),o=s("2cd4"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"html ui top attached segment"},[s("div",{staticClass:"ui large form"},[s("div",{staticClass:"ui form"},[s("div",{staticClass:"two fields"},[s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("database hostname")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.mysql.host,expression:"mysql.host"}],attrs:{name:"hostname",type:"text"},domProps:{value:t.mysql.host},on:{input:function(e){e.target.composing||t.$set(t.mysql,"host",e.target.value)}}})]),s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("database port")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.mysql.port,expression:"mysql.port"}],attrs:{name:"port",type:"text"},domProps:{value:t.mysql.port},on:{input:function(e){e.target.composing||t.$set(t.mysql,"port",e.target.value)}}})])]),s("div",{staticClass:"two fields"},[s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("database username")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.mysql.user,expression:"mysql.user"}],attrs:{name:"user",type:"text"},domProps:{value:t.mysql.user},on:{input:function(e){e.target.composing||t.$set(t.mysql,"user",e.target.value)}}})]),s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("database password")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.mysql.password,expression:"mysql.password"}],attrs:{name:"password",type:"text"},domProps:{value:t.mysql.password},on:{input:function(e){e.target.composing||t.$set(t.mysql,"password",e.target.value)}}})])]),s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("database")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.mysql.database,expression:"mysql.database"}],attrs:{name:"database",type:"text"},domProps:{value:t.mysql.database},on:{input:function(e){e.target.composing||t.$set(t.mysql,"database",e.target.value)}}})]),s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("salt")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.salt,expression:"salt"}],attrs:{name:"salt",type:"text"},domProps:{value:t.salt},on:{input:function(e){e.target.composing||(t.salt=e.target.value)}}})]),s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("session secret")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.session_secret,expression:"session_secret"}],attrs:{name:"session_secret",type:"text"},domProps:{value:t.session_secret},on:{input:function(e){e.target.composing||(t.session_secret=e.target.value)}}})]),s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("judger address")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.judger.address,expression:"judger.address"}],attrs:{name:"judger_address",type:"text"},domProps:{value:t.judger.address},on:{input:function(e){e.target.composing||t.$set(t.judger,"address",e.target.value)}}})]),s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("judger data directory")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.judger.oj_home,expression:"judger.oj_home"}],attrs:{name:"judger_data_directory",type:"text"},domProps:{value:t.judger.oj_home},on:{input:function(e){e.target.composing||t.$set(t.judger,"oj_home",e.target.value)}}})]),s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("compile arguments")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.etc.compile_arguments,expression:"etc.compile_arguments"}],attrs:{name:"compile_arguments",type:"text"},domProps:{value:t.etc.compile_arguments},on:{input:function(e){e.target.composing||t.$set(t.etc,"compile_arguments",e.target.value)}}})]),s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("problem upload directory")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.problem_upload_dest.dir,expression:"problem_upload_dest.dir"}],attrs:{name:"problem_upload_directory",type:"text"},domProps:{value:t.problem_upload_dest.dir},on:{input:function(e){e.target.composing||t.$set(t.problem_upload_dest,"dir",e.target.value)}}})])]),s("button",{staticClass:"ui primary button",attrs:{type:"submit",id:"submit"},on:{click:function(e){return e.preventDefault(),t.updateConfig(e)}}},[t._v(t._s(t.$t("submit"))+" ")]),s("button",{staticClass:"ui button",attrs:{type:"reset",name:"reset"},on:{click:function(e){return e.preventDefault(),t.resetConfig(e)}}},[t._v(t._s(t.$t("reset")))]),s("div",{staticClass:"ui error message"}),s("br"),s("br")])])},l=[],u=(s("cca6"),s("2b0e")),d={},p={},m=class extends u["a"]{constructor(){super(...arguments),this.mysql={host:"",user:"",password:"",port:"",database:""},this.salt="",this.session_secret="",this.judger={address:"",oj_home:""},this.etc={compile_arguments:""},this.problem_upload_dest={dir:""}}mounted(){this.axios.get("/api/init/firstrun/").then(t=>{var{data:e}=t;Object.assign(this,e.data),d=e.data,p=JSON.parse(JSON.stringify(p))})}updateConfig(){Object.assign(d,this.$data),this.axios.post("/api/init/firstrun/config",{content:d}).then(t=>{var{data:e}=t;this.$emit("configUpdated")})}resetConfig(){Object.assign(this,p)}};m=Object(i["c"])([n["a"]],m);var v=m,f=v,g=s("2877"),h=Object(g["a"])(f,c,l,!1,null,"d620bb6a",null),b=h.exports,_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"html ui top attached segment"},[s("div",{staticClass:"ui large form"},[s("div",{staticClass:"ui form"},[s("div",{staticClass:"two fields"},[s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("user_id")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userId,expression:"userId"}],attrs:{type:"text",placeholder:"",name:"user_id",id:"user_id"},domProps:{value:t.userId},on:{input:function(e){e.target.composing||(t.userId=e.target.value)}}})]),s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("nick")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.nick,expression:"nick"}],attrs:{type:"text",name:"nick",placeholder:""},domProps:{value:t.nick},on:{input:function(e){e.target.composing||(t.nick=e.target.value)}}})])]),s("div",{staticClass:"two fields"},[s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("password")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{name:"password",id:"password",type:"password",placeholder:"必填"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("repeat password")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.repeatPassword,expression:"repeatPassword"}],attrs:{name:"rptpassword",id:"rptpassword",type:"password",placeholder:"必填"},domProps:{value:t.repeatPassword},on:{input:function(e){e.target.composing||(t.repeatPassword=e.target.value)}}})])]),s("div",{staticClass:"two fields"},[s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("retrieve password question")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmQuestion,expression:"confirmQuestion"}],attrs:{name:"confirmquestion",id:"confirmquestion",placeholder:"必填"},domProps:{value:t.confirmQuestion},on:{input:function(e){e.target.composing||(t.confirmQuestion=e.target.value)}}})]),s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("retrieve password answer")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmAnswer,expression:"confirmAnswer"}],attrs:{name:"confirmanswer",id:"confirmanswer",placeholder:"必填"},domProps:{value:t.confirmAnswer},on:{input:function(e){e.target.composing||(t.confirmAnswer=e.target.value)}}})])]),s("div",{staticClass:"two fields"},[s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("captcha")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.captcha,expression:"captcha"}],attrs:{name:"vcode",size:"4",type:"text"},domProps:{value:t.captcha},on:{input:function(e){e.target.composing||(t.captcha=e.target.value)}}})]),t._m(0)])]),s("button",{staticClass:"ui primary button",attrs:{type:"submit",id:"submit"},on:{click:function(e){return e.preventDefault(),t.submit(e)}}},[t._v("Submit")]),s("button",{staticClass:"ui button",attrs:{type:"reset",name:"reset"},on:{click:function(e){return e.preventDefault(),t.reset(e)}}},[t._v("Reset")]),s("div",{staticClass:"ui error message"}),s("br"),s("br")])])},w=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field"},[s("label",{staticStyle:{opacity:"0"}},[t._v("Captcha image")]),s("img",{attrs:{alt:"click to change",src:"/api/captcha?from=init",onclick:"this.src='/api/captcha?from=init&random='+Math.random()",width:"20%"}})])}],y=s("5dbd"),C={confirmQuestion:"",inviteCode:"",nick:"",password:"",userId:"",captcha:"",repeatPassword:"",confirmAnswer:""},x=class extends u["a"]{constructor(){super(...arguments),this.captcha="",this.repeatPassword="",this.confirmAnswer="",this.confirmQuestion="",this.inviteCode="",this.nick="",this.password="",this.userId=""}mounted(){}validatePassword(){if(this.password!==this.repeatPassword)throw new Error("两次输入的密码不一致")}submit(){this.validatePassword();var t={confirmAnswer:this.confirmAnswer,confirmQuestion:this.confirmQuestion,inviteCode:this.inviteCode,nick:this.nick,password:this.password,userId:this.userId,captcha:this.captcha};this.axios.post("/api/init/firstrun/admin",t).then(t=>{var{data:e}=t;"OK"===e.status&&(alert("注册成功"),this.$store.dispatch("NavStatus"),this.$router.push({path:"/login"}))}).catch(t=>{alert(t.data.statement)})}reset(){Object.assign(this,C)}};Object(i["c"])([y["c"]],x.prototype,"submit",null),x=Object(i["c"])([n["a"]],x);var $=x,j=$,N=Object(g["a"])(j,_,w,!1,null,"23261d82",null),P=N.exports,q=class extends(Object(n["b"])(o["a"])){constructor(){super(...arguments),this.status=1}updateStatus(){this.status=2}};q=Object(i["c"])([Object(n["a"])({components:{InitAdmin:P,InitConfig:b}})],q);var k=q,O=k,A=Object(g["a"])(O,a,r,!1,null,"04bfff6a",null);e["default"]=A.exports}}]);