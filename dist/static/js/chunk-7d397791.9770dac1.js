(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d397791"],{"19dd":function(t,e,s){"use strict";s("e260"),s("ddb0");var n=s("9ab4"),r=s("60a3"),i=s("5dbd"),a=s("2b0e");let c=class extends a["a"]{constructor(){super(...arguments),this.timer_=[]}beforeDestroy(){const t=this.timer_;t.forEach(t=>clearInterval(t))}};Object(n["c"])([i["b"]],c.prototype,"beforeDestroy",null),c=Object(n["c"])([r["a"]],c),e["a"]=c},"22f5":function(t,e,s){"use strict";var n=s("81ca"),r=s.n(n);r.a},"3d1f":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("table",{staticClass:"ui padded borderless unstackable selectable table",attrs:{width:"90%"}},[s("thead",[s("tr",{staticClass:"toprow",attrs:{align:"center"}},[s("th",{attrs:{width:"55%"}},[t._v(t._s(t.$t("title")))]),s("th",{attrs:{width:"25%"}},[t._v(t._s(t.$t("status")))]),s("th",{attrs:{width:"7%"}},[t._v(t._s(t.$t("privilege")))]),s("th",{attrs:{width:"13%"}},[t._v(t._s(t.$t("creator")))])])]),s("tbody",t._l(t.contest_list,(function(e,n){return s("tr",{key:n,class:(n%2===0?"evenrow":"oddrow")+" "+("Y"===e.defunct?"active":"")},[s("td",[s("router-link",{attrs:{to:"/contest/"+e.contest_id}},[t._v(" "+t._s("Contest "+e.contest_id+": "+e.title)+" ")])],1),s("td",[s("p",{staticStyle:{"margin-bottom":"0.25em"},domProps:{innerHTML:t._s(t.contestTimeFormat(e))}}),s("progress-bar",{attrs:{active:t.contestIsRunning(e),color:t.progressBarColor(e),percentage:t.percentageRunning(e),size:"tiny"}})],1),s("td",[t._v(" "+t._s(e.private?t.$t("private"):t.$t("public"))+" ")]),s("td",[s("router-link",{attrs:{to:"/user/"+e.user_id}},[t._v(" "+t._s(e.user_id)+" ")])],1)])})),0)])},r=[],i=(s("e260"),s("ddb0"),s("9ab4")),a=s("60a3"),c=s("2b0e"),o=s("5a0c"),u=s.n(o),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:t.visibilityChanged,expression:"visibilityChanged"}],ref:"progressBarElement",class:t.progressBarClass},[s("div",{staticClass:"bar"})])},l=[],p=s("6da9"),h=s("1157"),f=s.n(h);const m=f.a;let b=class extends(Object(a["b"])(p["a"])){constructor(){super(...arguments),this.prevPercentage=0,this.element=null}visibilityChanged(t,e){t&&this.active?this.element.progress("set active"):this.element.progress("remove active")}updated(){this.mountFunc()}mounted(){this.mountFunc()}mountFunc(){null===this.element&&(this.element=m(this.$refs.progressBarElement)),this.prevPercentage!==this.percentage&&(this.element.progress({percent:this.percentage,autoSuccess:!1}),this.prevPercentage=this.percentage)}get progressBarClass(){const t=["ui","progress"];return this.size.length>0&&t.push(this.size),this.color.length>0&&t.push(this.color),this.active&&t.push("active"),t}forceUpdate(){this.prevPercentage!==this.percentage&&this.$nextTick(this.$forceUpdate)}onSizeChange(){this.forceUpdate()}onColorChange(){this.forceUpdate()}onActiveChange(){this.forceUpdate()}onPercentageChange(){this.forceUpdate()}};Object(i["c"])([Object(a["c"])({default:""})],b.prototype,"size",void 0),Object(i["c"])([Object(a["c"])({default:""})],b.prototype,"color",void 0),Object(i["c"])([Object(a["c"])({default:!1})],b.prototype,"active",void 0),Object(i["c"])([Object(a["c"])({default:0})],b.prototype,"percentage",void 0),Object(i["c"])([Object(a["d"])("size")],b.prototype,"onSizeChange",null),Object(i["c"])([Object(a["d"])("color")],b.prototype,"onColorChange",null),Object(i["c"])([Object(a["d"])("active")],b.prototype,"onActiveChange",null),Object(i["c"])([Object(a["d"])("percentage")],b.prototype,"onPercentageChange",null),b=Object(i["c"])([a["a"]],b);var v=b,g=v,_=(s("7140"),s("2877")),y=Object(_["a"])(g,d,l,!1,null,"694edf6b",null),j=y.exports,$=s("5dbd"),O=s("19dd");let C=class extends(Object(a["b"])(c["a"],O["a"])){constructor(){super(...arguments),this.current_time=u()()}mounted(){this.updateCurrentTime()}updateCurrentTime(){this.current_time=u()()}contestTimeFormat(t){if(Object.prototype.hasOwnProperty.call(t,"_format_")&&"string"===typeof t._format_)return t._format_;let e,s;u.a.isDayjs(t.start_time)||(e=u()(t.start_time)),u.a.isDayjs(t.end_time)||(s=u()(t.end_time));const n=this.current_time;return t.isEnd||n.isAfter(s)?(t.isEnd=!0,t._format_=`${s.format("YYYY-MM-DD HH:mm")}${this.$t("end")}`):n.isBefore(e)?`${e.format("YYYY-MM-DD HH:mm")}${this.$t("start")}`:`${e.format("YYYY-MM-DD HH:mm")} ${this.$t("start")}<br>${s.format("YYYY-MM-DD HH:mm")} ${this.$t("end")}`}contestIsRunning(t){let e,s;u.a.isDayjs(t.start_time)||(e=u()(t.start_time)),u.a.isDayjs(t.end_time)||(s=u()(t.end_time));const n=this.current_time;return n.isBefore(s)&&n.isAfter(e)}progressBarColor(t){return this.contestIsRunning(t)?"green":"grey"}percentageRunning(t){let e,s;if(!0===t.isEnd)return 100;u.a.isDayjs(t.start_time)||(e=u()(t.start_time)),u.a.isDayjs(t.end_time)||(s=u()(t.end_time));const n=this.current_time;if(n.isBefore(e))return 0;if(n.isAfter(s))return t.isEnd=!0,100;{const t=n.diff(e,"second"),r=s.diff(e,"second");return Math.trunc(Math.floor(100*t/r))}}};Object(i["c"])([Object(a["c"])({default:[]})],C.prototype,"contest_list",void 0),Object(i["c"])([Object($["d"])(1e4)],C.prototype,"updateCurrentTime",null),C=Object(i["c"])([Object(a["a"])({components:{ProgressBar:j}})],C);var w=C,D=w,Y=(s("22f5"),Object(_["a"])(D,n,r,!1,null,"2e7f33de",null));e["a"]=Y.exports},"5dbd":function(t,e,s){"use strict";s.d(e,"a",(function(){return u})),s.d(e,"d",(function(){return d})),s.d(e,"b",(function(){return l})),s.d(e,"f",(function(){return p})),s.d(e,"e",(function(){return h})),s.d(e,"c",(function(){return f}));s("e6cf");var n=s("2ef0"),r=s.n(n);s("e260"),s("ddb0");const i=(...t)=>{},a=i;function c(t){return function(...e){a(t,...e)}}const o=c("Decorator mounted: ");function u(t,e){return function(s,n,i){o(`debounce, target:${s.constructor.name}, propertyName:${n}`);const a=i.value;return i.value=r.a.debounce(a,t,e),i}}function d(t=0){return function(e,s,n){o(`Interval, target:${e.constructor.name}, propertyName:${s}`);const r=n.value;n.value=function(...n){if("undefined"===typeof this.timer_||"undefined"===typeof this.timer_.length)throw new Error("You should mixin TimerMixin to your component");r.apply(this,n),this.timer_.push(setInterval(()=>{o(`${e.constructor.name}.${s} called.`),r.apply(this,n)},t))},a("mounted interval")}}function l(t,e,s){o(`Debuglogging, target:${t.constructor.name}, propertyName:${e}`);const n=s.value;s.value=function(...t){const s=t.map(t=>JSON.stringify(t)).join(),r=n.apply(this,t),i=JSON.stringify(r);return a(`Call: ${e}(${s}) => ${i}`),r}}function p(t,e,s){o(`WebSocketRequest, target:${t.constructor.name}, propertyName:${e}`);const n=s.value;s.value=function(...t){if(this.$socket.connected)return n.apply(this,t);alert("WebSocket服务未启动，请等待服务启动后提交\nWebSocket服务启动标志未:\n右上角显示在线人数")}}function h(t){return function(e,s,n){o(`Lock, target:${e.constructor.name}, propertyName:${s}`);const r=n.value;n.value=async function(...e){await t.acquireAsync();const s=r.apply(this,e);return t.release(),s}}}function f(t,e,s){const n=s.value;s.value=function(...t){try{return n.apply(this,t)}catch(e){alert(e.message)}}}},"6da9":function(t,e,s){"use strict";var n=s("9ab4"),r=s("1157"),i=s.n(r),a=(s("8665"),s("60a3")),c=s("2b0e");window.$=window.jQuery=i.a;let o=class extends c["a"]{};o=Object(n["c"])([a["a"]],o),e["a"]=o},7140:function(t,e,s){"use strict";var n=s("f685"),r=s.n(n);r.a},"7cf1":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ui container padding"},[s("h2",{staticClass:"ui dividing header"},[t._v(" Contest Topic "+t._s(t.contestTopicId)+" ")]),s("div",{staticClass:"ui grid"},[s("div",{staticClass:"row"},[s("div",{staticClass:"ui top attached segment block header"},[t._v(t._s(t.$t("description")))]),s("div",{staticClass:"ui bottom attached segment",domProps:{innerHTML:t._s(t.markdownIt.renderRaw(t.description))}})]),s("div",{staticClass:"row"},[s("ContestView",{attrs:{contest_list:t.contest_list}})],1)])])},r=[],i=(s("e01a"),s("e260"),s("ddb0"),s("9ab4")),a=s("60a3"),c=s("2cd4"),o=s("3d1f"),u=s("ec1c");let d=class extends(Object(a["b"])(c["a"])){constructor(){super(...arguments),this.contestTopicId="",this.contest_list=[],this.description="",this.markdownIt=u["a"]}created(){this.contestTopicId=this.$route.params.contestSetId}mounted(){this.initData()}initData(){this.axios.get("/api/contestset/set/"+this.contestTopicId).then(({data:t})=>{const e=t.data;this.description=e.description}),this.axios.get("/api/contestset/list/"+this.contestTopicId).then(({data:t})=>{const e=t.data;e.forEach(t=>{t.user_id=t.maker}),this.contest_list=e})}};d=Object(i["c"])([Object(a["a"])({components:{ContestView:o["a"]}})],d);var l=d,p=l,h=s("2877"),f=Object(h["a"])(p,n,r,!1,null,"c4ea5746",null);e["default"]=f.exports},"81ca":function(t,e,s){},f685:function(t,e,s){}}]);
//# sourceMappingURL=chunk-7d397791.9770dac1.js.map