(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2cbf6074"],{"111f":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"zh-cn":{"context":"根据管理员设置，该页面禁止进入"},"en":{"context":"According to admin setup, you don\'t have privilege to access target page"},"ja":{"context":"都合によって、このページはアクセス禁止されている"}}'),delete t.options._Ctor}},"886e":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ui container",attrs:{id:"contest_table"}},[2===t.mode?i("ContestNotStart"):t._e(),1===t.mode?i("LoginForm"):t._e(),3===t.mode?i("contest-mode"):t._e(),4===t.mode?i("LimitHostname",{attrs:{content:t.limit_content}}):t._e(),0===t.mode?i("div",{staticClass:"padding"},[i("h2",{staticClass:"ui dividing header"},[t._v(" Contest Problem Set ")]),i("div",{staticClass:"ui grid"},[i("div",{staticClass:"row"},[i("div",{staticClass:"eleven wide column"},[i("table",{staticClass:"ui basic unstackable table",attrs:{id:"problemset",width:"95%"}},[i("thead",[i("tr",{staticClass:"toprow"},[i("th",{staticStyle:{"text-align":"center"},attrs:{width:"18%"},on:{click:function(e){return t.orderBy(0)}}},[i("a",{staticStyle:{cursor:"pointer"}},[0===t.type?i("i",{class:"sort numeric icon "+(t.order>0?"up":"down")}):i("i",{staticClass:"checkmark icon",staticStyle:{opacity:"0"}}),t._v(" "+t._s(t.$t("id"))+" ")])]),i("th",{attrs:{width:"44%"},on:{click:function(e){return t.orderBy(1)}}},[i("a",{staticStyle:{cursor:"pointer"}},[1===t.type?i("i",{class:"sort numeric icon "+(t.order>0?"up":"down")}):i("i",{staticClass:"checkmark icon",staticStyle:{opacity:"0"}}),t._v(" "+t._s(t.$t("title")))])]),t.now.isAfter(t.end_time)?i("th",{attrs:{width:"10%"}}):t._e(),i("th",{staticStyle:{"text-align":"center"},attrs:{width:"16%"}},[i("a",{staticStyle:{cursor:"pointer"}},[i("span",{on:{click:function(e){return t.orderBy(2)}}},[2===t.type?i("i",{class:"sort numeric icon "+(t.order>0?"up":"down")}):t._e(),t._v(" "+t._s(t.$t("accept")))])]),t._v("/"),i("a",{staticStyle:{cursor:"pointer"}},[i("span",{on:{click:function(e){return t.orderBy(3)}}},[3===t.type?i("i",{class:"sort numeric icon "+(t.order>0?"up":"down")}):t._e(),t._v(t._s(t.$t("submit")))])])]),i("th",{staticStyle:{"text-align":"center"},attrs:{width:"12%"},on:{click:function(e){return t.orderBy(4)}}},[i("a",{staticStyle:{cursor:"pointer"}},[4===t.type?i("i",{class:"sort numeric icon "+(t.order>0?"up":"down")}):t._e(),t._v(" "+t._s(t.$t("accept percentage")))])])])]),i("tbody",t._l(t.problem_table,(function(e,s){return i("tr",{key:s,class:1===e.ac?"positive":-1===e.ac?"negative":"",attrs:{id:"popup"+s},on:{mouseenter:function(i){return t.triggerPopup(s,e.pid)}}},[i("td",{staticClass:"center aligned"},[t._v(t._s(e.oj_name?e.oj_name:e.pid?"LOCAL ":"")+t._s(e.pid)),e.pid?i("br"):t._e(),t._v("Problem "+t._s(e.pnum+1001)+" ")]),i("td",[1===e.ac?i("i",{staticClass:"checkmark icon"}):-1===e.ac?i("i",{staticClass:"remove icon"}):i("i",{staticClass:"checkmark icon",staticStyle:{opacity:"0"}}),t.dayjs().isBefore(t.end_time)&&t.dayjs().isAfter(t.start_time)?i("router-link",{attrs:{to:"/contest/problem/"+t.cid+"/"+e.pnum},domProps:{innerHTML:t._s(t.contest(t.markdownIt.renderRaw(e.title),e.pnum))}}):i("router-link",{attrs:{to:"/problem/submit/"+e.pid},domProps:{innerHTML:t._s(t.contest(t.markdownIt.renderRaw(e.title),e.pnum))}})],1),t.now.isAfter(t.end_time)?i("td",[i("router-link",{attrs:{to:"/tutorial/"+e.pid}},[t._v(t._s(t.$t("solution")))])],1):t._e(),i("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.accepted)+"/"+t._s(e.submit))]),i("td",{staticStyle:{"text-align":"center"}},[t._v(t._s((100*e.accepted/Math.max(e.submit,1)).toString().substring(0,4))+" % ")])])})),0)])]),i("div",{staticClass:"five wide column"},[i("div",[i("ContestInfo",{attrs:{admin:t.admin,cid:t.cid,description:t.description,end_time:t.end_time,private_contest:t.private_contest,start_time:t.start_time,title:t.title}}),i("br")],1)])])])]):t._e()],1)},a=[],n=(i("e01a"),i("e260"),i("4e82"),i("ddb0"),i("ade3")),r=i("9ab4"),o=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},c=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"ui negative message"},[i("div",{staticClass:"header"},[i("i",{staticClass:"ban icon"}),t._v(" 竞赛尚未开始 ")]),i("p",[t._v("请等待竞赛开始后刷新 ")])])])}],d=i("2b0e"),l=i("60a3"),u=class extends d["a"]{};u=Object(r["c"])([l["a"]],u);var p=u,m=p,_=i("2877"),v=Object(_["a"])(m,o,c,!1,null,"18109bdc",null),b=v.exports,f=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},h=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h2",{staticClass:"ui dividing header"},[t._v("私有竞赛/作业")]),i("form",{staticClass:"ui form",attrs:{id:"contest_form",method:"post"}},[i("div",{staticClass:"fields"},[i("div",{staticClass:"six wide field"},[i("label",[t._v("请输入密码")]),i("input",{staticClass:"input-mini",attrs:{id:"contest_pass",name:"password",type:"password"}})])]),i("input",{staticClass:"ui primary button",attrs:{type:"submit"}})])])}],y=i("1157"),g=i.n(y),C=g.a,w=class extends d["a"]{mounted(){C("#contest_form").submit(()=>(this.axios.post("/api/contest/password/".concat(this.$route.params.contest_id),{password:C("#contest_pass").val()}).then(t=>{var{data:e}=t;"OK"===e.status?this.$parent.mode=0:alert(e.statement)}),!1))}};w=Object(r["c"])([l["a"]],w);var O=w,j=O,x=Object(_["a"])(j,f,h,!1,null,"3bb2b0fe",null),k=x.exports,S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ui raised segment"},[i("h1"),i("h2",{staticClass:"ui header",staticStyle:{"text-align":"center"}},[i("i",{staticClass:"star outline icon"}),t._v("Contest "+t._s(t.cid))]),i("h2",{staticClass:"ui header",staticStyle:{"text-align":"center"}},[t._v(t._s(t.title))]),i("p",[t._v(t._s(t.description))]),i("div",{staticStyle:{"text-align":"center"}},[t._v("Start Time "+t._s(t.start_time.format("YYYY-MM-DD HH:mm:ss"))+" "),i("br"),t._v(" Now "),i("span",{attrs:{id:"nowdate"}},[t._v(t._s(t.now.format("YYYY-MM-DD HH:mm:ss")))]),i("br"),t._v("End Time "+t._s(t.end_time.format("YYYY-MM-DD HH:mm:ss"))+" ")]),i("div",{class:"ui top right attached label "+(t.private_contest?"red":"green")},[t._v(t._s(t.private_contest?"Private":"Public")+" ")]),i("div",{class:"ui top left attached "+(t.now.isAfter(t.end_time)?"red":t.now.isBefore(t.start_time)?"grey":"green")+" label"},[t.now.isAfter(t.end_time)?i("span",{staticClass:"red"},[t._v("Ended")]):t.now.isBefore(t.start_time)?i("span",{staticClass:"red"},[t._v("Pending")]):i("span",{staticClass:"green"},[t._v("Running")])]),i("div",{staticStyle:{"text-align":"center"}},[i("div",{staticClass:"row padding"},[i("div",{staticClass:"ui buttons mini"},[t.admin?i("a",{staticClass:"ui button orange",attrs:{href:"/copystatus.php?cid="+t.cid}},[t._v("判重表")]):t._e(),t.admin?i("a",{staticClass:"ui button yellow",attrs:{href:"/copymap.php?cid="+t.cid}},[t._v("判重图")]):t._e()])])])])},$=[],P=i("5a0c"),I=i.n(P),E=class extends d["a"]{constructor(){super(...arguments),this.now=I()()}mounted(){setInterval(()=>{this.now=I()()},1e3)}};Object(r["c"])([Object(l["c"])({default:I()()})],E.prototype,"start_time",void 0),Object(r["c"])([Object(l["c"])({default:I()()})],E.prototype,"end_time",void 0),Object(r["c"])([Object(l["c"])({default:""})],E.prototype,"description",void 0),Object(r["c"])([Object(l["c"])({default:""})],E.prototype,"title",void 0),Object(r["c"])([Object(l["c"])({default:!1})],E.prototype,"admin",void 0),Object(r["c"])([Object(l["c"])({default:!1})],E.prototype,"private_contest",void 0),Object(r["c"])([Object(l["c"])({default:0})],E.prototype,"cid",void 0),E=Object(r["c"])([l["a"]],E);var M=E,D=M,Y=Object(_["a"])(D,S,$,!1,null,"14cecf33",null),B=Y.exports,H=i("d3a2"),L=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ui negative message"},[t._m(0),i("p",[t._v(t._s(t.content))])])},A=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header"},[i("i",{staticClass:"ban icon"}),t._v("访问限制")])}],T=class extends d["a"]{};Object(r["c"])([Object(l["c"])({default:""})],T.prototype,"content",void 0),T=Object(r["c"])([l["a"]],T);var K=T,N=K,R=Object(_["a"])(N,L,A,!1,null,"1446e3db",null),F=R.exports,J=i("2cd4"),z=i("ec1c"),q=i("2f62"),G=i("2ef0"),Q=i.n(G);function U(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function V(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?U(Object(i),!0).forEach((function(e){Object(n["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):U(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var W=g.a,X=class extends(Object(l["b"])(J["a"])){constructor(){super(...arguments),this.cid=0,this.problem_table=[],this.start_time=I()(),this.end_time=I()(),this.description="",this.title="",this.now=I()(),this.problemInfo={},this.current_mode=0,this.order=1,this.type=0,this.contest_mode=!1,this.limit_content="",this.private_contest=!1,this.dayjs=I.a,this.markdownIt=z["a"]}created(){this.cid=parseInt(this.$route.params.contest_id)}get mode(){return this.current_mode}set mode(t){var e=t!==this.current_mode;this.current_mode=t,e&&this.run(this.run)}mounted(){var t=this.$route.params.contest_id;document.title="Contest ".concat(t," -- ").concat(document.title),this.getInfo(),this.run(this.run)}getInfo(){(this.admin||this.contest_manager)&&this.axios.get("/api/contest/problem_info/".concat(this.cid)).then(t=>{var{data:e}=t;if("OK"===e.status){var i=e.data;i.forEach(t=>this.problemInfo[t.problem_id]=t)}})}triggerPopup(t,e){var i=this.problemDetail(e);W("#popup"+t).popup({hoverable:!0,html:i}).popup("show")}problemDetail(t){console.log("problem_id",t);var e=this.problemInfo[t];if(console.log("this.problemInfo",this.problemInfo),console.log("problemInfo",e),e){var i=e.accepted,s=e.submit,a=Math.floor(100*i/s),n=e.label,r='<div class="content">\n提交: '.concat(s," 通过:").concat(i," 通过率:").concat(a,"%\n<br>\n标签:").concat(n,"\n</div>");return r}return""}run(t){var e=this.$route.params.contest_id,i=this;this.cid=parseInt(e),this.axios.get("/api/contest/problem/"+e).then(e=>{console.log(e);var s=e.data;if("OK"!==s.status){if(console.log(s),"Permission denied"===s.statement)return void(i.mode=1);if(101===s.error_code)return void(i.mode=2);if(s.contest_mode)return void(i.mode=3)}Q.a.forEach(s.data,(function(t){t.accepted||(t.accepted=0),t.submit||(t.submit=0)}));var a=s.limit,n=s.contest_mode;if(s.admin&&(a=null,n=!1),a&&-1===location.href.indexOf(a))return i.mode=4,void(i.limit_content="根据管理员设置的策略，本次contest请使用"+a+"访问");i.problem_table=s.data;var r=s.info;i.start_time=I()(r.start_time),i.end_time=I()(r.end_time),i.title=r.title,i.contest_mode=n,i.description=r.description,i.private_contest=Boolean(r.private),"function"===typeof t&&t()})}detect_source(t){return t.oj_name&&"local"!==t.oj_name.toLowerCase()?t.oj_name.toLowerCase():"new"}contest(t,e){return this.contest_mode?"Problem "+String.fromCharCode("A".charCodeAt(0)+parseInt(e)):t}orderBy(t){var e=this;e.type===t&&(e.order=-e.order);var i=function(t,i){return e.order*(t.pnum-i.pnum)},s=function(t,i){return e.order*(t.title>i.title?1:t.title<i.title?-1:0)},a=function(t,i){return e.order*(t.submit-i.submit)},n=function(t,i){return e.order*(t.accepted-i.accepted)},r=function(t,i){var s=t.accepted/Math.max(t.submit,1),a=i.accepted/Math.max(i.submit,1);return e.order*(s-a)},o=[i,s,n,a,r];e.problem_table.sort(o[t]),e.type=t}};X=Object(r["c"])([Object(l["a"])({components:{ContestNotStart:b,LoginForm:k,ContestInfo:B,ContestMode:H["a"],LimitHostname:F},computed:V({},Object(q["b"])(["admin","contest_manager"]))})],X);var Z=X,tt=Z,et=Object(_["a"])(tt,s,a,!1,null,"75356c24",null);e["default"]=et.exports},bc99:function(t,e,i){"use strict";var s=i("111f"),a=i.n(s);e["default"]=a.a},d3a2:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ui negative message"},[i("div",{staticClass:"header"},[i("i",{staticClass:"ban icon"}),t._v(t._s(t.$t("contest mode")))]),i("p",[t._v(t._s(t.$t("context")))])])},a=[],n=i("9ab4"),r=i("60a3"),o=i("2b0e"),c=class extends o["a"]{};c=Object(n["c"])([r["a"]],c);var d=c,l=d,u=i("2877"),p=i("bc99"),m=Object(u["a"])(l,s,a,!1,null,"5816c0f2",null);"function"===typeof p["default"]&&Object(p["default"])(m);e["a"]=m.exports}}]);