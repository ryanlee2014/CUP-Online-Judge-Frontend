(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-711d1ca6"],{"111f":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"zh-cn":{"context":"根据管理员设置，该页面禁止进入"},"en":{"context":"According to admin setup, you don\'t have privilege to access target page"},"ja":{"context":"都合によって、このページはアクセス禁止されている"}}'),delete t.options._Ctor}},"2cd4":function(t,e,n){"use strict";var i=n("d4ec"),a=n("bee2"),r=n("99de"),s=n("7e84"),c=n("262e"),o=n("9ab4"),u=n("2b0e"),l=n("60a3"),d=n("3657"),p=n("0443"),m=function(t){function e(){var t;return Object(i["a"])(this,e),t=Object(r["a"])(this,Object(s["a"])(e).apply(this,arguments)),t.customConfig=p,t}return Object(c["a"])(e,t),Object(a["a"])(e,[{key:"mounted",value:function(){d["a"].init(this.$store.getters.homepage),document.title=p.title}}]),e}(u["a"]);m=Object(o["c"])([l["a"]],m),e["a"]=m},"886e":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui container",attrs:{id:"contest_table"}},[2===t.mode?n("ContestNotStart"):t._e(),1===t.mode?n("LoginForm"):t._e(),3===t.mode?n("contest-mode"):t._e(),4===t.mode?n("LimitHostname",{attrs:{content:t.limit_content}}):t._e(),0===t.mode?n("div",{staticClass:"padding"},[n("h2",{staticClass:"ui dividing header"},[t._v(" "+t._s(t.$t("contest problem set"))+" ")]),n("div",{staticClass:"ui grid"},[n("div",{staticClass:"row"},[n("div",{staticClass:"eleven wide column"},[n("table",{staticClass:"ui basic unstackable table",attrs:{id:"problemset",width:"95%"}},[n("thead",[n("tr",{staticClass:"toprow"},[n("th",{staticStyle:{"text-align":"center"},attrs:{width:"18%"},on:{click:function(e){return t.orderBy(0)}}},[n("a",{staticStyle:{cursor:"pointer"}},[0===t.type?n("i",{class:"sort numeric icon "+(t.order>0?"up":"down")}):n("i",{staticClass:"checkmark icon",staticStyle:{opacity:"0"}}),t._v(" "+t._s(t.$t("id"))+" ")])]),n("th",{attrs:{width:"44%"},on:{click:function(e){return t.orderBy(1)}}},[n("a",{staticStyle:{cursor:"pointer"}},[1===t.type?n("i",{class:"sort numeric icon "+(t.order>0?"up":"down")}):n("i",{staticClass:"checkmark icon",staticStyle:{opacity:"0"}}),t._v(" "+t._s(t.$t("title")))])]),t.now.isAfter(t.end_time)?n("th",{attrs:{width:"10%"}}):t._e(),n("th",{staticStyle:{"text-align":"center"},attrs:{width:"16%"}},[n("a",{staticStyle:{cursor:"pointer"}},[n("span",{on:{click:function(e){return t.orderBy(2)}}},[2===t.type?n("i",{class:"sort numeric icon "+(t.order>0?"up":"down")}):t._e(),t._v(" "+t._s(t.$t("accept")))])]),t._v("/"),n("a",{staticStyle:{cursor:"pointer"}},[n("span",{on:{click:function(e){return t.orderBy(3)}}},[3===t.type?n("i",{class:"sort numeric icon "+(t.order>0?"up":"down")}):t._e(),t._v(t._s(t.$t("submit")))])])]),n("th",{staticStyle:{"text-align":"center"},attrs:{width:"12%"},on:{click:function(e){return t.orderBy(4)}}},[n("a",{staticStyle:{cursor:"pointer"}},[4===t.type?n("i",{class:"sort numeric icon "+(t.order>0?"up":"down")}):t._e(),t._v(" "+t._s(t.$t("accept percentage")))])])])]),n("tbody",t._l(t.problem_table,(function(e,i){return n("tr",{key:i,class:1===e.ac?"positive":-1===e.ac?"negative":"",attrs:{id:"popup"+i},on:{mouseenter:function(n){return t.triggerPopup(i,e.pid)}}},[n("td",{staticClass:"center aligned"},[t._v(t._s(e.oj_name?e.oj_name:e.pid?"LOCAL ":"")+t._s(e.pid)),e.pid?n("br"):t._e(),t._v("Problem "+t._s(e.pnum+1001)+" ")]),n("td",[1===e.ac?n("i",{staticClass:"checkmark icon"}):-1===e.ac?n("i",{staticClass:"remove icon"}):n("i",{staticClass:"checkmark icon",staticStyle:{opacity:"0"}}),t.dayjs().isBefore(t.end_time)&&t.dayjs().isAfter(t.start_time)?n("router-link",{attrs:{to:"/contest/problem/"+t.cid+"/"+e.pnum},domProps:{innerHTML:t._s(t.contest(e.title,e.pnum))}}):n("router-link",{attrs:{to:"/problem/submit/"+e.pid},domProps:{innerHTML:t._s(t.contest(e.title,e.pnum))}})],1),t.now.isAfter(t.end_time)?n("td",[n("router-link",{attrs:{to:"/tutorial/"+e.pid}},[t._v(t._s(t.$t("solution")))])],1):t._e(),n("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.accepted)+"/"+t._s(e.submit))]),n("td",{staticStyle:{"text-align":"center"}},[t._v(t._s((100*e.accepted/Math.max(e.submit,1)).toString().substring(0,4))+" % ")])])})),0)])]),n("div",{staticClass:"five wide column"},[n("div",[n("ContestInfo",{attrs:{admin:t.admin,cid:t.cid,description:t.description,end_time:t.end_time,private_contest:t.private_contest,start_time:t.start_time,title:t.title}}),n("br")],1)])])])]):t._e()],1)},a=[],r=(n("a4d3"),n("e01a"),n("99af"),n("4160"),n("c975"),n("159b"),n("5530")),s=(n("96cf"),n("1da1")),c=n("d4ec"),o=n("bee2"),u=n("99de"),l=n("7e84"),d=n("262e"),p=n("9ab4"),m=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},_=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"ui negative message"},[n("div",{staticClass:"header"},[n("i",{staticClass:"ban icon"}),t._v(" 竞赛尚未开始 ")]),n("p",[t._v("请等待竞赛开始后刷新 ")])])])}],f=n("2b0e"),b=n("60a3"),v=function(t){function e(){return Object(c["a"])(this,e),Object(u["a"])(this,Object(l["a"])(e).apply(this,arguments))}return Object(d["a"])(e,t),e}(f["a"]);v=Object(p["c"])([b["a"]],v);var h=v,y=h,j=n("2877"),O=Object(j["a"])(y,m,_,!1,null,"18109bdc",null),g=O.exports,w=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},k=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",{staticClass:"ui dividing header"},[t._v("私有竞赛/作业")]),n("form",{staticClass:"ui form",attrs:{id:"contest_form",method:"post"}},[n("div",{staticClass:"fields"},[n("div",{staticClass:"six wide field"},[n("label",[t._v("请输入密码")]),n("input",{staticClass:"input-mini",attrs:{id:"contest_pass",name:"password",type:"password"}})])]),n("input",{staticClass:"ui primary button",attrs:{type:"submit"}})])])}],C=n("1157"),x=n.n(C),$=x.a,S=function(t){function e(){return Object(c["a"])(this,e),Object(u["a"])(this,Object(l["a"])(e).apply(this,arguments))}return Object(d["a"])(e,t),Object(o["a"])(e,[{key:"mounted",value:function(){var t=this;$("#contest_form").submit((function(){return t.axios.post("/api/contest/password/".concat(t.$route.params.contest_id),{password:$("#contest_pass").val()}).then((function(e){var n=e.data;"OK"===n.status?t.$parent.mode=0:alert(n.statement)})),!1}))}}]),e}(f["a"]);S=Object(p["c"])([b["a"]],S);var M=S,A=M,E=Object(j["a"])(A,w,k,!1,null,"3bb2b0fe",null),I=E.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui raised segment"},[n("h1"),n("h2",{staticClass:"ui header",staticStyle:{"text-align":"center"}},[n("i",{staticClass:"star outline icon"}),t._v(t._s(t.$t("contest"))+" "+t._s(t.cid))]),n("h2",{staticClass:"ui header",staticStyle:{"text-align":"center"}},[t._v(t._s(t.title))]),n("p",[t._v(t._s(t.description))]),n("div",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.$t("start time"))+" "+t._s(t.start_time.format("YYYY-MM-DD HH:mm:ss"))+" "),n("br"),t._v(" "+t._s(t.$t("now"))+" "),n("span",{attrs:{id:"nowdate"}},[t._v(t._s(t.now.format("YYYY-MM-DD HH:mm:ss")))]),n("br"),t._v(t._s(t.$t("end time"))+" "+t._s(t.end_time.format("YYYY-MM-DD HH:mm:ss"))+" ")]),n("div",{class:"ui top right attached label "+(t.private_contest?"red":"green")},[t._v(t._s(t.private_contest?t.$t("private"):t.$t("public"))+" ")]),n("div",{class:"ui top left attached "+(t.now.isAfter(t.end_time)?"red":t.now.isBefore(t.start_time)?"grey":"green")+" label"},[t.now.isAfter(t.end_time)?n("span",{staticClass:"red"},[t._v(t._s(t.$t("end")))]):t.now.isBefore(t.start_time)?n("span",{staticClass:"red"},[t._v("Pending")]):n("span",{staticClass:"green"},[t._v(t._s(t.$t("running")))])]),n("div",{staticStyle:{"text-align":"center"}},[n("div",{staticClass:"row padding"},[n("div",{staticClass:"ui buttons mini"},[t.admin?n("a",{staticClass:"ui button orange",attrs:{href:"/copystatus.php?cid="+t.cid}},[t._v("判重表")]):t._e(),t.admin?n("a",{staticClass:"ui button yellow",attrs:{href:"/copymap.php?cid="+t.cid}},[t._v("判重图")]):t._e()])])])])},L=[],B=n("5a0c"),H=n.n(B),D=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(u["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.now=H()(),t}return Object(d["a"])(e,t),Object(o["a"])(e,[{key:"mounted",value:function(){var t=this;setInterval((function(){t.now=H()()}),1e3)}}]),e}(f["a"]);Object(p["c"])([Object(b["c"])({default:H()()})],D.prototype,"start_time",void 0),Object(p["c"])([Object(b["c"])({default:H()()})],D.prototype,"end_time",void 0),Object(p["c"])([Object(b["c"])({default:""})],D.prototype,"description",void 0),Object(p["c"])([Object(b["c"])({default:""})],D.prototype,"title",void 0),Object(p["c"])([Object(b["c"])({default:!1})],D.prototype,"admin",void 0),Object(p["c"])([Object(b["c"])({default:!1})],D.prototype,"private_contest",void 0),Object(p["c"])([Object(b["c"])({default:0})],D.prototype,"cid",void 0),D=Object(p["c"])([b["a"]],D);var P=D,R=P,W=Object(j["a"])(R,Y,L,!1,null,"0fca7388",null),K=W.exports,F=n("d3a2"),J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui negative message"},[t._m(0),n("p",[t._v(t._s(t.content))])])},N=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("i",{staticClass:"ban icon"}),t._v("访问限制")])}],T=function(t){function e(){return Object(c["a"])(this,e),Object(u["a"])(this,Object(l["a"])(e).apply(this,arguments))}return Object(d["a"])(e,t),e}(f["a"]);Object(p["c"])([Object(b["c"])({default:""})],T.prototype,"content",void 0),T=Object(p["c"])([b["a"]],T);var z=T,q=z,G=Object(j["a"])(q,J,N,!1,null,"1446e3db",null),Q=G.exports,U=n("2cd4"),V=n("2f62"),X=n("2ef0"),Z=n.n(X),tt=n("92f1"),et=x.a,nt=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(u["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.cid=0,t.problem_table=[],t.start_time=H()(),t.end_time=H()(),t.description="",t.title="",t.now=H()(),t.problemInfo={},t.current_mode=0,t.order=1,t.type=0,t.contest_mode=!1,t.limit_content="",t.private_contest=!1,t.dayjs=H.a,t}return Object(d["a"])(e,t),Object(o["a"])(e,[{key:"created",value:function(){this.cid=parseInt(this.$route.params.contest_id)}},{key:"mounted",value:function(){var t=this.$route.params.contest_id;document.title="Contest ".concat(t," -- ").concat(document.title),this.getInfo(),this.run(this.run)}},{key:"getInfo",value:function(){var t=this;(this.admin||this.contest_manager)&&this.axios.get("/api/contest/problem_info/".concat(this.cid)).then((function(e){var n=e.data;if("OK"===n.status){var i=n.data;i.forEach((function(e){return t.problemInfo[e.problem_id]=e}))}}))}},{key:"triggerPopup",value:function(t,e){var n=this.problemDetail(e);et("#popup"+t).popup({hoverable:!0,html:n}).popup("show")}},{key:"problemDetail",value:function(t){console.log("problem_id",t);var e=this.problemInfo[t];if(console.log("this.problemInfo",this.problemInfo),console.log("problemInfo",e),e){var n=e.accepted,i=e.submit,a=Math.floor(100*n/i),r=e.label,s='<div class="content">\n提交: '.concat(i," 通过:").concat(n," 通过率:").concat(a,"%\n<br>\n标签:").concat(r,"\n</div>");return s}return""}},{key:"run",value:function(t){var e=this,n=this.$route.params.contest_id,i=this;this.cid=parseInt(n),this.axios.get("/api/contest/problem/"+n).then((function(n){console.log(n);var a=n.data;if("OK"!==a.status){if(console.log(a),"Permission denied"===a.statement)return void(i.mode=1);if(101===a.error_code)return void(i.mode=2);if(a.contest_mode)return void(i.mode=3)}Z.a.forEach(a.data,(function(t){t.accepted||(t.accepted=0),t.submit||(t.submit=0)}));var r=a.limit,c=a.contest_mode;if(a.admin&&(r=null,c=!1),r&&-1===location.href.indexOf(r))return i.mode=4,void(i.limit_content="根据管理员设置的策略，本次contest请使用"+r+"访问");i.problem_table=a.data,e.problem_table.forEach(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n.title){t.next=4;break}return t.next=3,e.renderRawAsync(n.title);case 3:n.title=t.sent;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());var o=a.info;i.start_time=H()(o.start_time),i.end_time=H()(o.end_time),i.title=o.title,i.contest_mode=c,i.description=o.description,i.private_contest=Boolean(o.private),"function"===typeof t&&t()}))}},{key:"detect_source",value:function(t){return t.oj_name&&"local"!==t.oj_name.toLowerCase()?t.oj_name.toLowerCase():"new"}},{key:"contest",value:function(t,e){return this.contest_mode?"Problem "+String.fromCharCode("A".charCodeAt(0)+parseInt(e)):t}},{key:"orderBy",value:function(t){var e=this;e.type===t&&(e.order=-e.order);var n=function(t,n){return e.order*(t.pnum-n.pnum)},i=function(t,n){return e.order*(t.title>n.title?1:t.title<n.title?-1:0)},a=function(t,n){return e.order*(t.submit-n.submit)},r=function(t,n){return e.order*(t.accepted-n.accepted)},s=function(t,n){var i=t.accepted/Math.max(t.submit,1),a=n.accepted/Math.max(n.submit,1);return e.order*(i-a)},c=[n,i,r,a,s];e.problem_table.sort(c[t]),e.type=t}},{key:"mode",get:function(){return this.current_mode},set:function(t){var e=t!==this.current_mode;this.current_mode=t,e&&this.run(this.run)}}]),e}(Object(b["b"])(U["a"],tt["a"]));nt=Object(p["c"])([Object(b["a"])({components:{ContestNotStart:g,LoginForm:I,ContestInfo:K,ContestMode:F["a"],LimitHostname:Q},computed:Object(r["a"])({},Object(V["b"])(["admin","contest_manager"]))})],nt);var it=nt,at=it,rt=Object(j["a"])(at,i,a,!1,null,"78bee713",null);e["default"]=rt.exports},"92f1":function(t,e,n){"use strict";n("96cf");var i=n("1da1"),a=n("d4ec"),r=n("bee2"),s=n("99de"),c=n("7e84"),o=n("262e"),u=n("9ab4"),l=n("2b0e"),d=n("60a3"),p=n("ebb0"),m=n.n(p),_=n("a390"),f=n.n(_),b=function(t){function e(){var t;return Object(a["a"])(this,e),t=Object(s["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.originalWorker=new f.a,t}return Object(o["a"])(e,t),Object(r["a"])(e,[{key:"created",value:function(){this.worker_=new m.a(this.originalWorker)}},{key:"beforeDestroy",value:function(){this.originalWorker.terminate()}},{key:"renderAsync",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.worker_.postMessage({type:"render",content:e}));case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"renderRawAsync",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.worker_.postMessage({type:"renderRaw",content:e}));case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),e}(l["a"]);b=Object(u["c"])([d["a"]],b),e["a"]=b},a390:function(t,e,n){"use strict";t.exports=function(){return new Worker("/fae2d3c0f53170ce30da.worker.js")}},bc99:function(t,e,n){"use strict";var i=n("111f"),a=n.n(i);e["default"]=a.a},d3a2:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui negative message"},[n("div",{staticClass:"header"},[n("i",{staticClass:"ban icon"}),t._v(t._s(t.$t("contest mode")))]),n("p",[t._v(t._s(t.$t("context")))])])},a=[],r=n("d4ec"),s=n("99de"),c=n("7e84"),o=n("262e"),u=n("9ab4"),l=n("60a3"),d=n("2b0e"),p=function(t){function e(){return Object(r["a"])(this,e),Object(s["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(o["a"])(e,t),e}(d["a"]);p=Object(u["c"])([l["a"]],p);var m=p,_=m,f=n("2877"),b=n("bc99"),v=Object(f["a"])(_,i,a,!1,null,"5816c0f2",null);"function"===typeof b["default"]&&Object(b["default"])(v);e["a"]=v.exports},ebb0:function(t,e,n){"use strict";var i=0;function a(t,e){var n=e.data;if(Array.isArray(n)&&!(n.length<2)){var i=n[0],a=n[1],r=n[2],s=t._callbacks[i];s&&(delete t._callbacks[i],s(a,r))}}function r(t){var e=this;e._worker=t,e._callbacks={},t.addEventListener("message",(function(t){a(e,t)}))}r.prototype.postMessage=function(t){var e=this,n=i++,r=[n,t];return new Promise((function(t,i){if(e._callbacks[n]=function(e,n){if(e)return i(new Error(e.message));t(n)},"undefined"!==typeof e._worker.controller){var s=new MessageChannel;s.port1.onmessage=function(t){a(e,t)},e._worker.controller.postMessage(r,[s.port2])}else e._worker.postMessage(r)}))},t.exports=r}}]);