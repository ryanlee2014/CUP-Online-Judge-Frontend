(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-711d1ca6"],{"111f":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"zh-cn":{"context":"根据管理员设置，该页面禁止进入"},"en":{"context":"According to admin setup, you don\'t have privilege to access target page"},"ja":{"context":"都合によって、このページはアクセス禁止されている"}}'),delete t.options._Ctor}},"2cd4":function(t,e,s){"use strict";s("e260"),s("ddb0");var i=s("9ab4"),a=s("2b0e"),n=s("60a3"),r=s("3657"),o=s("0443"),c=class extends a["a"]{constructor(){super(...arguments),this.customConfig=o}mounted(){r["a"].init(this.$store.getters.homepage),document.title=o.title}};c=Object(i["c"])([n["a"]],c),e["a"]=c},"886e":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ui container",attrs:{id:"contest_table"}},[2===t.mode?s("ContestNotStart"):t._e(),1===t.mode?s("LoginForm"):t._e(),3===t.mode?s("contest-mode"):t._e(),4===t.mode?s("LimitHostname",{attrs:{content:t.limit_content}}):t._e(),0===t.mode?s("div",{staticClass:"padding"},[s("h2",{staticClass:"ui dividing header"},[t._v(" "+t._s(t.$t("contest problem set"))+" ")]),s("div",{staticClass:"ui grid"},[s("div",{staticClass:"row"},[s("div",{staticClass:"eleven wide column"},[s("table",{staticClass:"ui basic unstackable table",attrs:{id:"problemset",width:"95%"}},[s("thead",[s("tr",{staticClass:"toprow"},[s("th",{staticStyle:{"text-align":"center"},attrs:{width:"18%"},on:{click:function(e){return t.orderBy(0)}}},[s("a",{staticStyle:{cursor:"pointer"}},[0===t.type?s("i",{class:"sort numeric icon "+(t.order>0?"up":"down")}):s("i",{staticClass:"checkmark icon",staticStyle:{opacity:"0"}}),t._v(" "+t._s(t.$t("id"))+" ")])]),s("th",{attrs:{width:"44%"},on:{click:function(e){return t.orderBy(1)}}},[s("a",{staticStyle:{cursor:"pointer"}},[1===t.type?s("i",{class:"sort numeric icon "+(t.order>0?"up":"down")}):s("i",{staticClass:"checkmark icon",staticStyle:{opacity:"0"}}),t._v(" "+t._s(t.$t("title")))])]),t.now.isAfter(t.end_time)?s("th",{attrs:{width:"10%"}}):t._e(),s("th",{staticStyle:{"text-align":"center"},attrs:{width:"16%"}},[s("a",{staticStyle:{cursor:"pointer"}},[s("span",{on:{click:function(e){return t.orderBy(2)}}},[2===t.type?s("i",{class:"sort numeric icon "+(t.order>0?"up":"down")}):t._e(),t._v(" "+t._s(t.$t("accept")))])]),t._v("/"),s("a",{staticStyle:{cursor:"pointer"}},[s("span",{on:{click:function(e){return t.orderBy(3)}}},[3===t.type?s("i",{class:"sort numeric icon "+(t.order>0?"up":"down")}):t._e(),t._v(t._s(t.$t("submit")))])])]),s("th",{staticStyle:{"text-align":"center"},attrs:{width:"12%"},on:{click:function(e){return t.orderBy(4)}}},[s("a",{staticStyle:{cursor:"pointer"}},[4===t.type?s("i",{class:"sort numeric icon "+(t.order>0?"up":"down")}):t._e(),t._v(" "+t._s(t.$t("accept percentage")))])])])]),s("tbody",t._l(t.problem_table,(function(e,i){return s("tr",{key:i,class:1===e.ac?"positive":-1===e.ac?"negative":"",attrs:{id:"popup"+i},on:{mouseenter:function(s){return t.triggerPopup(i,e.pid)}}},[s("td",{staticClass:"center aligned"},[t._v(t._s(e.oj_name?e.oj_name:e.pid?"LOCAL ":"")+t._s(e.pid)),e.pid?s("br"):t._e(),t._v("Problem "+t._s(e.pnum+1001)+" ")]),s("td",[1===e.ac?s("i",{staticClass:"checkmark icon"}):-1===e.ac?s("i",{staticClass:"remove icon"}):s("i",{staticClass:"checkmark icon",staticStyle:{opacity:"0"}}),t.dayjs().isBefore(t.end_time)&&t.dayjs().isAfter(t.start_time)?s("router-link",{attrs:{to:"/contest/problem/"+t.cid+"/"+e.pnum},domProps:{innerHTML:t._s(t.contest(e.title,e.pnum))}}):s("router-link",{attrs:{to:"/problem/submit/"+e.pid},domProps:{innerHTML:t._s(t.contest(e.title,e.pnum))}})],1),t.now.isAfter(t.end_time)?s("td",[s("router-link",{attrs:{to:"/tutorial/"+e.pid}},[t._v(t._s(t.$t("solution")))])],1):t._e(),s("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.accepted)+"/"+t._s(e.submit))]),s("td",{staticStyle:{"text-align":"center"}},[t._v(t._s((100*e.accepted/Math.max(e.submit,1)).toString().substring(0,4))+" % ")])])})),0)])]),s("div",{staticClass:"five wide column"},[s("div",[s("ContestInfo",{attrs:{admin:t.admin,cid:t.cid,description:t.description,end_time:t.end_time,private_contest:t.private_contest,start_time:t.start_time,title:t.title}}),s("br")],1)])])])]):t._e()],1)},a=[],n=(s("e01a"),s("c975"),s("e260"),s("4e82"),s("ddb0"),s("5530")),r=s("1da1"),o=s("9ab4"),c=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},d=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"ui negative message"},[s("div",{staticClass:"header"},[s("i",{staticClass:"ban icon"}),t._v(" 竞赛尚未开始 ")]),s("p",[t._v("请等待竞赛开始后刷新 ")])])])}],l=s("2b0e"),u=s("60a3"),p=class extends l["a"]{};p=Object(o["c"])([u["a"]],p);var m=p,_=m,v=s("2877"),b=Object(v["a"])(_,c,d,!1,null,"18109bdc",null),f=b.exports,h=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},g=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h2",{staticClass:"ui dividing header"},[t._v("私有竞赛/作业")]),s("form",{staticClass:"ui form",attrs:{id:"contest_form",method:"post"}},[s("div",{staticClass:"fields"},[s("div",{staticClass:"six wide field"},[s("label",[t._v("请输入密码")]),s("input",{staticClass:"input-mini",attrs:{id:"contest_pass",name:"password",type:"password"}})])]),s("input",{staticClass:"ui primary button",attrs:{type:"submit"}})])])}],y=s("1157"),w=s.n(y),C=w.a,j=class extends l["a"]{mounted(){C("#contest_form").submit(()=>(this.axios.post("/api/contest/password/".concat(this.$route.params.contest_id),{password:C("#contest_pass").val()}).then(t=>{var{data:e}=t;"OK"===e.status?this.$parent.mode=0:alert(e.statement)}),!1))}};j=Object(o["c"])([u["a"]],j);var O=j,x=O,k=Object(v["a"])(x,h,g,!1,null,"3bb2b0fe",null),$=k.exports,S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ui raised segment"},[s("h1"),s("h2",{staticClass:"ui header",staticStyle:{"text-align":"center"}},[s("i",{staticClass:"star outline icon"}),t._v(t._s(t.$t("contest"))+" "+t._s(t.cid))]),s("h2",{staticClass:"ui header",staticStyle:{"text-align":"center"}},[t._v(t._s(t.title))]),s("p",[t._v(t._s(t.description))]),s("div",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.$t("start time"))+" "+t._s(t.start_time.format("YYYY-MM-DD HH:mm:ss"))+" "),s("br"),t._v(" "+t._s(t.$t("now"))+" "),s("span",{attrs:{id:"nowdate"}},[t._v(t._s(t.now.format("YYYY-MM-DD HH:mm:ss")))]),s("br"),t._v(t._s(t.$t("end time"))+" "+t._s(t.end_time.format("YYYY-MM-DD HH:mm:ss"))+" ")]),s("div",{class:"ui top right attached label "+(t.private_contest?"red":"green")},[t._v(t._s(t.private_contest?t.$t("private"):t.$t("public"))+" ")]),s("div",{class:"ui top left attached "+(t.now.isAfter(t.end_time)?"red":t.now.isBefore(t.start_time)?"grey":"green")+" label"},[t.now.isAfter(t.end_time)?s("span",{staticClass:"red"},[t._v(t._s(t.$t("end")))]):t.now.isBefore(t.start_time)?s("span",{staticClass:"red"},[t._v("Pending")]):s("span",{staticClass:"green"},[t._v(t._s(t.$t("running")))])]),s("div",{staticStyle:{"text-align":"center"}},[s("div",{staticClass:"row padding"},[s("div",{staticClass:"ui buttons mini"},[t.admin?s("a",{staticClass:"ui button orange",attrs:{href:"/copystatus.php?cid="+t.cid}},[t._v("判重表")]):t._e(),t.admin?s("a",{staticClass:"ui button yellow",attrs:{href:"/copymap.php?cid="+t.cid}},[t._v("判重图")]):t._e()])])])])},M=[],A=s("5a0c"),E=s.n(A),I=class extends l["a"]{constructor(){super(...arguments),this.now=E()()}mounted(){setInterval(()=>{this.now=E()()},1e3)}};Object(o["c"])([Object(u["c"])({default:E()()})],I.prototype,"start_time",void 0),Object(o["c"])([Object(u["c"])({default:E()()})],I.prototype,"end_time",void 0),Object(o["c"])([Object(u["c"])({default:""})],I.prototype,"description",void 0),Object(o["c"])([Object(u["c"])({default:""})],I.prototype,"title",void 0),Object(o["c"])([Object(u["c"])({default:!1})],I.prototype,"admin",void 0),Object(o["c"])([Object(u["c"])({default:!1})],I.prototype,"private_contest",void 0),Object(o["c"])([Object(u["c"])({default:0})],I.prototype,"cid",void 0),I=Object(o["c"])([u["a"]],I);var Y=I,L=Y,B=Object(v["a"])(L,S,M,!1,null,"0fca7388",null),H=B.exports,D=s("d3a2"),P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ui negative message"},[t._m(0),s("p",[t._v(t._s(t.content))])])},W=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header"},[s("i",{staticClass:"ban icon"}),t._v("访问限制")])}],K=class extends l["a"]{};Object(o["c"])([Object(u["c"])({default:""})],K.prototype,"content",void 0),K=Object(o["c"])([u["a"]],K);var R=K,F=R,J=Object(v["a"])(F,P,W,!1,null,"1446e3db",null),N=J.exports,T=s("2cd4"),z=s("2f62"),q=s("2ef0"),G=s.n(q),Q=s("92f1"),U=w.a,V=class extends(Object(u["b"])(T["a"],Q["a"])){constructor(){super(...arguments),this.cid=0,this.problem_table=[],this.start_time=E()(),this.end_time=E()(),this.description="",this.title="",this.now=E()(),this.problemInfo={},this.current_mode=0,this.order=1,this.type=0,this.contest_mode=!1,this.limit_content="",this.private_contest=!1,this.dayjs=E.a}created(){this.cid=parseInt(this.$route.params.contest_id)}get mode(){return this.current_mode}set mode(t){var e=t!==this.current_mode;this.current_mode=t,e&&this.run(this.run)}mounted(){var t=this.$route.params.contest_id;document.title="Contest ".concat(t," -- ").concat(document.title),this.getInfo(),this.run(this.run)}getInfo(){(this.admin||this.contest_manager)&&this.axios.get("/api/contest/problem_info/".concat(this.cid)).then(t=>{var{data:e}=t;if("OK"===e.status){var s=e.data;s.forEach(t=>this.problemInfo[t.problem_id]=t)}})}triggerPopup(t,e){var s=this.problemDetail(e);U("#popup"+t).popup({hoverable:!0,html:s}).popup("show")}problemDetail(t){console.log("problem_id",t);var e=this.problemInfo[t];if(console.log("this.problemInfo",this.problemInfo),console.log("problemInfo",e),e){var s=e.accepted,i=e.submit,a=Math.floor(100*s/i),n=e.label,r='<div class="content">\n提交: '.concat(i," 通过:").concat(s," 通过率:").concat(a,"%\n<br>\n标签:").concat(n,"\n</div>");return r}return""}run(t){var e=this,s=this.$route.params.contest_id,i=this;this.cid=parseInt(s),this.axios.get("/api/contest/problem/"+s).then(s=>{console.log(s);var a=s.data;if("OK"!==a.status){if(console.log(a),"Permission denied"===a.statement)return void(i.mode=1);if(101===a.error_code)return void(i.mode=2);if(a.contest_mode)return void(i.mode=3)}G.a.forEach(a.data,t=>{t.accepted||(t.accepted=0),t.submit||(t.submit=0)});var n=a.limit,o=a.contest_mode;if(a.admin&&(n=null,o=!1),n&&-1===location.href.indexOf(n))return i.mode=4,void(i.limit_content="根据管理员设置的策略，本次contest请使用"+n+"访问");i.problem_table=a.data,this.problem_table.forEach(function(){var t=Object(r["a"])((function*(t){t.title&&(t.title=yield e.renderRawAsync(t.title))}));return function(e){return t.apply(this,arguments)}}());var c=a.info;i.start_time=E()(c.start_time),i.end_time=E()(c.end_time),i.title=c.title,i.contest_mode=o,i.description=c.description,i.private_contest=Boolean(c.private),"function"===typeof t&&t()})}detect_source(t){return t.oj_name&&"local"!==t.oj_name.toLowerCase()?t.oj_name.toLowerCase():"new"}contest(t,e){return this.contest_mode?"Problem "+String.fromCharCode("A".charCodeAt(0)+parseInt(e)):t}orderBy(t){var e=this;e.type===t&&(e.order=-e.order);var s=function(t,s){return e.order*(t.pnum-s.pnum)},i=function(t,s){return e.order*(t.title>s.title?1:t.title<s.title?-1:0)},a=function(t,s){return e.order*(t.submit-s.submit)},n=function(t,s){return e.order*(t.accepted-s.accepted)},r=function(t,s){var i=t.accepted/Math.max(t.submit,1),a=s.accepted/Math.max(s.submit,1);return e.order*(i-a)},o=[s,i,n,a,r];e.problem_table.sort(o[t]),e.type=t}};V=Object(o["c"])([Object(u["a"])({components:{ContestNotStart:f,LoginForm:$,ContestInfo:H,ContestMode:D["a"],LimitHostname:N},computed:Object(n["a"])({},Object(z["b"])(["admin","contest_manager"]))})],V);var X=V,Z=X,tt=Object(v["a"])(Z,i,a,!1,null,"78bee713",null);e["default"]=tt.exports},"92f1":function(t,e,s){"use strict";s("e260"),s("ddb0");var i=s("1da1"),a=s("9ab4"),n=s("2b0e"),r=s("60a3"),o=s("ebb0"),c=s.n(o),d=s("a390"),l=s.n(d),u=class extends n["a"]{constructor(){super(...arguments),this.originalWorker=new l.a}created(){this.worker_=new c.a(this.originalWorker)}beforeDestroy(){this.originalWorker.terminate()}renderAsync(t){var e=this;return Object(i["a"])((function*(){return e.worker_.postMessage({type:"render",content:t})}))()}renderRawAsync(t){var e=this;return Object(i["a"])((function*(){return e.worker_.postMessage({type:"renderRaw",content:t})}))()}};u=Object(a["c"])([r["a"]],u),e["a"]=u},a390:function(t,e,s){"use strict";t.exports=function(){return new Worker("/e7e268e20df3b6ced257.worker.js")}},bc99:function(t,e,s){"use strict";var i=s("111f"),a=s.n(i);e["default"]=a.a},d3a2:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ui negative message"},[s("div",{staticClass:"header"},[s("i",{staticClass:"ban icon"}),t._v(t._s(t.$t("contest mode")))]),s("p",[t._v(t._s(t.$t("context")))])])},a=[],n=s("9ab4"),r=s("60a3"),o=s("2b0e"),c=class extends o["a"]{};c=Object(n["c"])([r["a"]],c);var d=c,l=d,u=s("2877"),p=s("bc99"),m=Object(u["a"])(l,i,a,!1,null,"5816c0f2",null);"function"===typeof p["default"]&&Object(p["default"])(m);e["a"]=m.exports},ebb0:function(t,e,s){"use strict";var i=0;function a(t,e){var s=e.data;if(Array.isArray(s)&&!(s.length<2)){var i=s[0],a=s[1],n=s[2],r=t._callbacks[i];r&&(delete t._callbacks[i],r(a,n))}}function n(t){var e=this;e._worker=t,e._callbacks={},t.addEventListener("message",(function(t){a(e,t)}))}n.prototype.postMessage=function(t){var e=this,s=i++,n=[s,t];return new Promise((function(t,i){if(e._callbacks[s]=function(e,s){if(e)return i(new Error(e.message));t(s)},"undefined"!==typeof e._worker.controller){var r=new MessageChannel;r.port1.onmessage=function(t){a(e,t)},e._worker.controller.postMessage(n,[r.port2])}else e._worker.postMessage(n)}))},t.exports=n}}]);