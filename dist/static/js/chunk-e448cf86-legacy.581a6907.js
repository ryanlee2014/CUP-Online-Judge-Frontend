(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e448cf86"],{"091b":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui container padding"},[t.contest_mode?n("contest-mode"):t._e(),t.contest_mode?t._e():n("h2",{staticClass:"ui dividing header"},t._l(t.header,(function(e,r){return n("router-link",{key:r,attrs:{to:"/contest/problem/"+e}},[t._v(t._s(e)+" ")])})),1),n("div",{staticClass:"ui grid"},[n("div",{staticClass:"fourteen wide column"},[n("div",{staticClass:"ui fluid multiple search selection dropdown"},[n("input",{attrs:{type:"hidden",name:"country"},domProps:{value:t.contest_id_raw},on:{change:function(e){t.select2=e.target.value}}}),n("i",{staticClass:"dropdown icon"}),n("div",{staticClass:"default text"},[t._v("Select Contest Or Input Contest ID")]),n("div",{staticClass:"menu"},t._l(t.contest_list,(function(e,r){return n("div",{key:r,staticClass:"item",attrs:{"data-value":e.contest_id,title:e.title}},[t._v(t._s("Contest"+e.contest_id+" "+e.title))])})),0)])]),n("div",{staticClass:"two wide column"},[n("a",{staticClass:"primary button ui",on:{click:function(e){return t.run(2)}}},[t._v("Go")])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"ui segment"},[n("h2",{staticClass:"ui header"},[t._v("加载中")])]),n("div",{staticClass:"ui segment"},[n("div",{staticClass:"ui container",staticStyle:{padding:"1em"}},[n("div",{staticClass:"ui labeled input"},[n("div",{staticClass:"ui label"},[t._v(" 柱状数 ")]),n("input",{attrs:{type:"text",placeholder:"10"},on:{change:function(e){t.row_count=parseInt(e.target.value)}}})]),n("div",{staticClass:"ui labeled input"},[n("div",{staticClass:"ui label"},[t._v(" 大于等于 ")]),n("input",{attrs:{type:"text",placeholder:""},on:{change:function(e){t.greater=e.target.value}}})]),n("div",{staticClass:"ui labeled input"},[n("div",{staticClass:"ui label"},[t._v(" 小于等于 ")]),n("input",{attrs:{type:"text",placeholder:""},on:{change:function(e){t.lower=e.target.value}}})]),n("a",{staticClass:"ui primary button"},[t._v("应用")])]),n("div",{staticStyle:{height:"500px"},attrs:{id:"chartdiv"}})]),n("div",{staticClass:"ui grid"},[n("div",{staticClass:"row"},[n("table",{staticClass:"ui table"},[n("thead",[n("tr",[n("th",{on:{click:function(e){return t.sort(1)}}},[n("a",[n("i",{directives:[{name:"show",rawName:"v-show",value:1==t.type,expression:"type == 1"}],class:"sort numeric icon "+(t.order>0?"down":"up")}),t._v("User ID")])]),n("th",{on:{click:function(e){return t.sort(2)}}},[n("a",[n("i",{directives:[{name:"show",rawName:"v-show",value:2==t.type,expression:"type == 2"}],class:"sort numeric icon "+(t.order>0?"down":"up")}),t._v("Nick")])]),n("th",[n("a",{on:{click:function(e){return t.sort(3)}}},[n("i",{directives:[{name:"show",rawName:"v-show",value:3==t.type,expression:"type == 3"}],class:"sort numeric icon "+(t.order>0?"down":"up")}),t._v("通过")])]),n("th",[n("a",{on:{click:function(e){return t.sort(4)}}},[n("i",{directives:[{name:"show",rawName:"v-show",value:4==t.type,expression:"type == 4"}],class:"sort numeric icon "+(t.order>0?"down":"up")}),t._v("总提交")])]),n("th",[n("a",{on:{click:function(e){return t.sort(5)}}},[n("i",{directives:[{name:"show",rawName:"v-show",value:5==t.type,expression:"type == 5"}],class:"sort numeric icon "+(t.order>0?"down":"up")}),t._v("平均代码行数")])]),n("th",[n("a",{on:{click:function(e){return t.sort(6)}}},[n("i",{directives:[{name:"show",rawName:"v-show",value:6==t.type,expression:"type == 6"}],class:"sort numeric icon "+(t.order>0?"down":"up")}),t._v("平均代码长度")])]),n("th",[n("a",{on:{click:function(e){return t.sort(7)}}},[n("i",{directives:[{name:"show",rawName:"v-show",value:7==t.type,expression:"type == 7"}],class:"sort numeric icon "+(t.order>0?"down":"up")}),t._v("总代码长度 ")])])])]),n("tbody",t._l(t.status_data,(function(e,r){return n("tr",{key:r},[n("td",[n("router-link",{attrs:{to:"/user/"+e.user_id},domProps:{innerHTML:t._s(e.user_id)}})],1),n("td",[n("router-link",{attrs:{to:"/user/"+e.user_id},domProps:{innerHTML:t._s(e.nick)}})],1),n("td",{domProps:{innerHTML:t._s(e.ac.size)}}),n("td",{domProps:{innerHTML:t._s(e.submit.size)}}),n("td",{domProps:{innerHTML:t._s(e.average_line)}}),n("td",{domProps:{innerHTML:t._s(e.average_length+"B")}}),n("td",{domProps:{innerHTML:t._s(e.total_line)}})])})),0)])])])],1)},i=[],a=(n("99af"),n("4160"),n("caad"),n("d81d"),n("13d5"),n("b65f"),n("d3b7"),n("4ae1"),n("ac1f"),n("25f0"),n("6062"),n("2532"),n("3ca3"),n("1276"),n("159b"),n("ddb0"),n("d4ec")),s=n("bee2"),o=n("262e"),u=n("99de"),c=n("7e84"),l=n("9ab4"),d=n("2cd4"),f=n("71c9"),h=n("c497"),v=n("2ef0"),p=n.n(v),g=n("1157"),_=n.n(g),m=n("60a3");function w(t){function e(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}return function(){var n,r=Object(c["a"])(t);if(e()){var i=Object(c["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u["a"])(this,n)}}var y=_.a,b=n("5a54").default;function k(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;e=Math.max(e,1),f["e"](b);var n=f["d"]("chartdiv",h["j"]);n.hiddenState.properties.opacity=0;for(var r=t[0],i=t[t.length-1],a=Math.trunc((r-i)/e),s=r-a,o=[],u=0;u<e-1;++u)o.push({part:s+"-"+(s+a),count:0}),s-=a;o.push({part:i+"-"+(s+a),count:0}),s=r-a;var c=0,l=0;p.a.forEach(t,(function(t){if(t>=s)++o[c].count;else try{o.length-1>c?(++o[++c].count,s-=a):++o[c].count}catch(e){console.log("cnt",c),console.log("val",t)}l=Math.max(l,o[c].count)})),o=o.reverse(),n.data=o;var d=n.xAxes.push(new h["a"]);d.renderer.grid.template.location=0,d.dataFields.category="part",d.renderer.minGridDistance=40,d.fontSize=11;var v=n.yAxes.push(new h["i"]);v.min=0,v.max=l,v.strictMinMax=!0,v.renderer.minGridDistance=30;var g=n.series.push(new h["d"]);g.dataFields.categoryX="part",g.dataFields.valueY="count",g.columns.template.tooltipText="{valueY.value}",g.columns.template.tooltipY=0,g.columns.template.strokeOpacity=0,g.columns.template.adapter.add("fill",(function(t,e){return n.colors.getIndex(e.dataItem.index)}))}var x=function(t){Object(o["a"])(n,t);var e=w(n);function n(){var t;return Object(a["a"])(this,n),t=e.apply(this,arguments),t.cidArray=[],t.contest_mode=!1,t.raw_data=[],t.header=[],t.contest_id_raw="",t.status_data=[],t.data_set=[],t.order=1,t.contest_list=[],t.select1="",t.select2="",t.type=1,t.row_count=10,t.lower="",t.greater="",t.ranged=!1,t.loading=!1,t}return Object(s["a"])(n,[{key:"created",value:function(){var t=this.$route.params.contest_id;this.contest_id_raw=this.$route.params.contest_id,t&&t.length&&(t=t.split(",")),this.header=t,this.cidArray=t}},{key:"onRowCountChanged",value:function(t,e){t!==e&&(!1===!!t&&(t=10),k(this.data_set,t))}},{key:"onLowerChanged",value:function(t,e){var n=this;this.$nextTick((function(){n.rangeChange()}))}},{key:"onGreaterChanged",value:function(t,e){var n=this;this.$nextTick((function(){n.rangeChange()}))}},{key:"onRangeChanged",value:function(t,e){if(!t){var n=this;this.$nextTick((function(){n.generate(n.raw_data)}))}}},{key:"mounted",value:function(){var t=this;this.loading=!0,this.axios.get("/api/contest/list").then((function(e){var n=e.data;n.data.sort((function(t,e){return parseInt(e.contest_id)-parseInt(t.contest_id)})),t.contest_list=n.data,setTimeout((function(){y(".multiple.search").dropdown({fullTextSearch:!0})}),1e3)})),this.getData()}},{key:"updatecidArrayFromSelect",value:function(){var t=this.select2;this.loading=!0,t&&t.length&&(t=t.split(",")),this.cidArray=t,this.header=t}},{key:"getData",value:function(){var t=this,e=this,n=[];p.a.forEach(this.cidArray,(function(e){n.push(new Promise((function(n,r){t.axios.get("/api/scoreboard/".concat(e,"/line")).then((function(t){var i=t.data;"OK"==i.status?n(i.data):r(e)}))})))})),Promise.all(n).then((function(t){e.raw_data=t,e.generate(t)}))}},{key:"sortOrder",value:function(t){var e=this.status_data,n=this.order;switch(t){case 1:e.sort((function(t,e){return n*(e.user_id>t.user_id?1:e.user_id==t.user_id?0:-1)}));break;case 2:e.sort((function(t,e){return n*(e.nick>t.nick?1:e.nick==t.nick?0:-1)}));break;case 3:e.sort((function(t,e){return n*(e.ac.size-t.ac.size)}));break;case 4:e.sort((function(t,e){return n*(e.submit.size-t.submit.size)}));break;case 6:e.sort((function(t,e){return n*(e.average_length-t.average_length)}));break;case 5:e.sort((function(t,e){return n*(e.average_line-t.average_line)}));break;case 7:e.sort((function(t,e){return n*(e.total_line-t.total_line)}));break}}},{key:"sort",value:function(t){var e=this.type;this.order=e!=t?1:-this.order,this.type=t,this.sortOrder(t)}},{key:"rangeChange",value:function(){if(isNaN(this.lower)&&isNaN(this.greater))this.ranged=!1;else{if(this.lower=parseInt(this.lower),0===this.lower&&(this.lower=1/0),this.greater=parseInt(this.greater),0===this.greater&&(this.greater=-1/0),this.lower<this.greater)return;this.ranged=!0}this.ranged&&this.generate(this.raw_data)}},{key:"generate",value:function(t){var e=this;new Promise((function(e,n){e(t)})).then((function(t){var n=e.greater,r=e.lower,i=[];return p.a.forEach(t,(function(t){var a=p.a.values(t.map),s=t.user.map((function(t){return t.user_id}));if(s.length>0){var o=[];p.a.forEach(a,(function(t){if(s.includes(t.user_id)){if(e.ranged){if(isNaN(t.user_id))return;var i=parseInt(t.user_id);if(i<n||i>r)return}o.push(t)}})),a=o}i=i.concat(a)})),i})).then((function(t){var e={};return p.a.forEach(t,(function(t){"undefined"===typeof e[t.user_id]&&(e[t.user_id]={ac:new Set,submit:new Set,line:[],len:[],user_id:t.user_id,nick:t.nick,average_line:0,average_length:0,total_line:0}),4===t.result&&(e[t.user_id].ac.add(t.problem_id),e[t.user_id].line.push(t.line),e[t.user_id].len.push(t.code_length)),e[t.user_id].submit.add(t.solution_id)})),p.a.values(e)})).then((function(t){return t.sort((function(t,e){return 1*(e.user_id>t.user_id?1:e.user_id==t.user_id?0:-1)})),e.order=1,e.type=1,t})).then((function(t){return p.a.forEach(t,(function(t){0===t.line.length&&(t.line=[0]),0===t.len.length&&(t.len=[0]),t.average_line=Math.trunc(Math.round(t.line.reduce((function(t,e){return t+e}))/Math.max(1,t.line.length))),t.average_length=Math.trunc(Math.round(t.len.reduce((function(t,e){return t+e}))/Math.max(1,t.len.length))),t.total_line=t.line.reduce((function(t,e){return t+e}))})),t})).then((function(t){var n=[];return p.a.forEach(t,(function(t){n.push(t.total_line)})),n.sort((function(t,e){return e-t})),k(n,10),e.data_set=n,t})).then((function(t){e.status_data=t,e.loading=!1}))}},{key:"run",value:function(t){this.updatecidArrayFromSelect(),this.getData()}}]),n}(Object(m["b"])(d["a"]));Object(l["c"])([Object(m["d"])("row_count")],x.prototype,"onRowCountChanged",null),Object(l["c"])([Object(m["d"])("lower")],x.prototype,"onLowerChanged",null),Object(l["c"])([Object(m["d"])("greater")],x.prototype,"onGreaterChanged",null),Object(l["c"])([Object(m["d"])("range")],x.prototype,"onRangeChanged",null),x=Object(l["c"])([m["a"]],x);var C=x,O=C,j=n("2877"),M=Object(j["a"])(O,r,i,!1,null,"3ff7d5ec",null);e["default"]=M.exports},6062:function(t,e,n){"use strict";var r=n("6d61"),i=n("6566");t.exports=r("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},6566:function(t,e,n){"use strict";var r=n("9bf2").f,i=n("7c73"),a=n("e2cc"),s=n("0366"),o=n("19aa"),u=n("2266"),c=n("7dd0"),l=n("2626"),d=n("83ab"),f=n("f183").fastKey,h=n("69f3"),v=h.set,p=h.getterFor;t.exports={getConstructor:function(t,e,n,c){var l=t((function(t,r){o(t,l,e),v(t,{type:e,index:i(null),first:void 0,last:void 0,size:0}),d||(t.size=0),void 0!=r&&u(r,t[c],t,n)})),h=p(e),g=function(t,e,n){var r,i,a=h(t),s=_(t,e);return s?s.value=n:(a.last=s={index:i=f(e,!0),key:e,value:n,previous:r=a.last,next:void 0,removed:!1},a.first||(a.first=s),r&&(r.next=s),d?a.size++:t.size++,"F"!==i&&(a.index[i]=s)),t},_=function(t,e){var n,r=h(t),i=f(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return a(l.prototype,{clear:function(){var t=this,e=h(t),n=e.index,r=e.first;while(r)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete n[r.index],r=r.next;e.first=e.last=void 0,d?e.size=0:t.size=0},delete:function(t){var e=this,n=h(e),r=_(e,t);if(r){var i=r.next,a=r.previous;delete n.index[r.index],r.removed=!0,a&&(a.next=i),i&&(i.previous=a),n.first==r&&(n.first=i),n.last==r&&(n.last=a),d?n.size--:e.size--}return!!r},forEach:function(t){var e,n=h(this),r=s(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:n.first){r(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!_(this,t)}}),a(l.prototype,n?{get:function(t){var e=_(this,t);return e&&e.value},set:function(t,e){return g(this,0===t?0:t,e)}}:{add:function(t){return g(this,t=0===t?0:t,t)}}),d&&r(l.prototype,"size",{get:function(){return h(this).size}}),l},setStrong:function(t,e,n){var r=e+" Iterator",i=p(e),a=p(r);c(t,e,(function(t,e){v(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){var t=a(this),e=t.kind,n=t.last;while(n&&n.removed)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),l(e)}}},"6d61":function(t,e,n){"use strict";var r=n("23e7"),i=n("da84"),a=n("94ca"),s=n("6eeb"),o=n("f183"),u=n("2266"),c=n("19aa"),l=n("861d"),d=n("d039"),f=n("1c7e"),h=n("d44e"),v=n("7156");t.exports=function(t,e,n){var p=-1!==t.indexOf("Map"),g=-1!==t.indexOf("Weak"),_=p?"set":"add",m=i[t],w=m&&m.prototype,y=m,b={},k=function(t){var e=w[t];s(w,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!l(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(a(t,"function"!=typeof m||!(g||w.forEach&&!d((function(){(new m).entries().next()})))))y=n.getConstructor(e,t,p,_),o.REQUIRED=!0;else if(a(t,!0)){var x=new y,C=x[_](g?{}:-0,1)!=x,O=d((function(){x.has(1)})),j=f((function(t){new m(t)})),M=!g&&d((function(){var t=new m,e=5;while(e--)t[_](e,e);return!t.has(-0)}));j||(y=e((function(e,n){c(e,y,t);var r=v(new m,e,y);return void 0!=n&&u(n,r[_],r,p),r})),y.prototype=w,w.constructor=y),(O||M)&&(k("delete"),k("has"),p&&k("get")),(M||C)&&k(_),g&&w.clear&&delete w.clear}return b[t]=y,r({global:!0,forced:y!=m},b),h(y,t),g||n.setStrong(y,t,p),y}},b65f:function(t,e,n){var r=n("23e7"),i=Math.ceil,a=Math.floor;r({target:"Math",stat:!0},{trunc:function(t){return(t>0?a:i)(t)}})},bb2f:function(t,e,n){var r=n("d039");t.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},f183:function(t,e,n){var r=n("d012"),i=n("861d"),a=n("5135"),s=n("9bf2").f,o=n("90e3"),u=n("bb2f"),c=o("meta"),l=0,d=Object.isExtensible||function(){return!0},f=function(t){s(t,c,{value:{objectID:"O"+ ++l,weakData:{}}})},h=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,c)){if(!d(t))return"F";if(!e)return"E";f(t)}return t[c].objectID},v=function(t,e){if(!a(t,c)){if(!d(t))return!0;if(!e)return!1;f(t)}return t[c].weakData},p=function(t){return u&&g.REQUIRED&&d(t)&&!a(t,c)&&f(t),t},g=t.exports={REQUIRED:!1,fastKey:h,getWeakData:v,onFreeze:p};r[c]=!0}}]);
//# sourceMappingURL=chunk-e448cf86-legacy.581a6907.js.map