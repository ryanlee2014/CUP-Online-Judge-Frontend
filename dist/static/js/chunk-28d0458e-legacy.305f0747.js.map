{"version":3,"sources":["webpack:///./src/views/status/info/runtime.vue?8d40","webpack:///./src/views/status/info/runtime.vue?5aa1","webpack:///./src/views/status/info/runtime.vue?2fb3","webpack:///./src/views/status/info/runtime.vue?43be","webpack:///./src/mixin/init.ts","webpack:///./src/views/status/info/runtime.vue?68f7"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","directives","name","rawName","value","diffmode","expression","domProps","_s","info","_m","staticStyle","attrs","staticRenderFns","diffEditor","solution_id","$route","params","document","title","axios","get","then","data","status","text","initContext","leftIndex","rightIndex","left","right","cnt","split","join","indexOf","push","substring","console","log","files","match","left_array","right_array","idx","length","originalModel","createModel","modifiedModel","$forceUpdate","$nextTick","createDiffEditor","getElementById","scrollBeyondLastLine","setModel","original","modified","dispose","component","InitMixin","customConfig","init","$store","getters","homepage"],"mappings":"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","file":"static/js/chunk-28d0458e-legacy.305f0747.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ui container\"},[_c('h2',{staticClass:\"ui dividing header\"},[_vm._v(\"Runtime Information\")]),_c('div',{staticClass:\"ui segment same_width\"},[_c('div'),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.diffmode),expression:\"!diffmode\"}]},[_c('h3',{staticClass:\"ui dividing header\"},[_vm._v(\"运行结果\")]),_c('div',{staticClass:\"plain_text row\",domProps:{\"textContent\":_vm._s(_vm.info)}})]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.diffmode),expression:\"diffmode\"}],staticClass:\"ui grid\"},[_vm._m(0)]),_c('div',{staticClass:\"margin\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.diffmode),expression:\"diffmode\"}],staticStyle:{\"min-width\":\"100%\",\"height\":\"600px\",\"border\":\"1px solid #ccc\"},attrs:{\"id\":\"container\"}})])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"eight wide column\"},[_c('h3',{staticClass:\"ui header\"},[_vm._v(\" 标准输出 \")])]),_c('div',{staticClass:\"eight wide column\"},[_c('h3',{staticClass:\"ui header\"},[_vm._v(\" 用户输出 \")])])])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport mixins from \"../../../mixin/init\";\nimport { Component, Mixins } from \"vue-property-decorator\";\nimport * as monaco from \"monaco-editor\";\nimport * as _ from \"lodash\";\nimport editor = monaco.editor;\nimport IDiffEditor = editor.IDiffEditor;\n\n@Component\nexport default class RuntimeInfo extends Mixins(mixins) {\n        info = \"\";\n        solution_id?: string;\n        diffEditor: IDiffEditor | null = null;\n        diffmode = false;\n\n        created () {\n            this.solution_id = this.$route.params.solution_id;\n        }\n\n        mounted () {\n            document.title = `${this.solution_id} Runtime Information -- ${document.title}`;\n            this.axios.get(`/api/status/runtime_info/${this.solution_id}`)\n                .then(({ data }) => {\n                    if (data.status === \"OK\") {\n                        const text = data.data.info;\n                        this.initContext(text);\n                    }\n                    else {\n                        this.info = \"您无权访问\";\n                    }\n                });\n        }\n\n        initContext (text: string) {\n            let leftIndex = 0;\n            let rightIndex = 0;\n            let left: any = [];\n            let right: any = [];\n            let cnt = 10;\n            text = text.split(\"------测试输出前100行-----\").join(\"[TestRunOut]\").split(\"------用户输出前100行-----\").join(\"[UserOut]\")\n                .split(\"------测试输出(左)与用户输出(右)前200行的区别-----\").join(\"[DIFF]\");\n            while (leftIndex !== -1 && rightIndex !== -1) {\n                leftIndex = text.indexOf(\"[TestRunOut]\", leftIndex + 1);\n                rightIndex = text.indexOf(\"[UserOut]\", rightIndex + 1);\n                if (!(leftIndex !== -1 && rightIndex !== -1)) {\n                    break;\n                }\n                left.push(text.substring(leftIndex, rightIndex) + \"\\n\");\n                --cnt;\n                if (cnt <= 0) {\n                    break;\n                }\n            }\n            leftIndex = rightIndex = 0;\n            cnt = 10;\n            // eslint-disable-next-line no-constant-condition\n            while (true) {\n                leftIndex = text.indexOf(\"[UserOut]\", leftIndex + 1);\n                rightIndex = text.indexOf(\"[DIFF]\", rightIndex + 1);\n                if (!(leftIndex !== -1 && rightIndex !== -1)) {\n                    break;\n                }\n                right.push(text.substring(leftIndex, rightIndex) + \"\\n\");\n                console.log(text.substring(leftIndex, rightIndex));\n                --cnt;\n                if (cnt <= 0) {\n                    break;\n                }\n            }\n            const files: any = text.match(/[0-9A-Za-z]+\\.out/g);\n            const left_array = left;\n            const right_array = right;\n            left = \"\";\n            right = \"\";\n            let idx = 0;\n            _.forEach(left_array, function (data) {\n                left += files[idx++] + \"\\n\" + data;\n            });\n            idx = 0;\n            _.forEach(right_array, function (data) {\n                right += files[idx++] + \"\\n\" + data;\n            });\n            if (text && text.length && left && left.length) {\n                this.diffmode = true;\n                left = left.split(\"[TestRunOut]\").join(\"\");\n                right = right.split(\"[UserOut]\").join(\"\");\n                const originalModel = monaco.editor.createModel(left, \"plain/text\");\n                const modifiedModel = monaco.editor.createModel(right, \"plain/text\");\n                this.$forceUpdate();\n                this.$nextTick(() => {\n                    const diffEditor = this.diffEditor = monaco.editor.createDiffEditor(document.getElementById(\"container\")!, { scrollBeyondLastLine: false });\n                    diffEditor.setModel({\n                        original: originalModel,\n                        modified: modifiedModel\n                    });\n                });\n            }\n            else {\n                this.info = text;\n            }\n        }\n\n        beforeDestroy () {\n            if (this.diffEditor) {\n                this.diffEditor!.dispose();\n            }\n        }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./runtime.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./runtime.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./runtime.vue?vue&type=template&id=b2ddaa30&scoped=true&\"\nimport script from \"./runtime.vue?vue&type=script&lang=ts&\"\nexport * from \"./runtime.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./runtime.vue?vue&type=style&index=0&id=b2ddaa30&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b2ddaa30\",\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport { Component } from \"vue-property-decorator\";\n\nimport util from \"../lib/util\";\nimport config from \"../../config/environment.json\";\n\n@Component\nexport default class InitMixin extends Vue {\n    customConfig = config;\n    mounted () {\n        util.init(this.$store.getters.homepage);\n        document.title = config.title;\n    }\n}\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./runtime.vue?vue&type=style&index=0&id=b2ddaa30&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./runtime.vue?vue&type=style&index=0&id=b2ddaa30&scoped=true&lang=css&\""],"sourceRoot":""}