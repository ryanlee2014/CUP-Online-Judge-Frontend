(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b20e252a"],{"0b52":function(t,e,s){},"111f":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"zh-cn":{"context":"根据管理员设置，该页面禁止进入"},"en":{"context":"According to admin setup, you don\'t have privilege to access target page"},"ja":{"context":"都合によって、このページはアクセス禁止されている"}}'),delete t.options._Ctor}},"626a":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:t.visibilityChanged,expression:"visibilityChanged"}],ref:"progressBarElement",class:t.progressBarClass,on:{mouseenter:t.trigger}},[s("div",{staticClass:"bar"})])},r=[],n=(s("e260"),s("ddb0"),s("9ab4")),a=s("6da9"),o=s("60a3"),c=s("1157"),l=s.n(c);const d=l.a;let p=class extends(Object(o["b"])(a["a"])){constructor(){super(...arguments),this.prevPercentage=0,this.element=null}visibilityChanged(t,e){t&&this.active?this.element.progress("set active"):this.element.progress("remove active")}updated(){this.mountFunc()}mounted(){this.mountFunc()}mountFunc(){null===this.element&&(this.element=d(this.$refs.progressBarElement)),this.prevPercentage!==this.percentage&&(this.element.progress({percent:this.percentage,autoSuccess:!1}),this.prevPercentage=this.percentage)}get progressBarClass(){const t=["ui","progress"];return this.size.length>0&&t.push(this.size),this.color.length>0&&t.push(this.color),this.active&&t.push("active"),t}trigger(){this.popupEvent(this.$refs.progressBarElement)}forceUpdate(){this.prevPercentage!==this.percentage&&this.$nextTick(this.$forceUpdate)}onSizeChange(){this.forceUpdate()}onColorChange(){this.forceUpdate()}onActiveChange(){this.forceUpdate()}onPercentageChange(){this.forceUpdate()}};Object(n["c"])([Object(o["c"])({default:""})],p.prototype,"size",void 0),Object(n["c"])([Object(o["c"])({default:""})],p.prototype,"color",void 0),Object(n["c"])([Object(o["c"])({default:!1})],p.prototype,"active",void 0),Object(n["c"])([Object(o["c"])({default:0})],p.prototype,"percentage",void 0),Object(n["c"])([Object(o["c"])({default:t=>{}})],p.prototype,"popupEvent",void 0),Object(n["c"])([Object(o["d"])("size")],p.prototype,"onSizeChange",null),Object(n["c"])([Object(o["d"])("color")],p.prototype,"onColorChange",null),Object(n["c"])([Object(o["d"])("active")],p.prototype,"onActiveChange",null),Object(n["c"])([Object(o["d"])("percentage")],p.prototype,"onPercentageChange",null),p=Object(n["c"])([o["a"]],p);var u=p,m=u,h=(s("ee78"),s("2877")),b=Object(h["a"])(m,i,r,!1,null,"75baf2bd",null);e["a"]=b.exports},"6da9":function(t,e,s){"use strict";var i=s("9ab4"),r=s("1157"),n=s.n(r),a=(s("8665"),s("60a3")),o=s("2b0e");window.$=window.jQuery=n.a;let c=class extends o["a"]{};c=Object(i["c"])([a["a"]],c),e["a"]=c},"886e":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ui container",attrs:{id:"contest_table"}},[2===t.mode?s("ContestNotStart"):t._e(),1===t.mode?s("LoginForm"):t._e(),3===t.mode?s("contest-mode"):t._e(),4===t.mode?s("LimitHostname",{attrs:{content:t.limit_content}}):t._e(),0===t.mode?s("div",{staticClass:"padding"},[s("h2",{staticClass:"ui dividing header"},[t._v(" "+t._s(t.$t("contest problem set"))+" "+t._s(t.cid)+" -- "+t._s(t.title)+" ")]),s("div",{staticClass:"ui grid"},[t._m(0),s("div",{staticClass:"row"},[s("div",{staticClass:"eleven wide column"},[s("table",{staticClass:"ui basic unstackable table",attrs:{id:"problemset",width:"95%"}},[s("thead",[s("tr",{staticClass:"toprow"},[s("th",{staticStyle:{"text-align":"center"},attrs:{width:"18%"}},[s("a",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.orderBy(0)}}},[0===t.type?s("i",{class:"sort numeric icon "+(t.order>0?"up":"down")}):s("i",{staticClass:"checkmark icon",staticStyle:{opacity:"0"}}),t._v(" "+t._s(t.$t("id"))+" ")])]),s("th",{attrs:{width:"44%"}},[s("a",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.orderBy(1)}}},[1===t.type?s("i",{class:"sort numeric icon "+(t.order>0?"up":"down")}):s("i",{staticClass:"checkmark icon",staticStyle:{opacity:"0"}}),t._v(" "+t._s(t.$t("title")))])]),t.now.isAfter(t.end_time)?s("th",{attrs:{width:"10%"}}):t._e(),s("th",{staticStyle:{"text-align":"center"},attrs:{width:"16%"}},[s("a",{staticStyle:{cursor:"pointer"}},[s("span",{on:{click:function(e){return t.orderBy(2)}}},[2===t.type?s("i",{class:"sort numeric icon "+(t.order>0?"up":"down")}):t._e(),t._v(" "+t._s(t.$t("accept")))])]),t._v("/"),s("a",{staticStyle:{cursor:"pointer"}},[s("span",{on:{click:function(e){return t.orderBy(3)}}},[3===t.type?s("i",{class:"sort numeric icon "+(t.order>0?"up":"down")}):t._e(),t._v(t._s(t.$t("submit")))])])]),s("th",{staticStyle:{"text-align":"center"},attrs:{width:"12%"}},[s("a",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.orderBy(4)}}},[4===t.type?s("i",{class:"sort numeric icon "+(t.order>0?"up":"down")}):t._e(),t._v(" "+t._s(t.$t("accept percentage"))+" ")])])])]),s("transition-group",{attrs:{mode:"out-in",name:"list-complete",tag:"tbody"}},t._l(t.problem_table,(function(e,i){return s("tr",{key:e.pnum,class:(1===e.ac?"positive":-1===e.ac?"negative":"")+" list-complete-item",attrs:{id:"popup"+i},on:{mouseenter:function(s){return t.triggerPopup(i,e.pid)}}},[s("td",{staticClass:"center aligned"},[t._v(t._s(e.oj_name?e.oj_name:e.pid?"LOCAL ":"")+t._s(e.pid)),e.pid?s("br"):t._e(),t._v("Problem "+t._s(e.pnum+1001)+" ")]),s("td",[1===e.ac?s("i",{staticClass:"checkmark icon"}):-1===e.ac?s("i",{staticClass:"remove icon"}):s("i",{staticClass:"checkmark icon",staticStyle:{opacity:"0"}}),t.dayjs().isBefore(t.end_time)&&t.dayjs().isAfter(t.start_time)?s("router-link",{attrs:{to:"/contest/problem/"+t.cid+"/"+e.pnum},domProps:{innerHTML:t._s(t.contest(e.title,e.pnum))}}):s("router-link",{attrs:{to:"/problem/submit/"+e.pid},domProps:{innerHTML:t._s(t.contest(e.title,e.pnum))}}),t.admin&&t.getLabel(e.pid).length>0?s("br"):t._e(),t.admin?s("div",{staticStyle:{"margin-left":"20px"}},t._l(t.getLabel(e.pid),(function(e){return s("router-link",{directives:[{name:"show",rawName:"v-show",value:t.admin,expression:"admin"}],key:e,class:"ui "+t.getLabelColor(e)+" label",staticStyle:{"margin-top":"4px"},attrs:{to:"/problemset?label="+e}},[t._v(" "+t._s(e)+" ")])})),1):t._e()],1),t.now.isAfter(t.end_time)?s("td",[s("router-link",{attrs:{to:"/tutorial/"+e.pid}},[t._v(t._s(t.$t("solution")))])],1):t._e(),s("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.accepted)+"/"+t._s(e.submit))]),s("td",{staticStyle:{"text-align":"center"}},[t._v(t._s((100*e.accepted/Math.max(e.submit,1)).toString().substring(0,4))+" % ")])])})),0)],1)]),s("div",{staticClass:"five wide column"},[s("div",[s("ContestInfo",{attrs:{admin:t.admin,cid:t.cid,description:t.description,end_time:t.end_time,private_contest:t.private_contest,start_time:t.start_time,title:t.title}}),s("br")],1)])])])]):t._e()],1)},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"sixteen wide column"})])}],n=(s("e01a"),s("c975"),s("e260"),s("4e82"),s("e6cf"),s("1276"),s("498a"),s("ddb0"),s("5530")),a=s("9ab4"),o=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},c=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"ui negative message"},[s("div",{staticClass:"header"},[s("i",{staticClass:"ban icon"}),t._v(" 竞赛尚未开始 ")]),s("p",[t._v("请等待竞赛开始后刷新 ")])])])}],l=s("2b0e"),d=s("60a3");let p=class extends l["a"]{};p=Object(a["c"])([d["a"]],p);var u=p,m=u,h=s("2877"),b=Object(h["a"])(m,o,c,!1,null,"18109bdc",null),_=b.exports,v=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},f=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h2",{staticClass:"ui dividing header"},[t._v("私有竞赛/作业")]),s("form",{staticClass:"ui form",attrs:{id:"contest_form",method:"post"}},[s("div",{staticClass:"fields"},[s("div",{staticClass:"six wide field"},[s("label",[t._v("请输入密码")]),s("input",{staticClass:"input-mini",attrs:{id:"contest_pass",name:"password",type:"password"}})])]),s("input",{staticClass:"ui primary button",attrs:{type:"submit"}})])])}],g=s("1157"),y=s.n(g);const j=y.a;let C=class extends l["a"]{mounted(){j("#contest_form").submit(()=>(this.axios.post("/api/contest/password/"+this.$route.params.contest_id,{password:j("#contest_pass").val()}).then(({data:t})=>{"OK"===t.status?this.$parent.mode=0:alert(t.statement)}),!1))}};C=Object(a["c"])([d["a"]],C);var w=C,O=w,x=Object(h["a"])(O,v,f,!1,null,"3bb2b0fe",null),k=x.exports,M=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ui raised segment"},[s("div",{staticClass:"ui grid"},[s("div",{staticClass:"row"}),s("div",{staticClass:"row"}),s("div",{staticClass:"row"},[s("div",{staticClass:"sixteen wide column"},[s("contest-problem-progress-bar",{attrs:{"start-time":t.start_time,"end-time":t.end_time}})],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"ui basic segment"},[s("p",[t._v(t._s(t.description))])])])]),s("div",{class:"ui top right attached label "+(t.private_contest?"red":"green")},[t._v(" "+t._s(t.private_contest?t.$t("private"):t.$t("public"))+" ")]),s("div",{class:"ui top left attached "+(t.now.isAfter(t.end_time)?"red":t.now.isBefore(t.start_time)?"grey":"green")+" label"},[t.now.isAfter(t.end_time)?s("span",{staticClass:"red"},[t._v(t._s(t.$t("end")))]):t.now.isBefore(t.start_time)?s("span",{staticClass:"red"},[t._v("Pending")]):s("span",{staticClass:"green"},[t._v(t._s(t.$t("running")))])])])},S=[],E=s("5a0c"),P=s.n(E),B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("progress-bar",{ref:"progress",attrs:{popupEvent:t.trigger,active:!1,size:"standard",color:"green",percentage:t.percentage}})},L=[],A=s("626a");let T=class extends l["a"]{constructor(){super(...arguments),this.start=P()(),this.end=P()(),this.period=1<<30}onStartTimeChanged(t){this.start=P()(t),this.period=Math.abs(this.end.diff(this.start))}onEndTimeChanged(t){this.end=P()(t),this.period=Math.abs(this.end.diff(this.start))}getPopupHtml(){return`<div class="content">\n            ${this.$t("start time")}: ${this.startTime.format("YYYY-MM-DD HH:mm:ss")}\n            <br>\n            ${this.$t("end time")}: ${this.endTime.format("YYYY-MM-DD HH:mm:ss")}\n            </div>`}trigger(t){$(t).popup({hoverable:!0,html:this.getPopupHtml()}).popup("show")}get percentage(){const t=P()(),e=t.diff(this.start);return Math.min(100*Math.max(e,0)/this.period,100)}};Object(a["c"])([Object(d["c"])({default:P()()})],T.prototype,"startTime",void 0),Object(a["c"])([Object(d["c"])({default:P()()})],T.prototype,"endTime",void 0),Object(a["c"])([Object(d["d"])("startTime")],T.prototype,"onStartTimeChanged",null),Object(a["c"])([Object(d["d"])("endTime")],T.prototype,"onEndTimeChanged",null),T=Object(a["c"])([Object(d["a"])({components:{ProgressBar:A["a"]}})],T);var I=T,H=I,z=Object(h["a"])(H,B,L,!1,null,"09eabde6",null),Y=z.exports;let D=class extends l["a"]{constructor(){super(...arguments),this.now=P()()}mounted(){setInterval(()=>{this.now=P()()},1e3)}};Object(a["c"])([Object(d["c"])({default:P()()})],D.prototype,"start_time",void 0),Object(a["c"])([Object(d["c"])({default:P()()})],D.prototype,"end_time",void 0),Object(a["c"])([Object(d["c"])({default:""})],D.prototype,"description",void 0),Object(a["c"])([Object(d["c"])({default:""})],D.prototype,"title",void 0),Object(a["c"])([Object(d["c"])({default:!1})],D.prototype,"admin",void 0),Object(a["c"])([Object(d["c"])({default:!1})],D.prototype,"private_contest",void 0),Object(a["c"])([Object(d["c"])({default:0})],D.prototype,"cid",void 0),D=Object(a["c"])([Object(d["a"])({components:{ContestProblemProgressBar:Y}})],D);var U=D,F=U,N=Object(h["a"])(F,M,S,!1,null,"07a7807e",null),W=N.exports,K=s("d3a2"),R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ui negative message"},[t._m(0),s("p",[t._v(t._s(t.content))])])},J=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header"},[s("i",{staticClass:"ban icon"}),t._v("访问限制")])}];let Q=class extends l["a"]{};Object(a["c"])([Object(d["c"])({default:""})],Q.prototype,"content",void 0),Q=Object(a["c"])([d["a"]],Q);var q=Q,G=q,V=Object(h["a"])(G,R,J,!1,null,"1446e3db",null),X=V.exports,Z=s("2cd4"),tt=s("2f62"),et=s("2ef0"),st=s.n(et),it=s("92f1");const rt={},nt=y.a;let at=class extends(Object(d["b"])(Z["a"],it["a"])){constructor(){super(...arguments),this.colorSet=["red","orange","yellow","olive","green","teal","blue","violet","purple","pink","brown","grey"],this.colorMap={},this.cid=0,this.problem_table=[],this.start_time=P()(),this.end_time=P()(),this.description="",this.title="",this.now=P()(),this.problemInfo={},this.current_mode=0,this.order=1,this.type=0,this.contest_mode=!1,this.limit_content="",this.private_contest=!1,this.dayjs=P.a}created(){this.cid=parseInt(this.$route.params.contest_id)}get mode(){return this.current_mode}set mode(t){const e=t!==this.current_mode;this.current_mode=t,e&&this.run(this.run)}async mounted(){const t=this.$route.params.contest_id;document.title=`Contest ${t} -- ${document.title}`,await this.getInfo(),this.run(this.run)}async getInfo(){(this.admin||this.contest_manager)&&await this.axios.get("/api/contest/problem_info/"+this.cid).then(({data:t})=>{if("OK"===t.status){const e=t.data;e.forEach(t=>{this.problemInfo[t.problem_id]=t})}})}getLabelColor(t){return Object.prototype.hasOwnProperty.call(this.colorMap,t)||(this.colorMap[t]=this.colorSet[Math.floor(Math.random()*this.colorSet.length)]),this.colorMap[t]}triggerPopup(t,e){const s=this.problemDetail(e);nt("#popup"+t).popup({hoverable:!0,html:s}).popup("show")}problemDetail(t){const e=this.problemInfo[t];if(e){const t=e.accepted,s=e.submit,i=Math.floor(100*t/Math.max(s,1));return`<div class="content">\n本题历史统计<br>提交: ${s} 通过:${t} 通过率:${i}%\n</div>`}return""}hasLabel(t){return this.getLabel(t).length>0}getLabel(t){if(Object.prototype.hasOwnProperty.call(rt,t))return rt[t];const e=this.problemInfo[t];if(e){const s=e.label,i="string"===typeof s?s.split(" ").map(t=>t.trim()).filter(t=>t.length>0):[];return i.sort((t,e)=>"简单"===t||"普通"===t||"中等"===t||"困难"===t?-1:"简单"===e||"普通"===e||"中等"===e||"困难"===e?1:t<e?-1:t===e?0:1),rt[t]=i,i}}run(t){var e=this;const s=this.$route.params.contest_id,i=this;this.cid=parseInt(s),this.axios.get("/api/contest/problem/"+s).then(s=>{console.log(s);const r=s.data;if("OK"!==r.status){if(console.log(r),"Permission denied"===r.statement)return void(i.mode=1);if(101===r.error_code)return void(i.mode=2);if(r.contest_mode)return void(i.mode=3)}st.a.forEach(r.data,t=>{t.accepted||(t.accepted=0),t.submit||(t.submit=0)});let n=r.limit,a=r.contest_mode;if(r.admin&&(n=null,a=!1),n&&-1===location.href.indexOf(n))return i.mode=4,void(i.limit_content="根据管理员设置的策略，本次contest请使用"+n+"访问");i.problem_table=r.data,this.problem_table.forEach((async function(t){t.title&&(t.title=await e.renderRawAsync(t.title))}));const o=r.info;i.start_time=P()(o.start_time),i.end_time=P()(o.end_time),i.title=o.title,i.contest_mode=a,i.description=o.description,i.private_contest=Boolean(o.private),"function"===typeof t&&t()})}detect_source(t){return t.oj_name&&"local"!==t.oj_name.toLowerCase()?t.oj_name.toLowerCase():"new"}contest(t,e){return this.contest_mode?"Problem "+String.fromCharCode("A".charCodeAt(0)+parseInt(e)):t}orderBy(t){const e=this;e.type===t&&(e.order=-e.order);const s=function(t,s){return e.order*(t.pnum-s.pnum)},i=function(t,s){return e.order*(t.title>s.title?1:t.title<s.title?-1:0)},r=function(t,s){return e.order*(t.submit-s.submit)},n=function(t,s){return e.order*(t.accepted-s.accepted)},a=function(t,s){const i=t.accepted/Math.max(t.submit,1),r=s.accepted/Math.max(s.submit,1);return e.order*(i-r)},o=[s,i,n,r,a];e.problem_table.sort(o[t]),e.type=t}};at=Object(a["c"])([Object(d["a"])({components:{ContestProblemProgressBar:Y,ContestNotStart:_,LoginForm:k,ContestInfo:W,ContestMode:K["a"],LimitHostname:X},computed:Object(n["a"])({},Object(tt["b"])(["admin","contest_manager"]))})],at);var ot=at,ct=ot,lt=(s("ac05"),Object(h["a"])(ct,i,r,!1,null,"d646078a",null));e["default"]=lt.exports},"92f1":function(t,e,s){"use strict";s("e260"),s("e6cf"),s("ddb0");var i=s("9ab4"),r=s("2b0e"),n=s("60a3"),a=s("ebb0"),o=s.n(a),c=s("a390"),l=s.n(c);let d=class extends r["a"]{constructor(){super(...arguments),this.originalWorker=new l.a}created(){this.worker_=new o.a(this.originalWorker)}beforeDestroy(){this.originalWorker.terminate()}async renderAsync(t){return this.worker_.postMessage({type:"render",content:t})}async renderRawAsync(t){return this.worker_.postMessage({type:"renderRaw",content:t})}};d=Object(i["c"])([n["a"]],d),e["a"]=d},a390:function(t,e,s){"use strict";t.exports=function(){return new Worker("/39e964364396a642dc1d.worker.js")}},ac05:function(t,e,s){"use strict";var i=s("edef"),r=s.n(i);r.a},bc99:function(t,e,s){"use strict";var i=s("111f"),r=s.n(i);e["default"]=r.a},d3a2:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ui negative message"},[s("div",{staticClass:"header"},[s("i",{staticClass:"ban icon"}),t._v(t._s(t.$t("contest mode")))]),s("p",[t._v(t._s(t.$t("context")))])])},r=[],n=s("9ab4"),a=s("60a3"),o=s("2b0e");let c=class extends o["a"]{};c=Object(n["c"])([a["a"]],c);var l=c,d=l,p=s("2877"),u=s("bc99"),m=Object(p["a"])(d,i,r,!1,null,"5816c0f2",null);"function"===typeof u["default"]&&Object(u["default"])(m);e["a"]=m.exports},ebb0:function(t,e,s){"use strict";var i=0;function r(t,e){var s=e.data;if(Array.isArray(s)&&!(s.length<2)){var i=s[0],r=s[1],n=s[2],a=t._callbacks[i];a&&(delete t._callbacks[i],a(r,n))}}function n(t){var e=this;e._worker=t,e._callbacks={},t.addEventListener("message",(function(t){r(e,t)}))}n.prototype.postMessage=function(t){var e=this,s=i++,n=[s,t];return new Promise((function(t,i){if(e._callbacks[s]=function(e,s){if(e)return i(new Error(e.message));t(s)},"undefined"!==typeof e._worker.controller){var a=new MessageChannel;a.port1.onmessage=function(t){r(e,t)},e._worker.controller.postMessage(n,[a.port2])}else e._worker.postMessage(n)}))},t.exports=n},edef:function(t,e,s){},ee78:function(t,e,s){"use strict";var i=s("0b52"),r=s.n(i);r.a}}]);