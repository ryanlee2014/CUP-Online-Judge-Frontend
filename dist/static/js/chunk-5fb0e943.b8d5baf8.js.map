{"version":3,"sources":["webpack:///./node_modules/file-saver/dist/FileSaver.min.js","webpack:///./src/mixin/init.ts","webpack:///./src/views/admin/export/ProblemList.vue?8353","webpack:///./src/views/admin/export/ProblemList.vue","webpack:///./src/views/admin/export/ProblemList.vue?c8b0","webpack:///./src/views/admin/export/ProblemList.vue?e8f7"],"names":["this","b","a","autoBom","console","warn","test","type","Blob","c","d","e","XMLHttpRequest","open","responseType","onload","response","onerror","error","send","status","dispatchEvent","MouseEvent","document","createEvent","initMouseEvent","window","f","self","global","saveAs","HTMLAnchorElement","prototype","g","h","i","URL","webkitURL","j","createElement","name","download","rel","href","origin","location","target","createObjectURL","setTimeout","revokeObjectURL","navigator","msSaveOrOpenBlob","title","body","innerText","HTMLElement","safari","userAgent","FileReader","onloadend","result","replace","readAsDataURL","k","l","module","exports","InitMixin","customConfig","init","$store","getters","homepage","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","on","$event","label","select","dropdown","_l","lb","key","domProps","_s","getXLSFile","_v","$t","directives","rawName","value","exported_number","expression","style","attrs","_m","row","problem_id","staticRenderFns","$","all_label","problemList","getLabel","page","log","collector","flag","axios","get","then","data","problem","length","push","filter","split","$nextTick","doc","getElementById","XLSContentHTML","innerHTML","blob","that","$dropdown","hasLabel","allowAdditions","component"],"mappings":"sGAAA,qCAAwD,EAAO,GAAE,IAAE,kEAAnE,CAA0JA,GAAK,WAAW,aAAa,SAASC,EAAEC,EAAED,GAAG,MAAM,oBAAoBA,EAAEA,EAAE,CAACE,SAAQ,GAAI,iBAAiBF,IAAIG,QAAQC,KAAK,sDAAsDJ,EAAE,CAACE,SAASF,IAAIA,EAAEE,SAAS,6EAA6EG,KAAKJ,EAAEK,MAAM,IAAIC,KAAK,CAAC,SAASN,GAAG,CAACK,KAAKL,EAAEK,OAAOL,EAAE,SAASO,EAAER,EAAEQ,EAAEC,GAAG,IAAIC,EAAE,IAAIC,eAAeD,EAAEE,KAAK,MAAMZ,GAAGU,EAAEG,aAAa,OAAOH,EAAEI,OAAO,WAAWb,EAAES,EAAEK,SAASP,EAAEC,IAAIC,EAAEM,QAAQ,WAAWb,QAAQc,MAAM,4BAA4BP,EAAEQ,OAAO,SAAST,EAAER,GAAG,IAAID,EAAE,IAAIW,eAAeX,EAAEY,KAAK,OAAOX,GAAE,GAAI,IAAID,EAAEkB,OAAO,MAAMjB,IAAI,OAAO,KAAKD,EAAEmB,QAAQ,KAAKnB,EAAEmB,OAAO,SAAST,EAAET,GAAG,IAAIA,EAAEmB,cAAc,IAAIC,WAAW,UAAU,MAAMb,GAAG,IAAIR,EAAEsB,SAASC,YAAY,eAAevB,EAAEwB,eAAe,SAAQ,GAAG,EAAGC,OAAO,EAAE,EAAE,EAAE,GAAG,IAAG,GAAG,GAAG,GAAG,EAAG,EAAE,MAAMxB,EAAEmB,cAAcpB,IAAI,IAAI0B,EAAE,iBAAiBD,QAAQA,OAAOA,SAASA,OAAOA,OAAO,iBAAiBE,MAAMA,KAAKA,OAAOA,KAAKA,KAAK,iBAAiBC,GAAQA,EAAOA,SAASA,EAAOA,OAAO,EAAO3B,EAAEyB,EAAEG,SAAS,iBAAiBJ,QAAQA,SAASC,EAAE,aAAa,aAAaI,kBAAkBC,UAAU,SAAS/B,EAAEgC,EAAEC,GAAG,IAAIC,EAAER,EAAES,KAAKT,EAAEU,UAAUC,EAAEf,SAASgB,cAAc,KAAKN,EAAEA,GAAGhC,EAAEuC,MAAM,WAAWF,EAAEG,SAASR,EAAEK,EAAEI,IAAI,WAAW,iBAAiBzC,GAAGqC,EAAEK,KAAK1C,EAAEqC,EAAEM,SAASC,SAASD,OAAOjC,EAAE2B,GAAG5B,EAAE4B,EAAEK,MAAMlC,EAAER,EAAEgC,EAAEC,GAAGvB,EAAE2B,EAAEA,EAAEQ,OAAO,YAAYR,EAAEK,KAAKR,EAAEY,gBAAgB9C,GAAG+C,YAAW,WAAWb,EAAEc,gBAAgBX,EAAEK,QAAO,KAAKK,YAAW,WAAWrC,EAAE2B,KAAI,KAAK,qBAAqBY,UAAU,SAASvB,EAAEM,EAAEC,GAAG,GAAGD,EAAEA,GAAGN,EAAEa,MAAM,WAAW,iBAAiBb,EAAEuB,UAAUC,iBAAiBlD,EAAE0B,EAAEO,GAAGD,QAAQ,GAAGvB,EAAEiB,GAAGlB,EAAEkB,EAAEM,EAAEC,OAAO,CAAC,IAAIC,EAAEZ,SAASgB,cAAc,KAAKJ,EAAEQ,KAAKhB,EAAEQ,EAAEW,OAAO,SAASE,YAAW,WAAWrC,EAAEwB,QAAO,SAASjC,EAAED,EAAES,EAAEC,GAAG,GAAGA,EAAEA,GAAGE,KAAK,GAAG,UAAUF,IAAIA,EAAEY,SAAS6B,MAAMzC,EAAEY,SAAS8B,KAAKC,UAAU,kBAAkB,iBAAiBpD,EAAE,OAAOO,EAAEP,EAAED,EAAES,GAAG,IAAIuB,EAAE,6BAA6B/B,EAAEK,KAAK2B,EAAE,eAAe5B,KAAKqB,EAAE4B,cAAc5B,EAAE6B,OAAOrB,EAAE,eAAe7B,KAAK4C,UAAUO,WAAW,IAAItB,GAAGF,GAAGC,IAAI,iBAAiBwB,WAAW,CAAC,IAAIpB,EAAE,IAAIoB,WAAWpB,EAAEqB,UAAU,WAAW,IAAIzD,EAAEoC,EAAEsB,OAAO1D,EAAEiC,EAAEjC,EAAEA,EAAE2D,QAAQ,eAAe,yBAAyBlD,EAAEA,EAAEkC,SAASF,KAAKzC,EAAE2C,SAAS3C,EAAES,EAAE,MAAM2B,EAAEwB,cAAc5D,OAAO,CAAC,IAAI6D,EAAEpC,EAAES,KAAKT,EAAEU,UAAU2B,EAAED,EAAEhB,gBAAgB7C,GAAGS,EAAEA,EAAEkC,SAASmB,EAAEnB,SAASF,KAAKqB,EAAErD,EAAE,KAAKqC,YAAW,WAAWe,EAAEd,gBAAgBe,KAAI,QAAQrC,EAAEG,OAAO5B,EAAE4B,OAAO5B,EAA+B+D,EAAOC,QAAQhE,O,8ICOhgF,IAAqBiE,EAArB,cAAuC,OAAvC,c,oBACI,KAAAC,aAAe,EACf,UACI,OAAKC,KAAKrE,KAAKsE,OAAOC,QAAQC,UAC9BjD,SAAS6B,MAAQ,EAAOA,QAJXe,EAAS,gBAD7B,QACoBA,GAAA,U,2CCPrB,IAAIM,EAAS,WAAa,IAAIC,EAAI1E,KAAS2E,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,wBAAwB,CAACF,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,MAAM,CAACE,YAAY,SAASC,YAAY,CAAC,UAAU,SAAS,CAACH,EAAG,SAAS,CAACE,YAAY,qCAAqCE,GAAG,CAAC,OAAS,SAASC,GAAQR,EAAIS,MAAQT,EAAIU,OAAO,gCAAgCC,SAAS,gBAAgBX,EAAIY,GAAIZ,EAAa,WAAE,SAASa,GAAI,OAAOV,EAAG,SAAS,CAACW,IAAID,EAAGE,SAAS,CAAC,MAAQF,EAAG,YAAcb,EAAIgB,GAAGH,SAAS,OAAOV,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,SAAS,CAACE,YAAY,oBAAoBE,GAAG,CAAC,MAAQP,EAAIiB,aAAa,CAACjB,EAAIkB,GAAG,IAAIlB,EAAIgB,GAAGhB,EAAImB,GAAG,mBAAmB,WAAWhB,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,MAAM,CAACiB,WAAW,CAAC,CAACtD,KAAK,OAAOuD,QAAQ,SAASC,MAAOtB,EAAIuB,gBAAkB,EAAGC,WAAW,wBAAwBnB,YAAY,UAAU,CAACL,EAAIkB,GAAG,cAAclB,EAAIgB,GAAGhB,EAAIuB,iBAAiB,WAAWpB,EAAG,QAAQ,CAACsB,MAAM,2CAA6CC,MAAM,CAAC,GAAK,SAAS,CAACvB,EAAG,QAAQ,CAACH,EAAI2B,GAAG,GAAG3B,EAAIY,GAAIZ,EAAe,aAAE,SAAS4B,EAAId,GAAK,OAAOX,EAAG,KAAK,CAACW,IAAIA,GAAK,CAACX,EAAG,KAAK,CAACuB,MAAM,CAAC,MAAQ,WAAW,CAAC1B,EAAIkB,GAAGlB,EAAIgB,GAAGY,EAAIC,eAAe1B,EAAG,KAAK,CAACuB,MAAM,CAAC,MAAQ,WAAW,CAAC1B,EAAIkB,GAAGlB,EAAIgB,GAAGY,EAAIlD,gBAAe,QACnxCoD,EAAkB,CAAC,WAAa,IAAI9B,EAAI1E,KAAS2E,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,KAAK,CAACE,YAAY,SAASqB,MAAM,CAAC,MAAQ,WAAW,CAACvB,EAAG,KAAK,CAACH,EAAIkB,GAAG,gBAAgBf,EAAG,KAAK,CAACH,EAAIkB,GAAG,e,yHC0CnN,MAAMa,EAAS,IAEf,IAAqB,EAArB,cAAyC,eAAO,SAAhD,c,oBACI,KAAArB,OAASqB,EACT,KAAAtB,MAAQ,GACR,KAAAuB,UAAY,GACZ,KAAAC,YAAqB,GACrB,KAAAV,gBAAkB,EAElB,UACIjG,KAAK4G,WAGT,mBACI,IAAIC,EAAO,EACX,MAAM1B,EAAQnF,KAAKmF,MACnB/E,QAAQ0G,IAAI3B,GACZ,MAAM4B,EAAmB,GACzB,MAAO,EAAM,CACT,MAAMC,QAAahH,KAAKiH,MAAMC,IAAI,mBAAmBL,8BAAiC1B,KACjFgC,KAAK,EAAGC,UACuB,IAAxBA,EAAKC,QAAQC,SAGjBP,EAAUQ,QAASH,EAAKC,QAAQG,OAAQ7G,GAAyC,IAA9BA,EAAEwE,MAAMsC,MAAM,KAAKH,UAC/D,IAEf,IAAKN,EACD,MAEJhH,KAAKiG,gBAAkBc,EAAUO,SAC/BT,EAEN7G,KAAK2G,YAAcI,EACnB/G,KAAK0H,UAAU,KACX,MAAMC,EAAWpG,SAASqG,eAAe,QACzC,IAAIC,EAAiB,yPACrBA,GAAkB,mBAAqBF,EAAIG,UAAUjE,QAAQ,UAAW,IAAIA,QAAQ,WAAY,IAChGgE,GAAkB,kBAOlB,MAAME,EAAO,IAAIvH,KAAK,CAACqH,GAAiB,CAAEtH,KAAM,4CAChD,oBAAOwH,EAAS5C,EAAH,UAKrB,WACI,MAAM6C,EAAOhI,KACbA,KAAKiH,MAAMC,IAAI,kCACVC,KAAK,EAAGC,WACL,MAAMa,EAAYxB,EAAE,gCACpBuB,EAAKtB,UAAYU,EAAKA,KACtB,MAAMc,EAAWF,EAAK7C,MACtB8C,EACK5C,SAAS,CACN8C,gBAAgB,IAEnBlD,GAAG,SAAS,WACT+C,EAAK7C,MAAQ8C,EAAU5C,SAAS,gBAExC,IAAK,IAAIlD,EAAI,EAAGA,EAAI+F,EAASZ,SAAUnF,EACnC8F,EAAU5C,SAAS,eAAgB6C,EAAS/F,QAhE3C,EAAW,gBAD/B,QACoB,WC7CkW,I,YCOnXiG,EAAY,eACd,EACA3D,EACA+B,GACA,EACA,KACA,WACA,MAIa,aAAA4B,E","file":"static/js/chunk-5fb0e943.b8d5baf8.js","sourcesContent":["(function(a,b){if(\"function\"==typeof define&&define.amd)define([],b);else if(\"undefined\"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){\"use strict\";function b(a,b){return\"undefined\"==typeof b?b={autoBom:!1}:\"object\"!=typeof b&&(console.warn(\"Deprecated: Expected third argument to be a object\"),b={autoBom:!b}),b.autoBom&&/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type)?new Blob([\"\\uFEFF\",a],{type:a.type}):a}function c(b,c,d){var e=new XMLHttpRequest;e.open(\"GET\",b),e.responseType=\"blob\",e.onload=function(){a(e.response,c,d)},e.onerror=function(){console.error(\"could not download file\")},e.send()}function d(a){var b=new XMLHttpRequest;b.open(\"HEAD\",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent(\"click\"))}catch(c){var b=document.createEvent(\"MouseEvents\");b.initMouseEvent(\"click\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=\"object\"==typeof window&&window.window===window?window:\"object\"==typeof self&&self.self===self?self:\"object\"==typeof global&&global.global===global?global:void 0,a=f.saveAs||(\"object\"!=typeof window||window!==f?function(){}:\"download\"in HTMLAnchorElement.prototype?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement(\"a\");g=g||b.name||\"download\",j.download=g,j.rel=\"noopener\",\"string\"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target=\"_blank\")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:\"msSaveOrOpenBlob\"in navigator?function(f,g,h){if(g=g||f.name||\"download\",\"string\"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement(\"a\");i.href=f,i.target=\"_blank\",setTimeout(function(){e(i)})}}:function(a,b,d,e){if(e=e||open(\"\",\"_blank\"),e&&(e.document.title=e.document.body.innerText=\"downloading...\"),\"string\"==typeof a)return c(a,b,d);var g=\"application/octet-stream\"===a.type,h=/constructor/i.test(f.HTMLElement)||f.safari,i=/CriOS\\/[\\d]+/.test(navigator.userAgent);if((i||g&&h)&&\"object\"==typeof FileReader){var j=new FileReader;j.onloadend=function(){var a=j.result;a=i?a:a.replace(/^data:[^;]*;/,\"data:attachment/file;\"),e?e.location.href=a:location=a,e=null},j.readAsDataURL(a)}else{var k=f.URL||f.webkitURL,l=k.createObjectURL(a);e?e.location=l:location.href=l,e=null,setTimeout(function(){k.revokeObjectURL(l)},4E4)}});f.saveAs=a.saveAs=a,\"undefined\"!=typeof module&&(module.exports=a)});\n\n//# sourceMappingURL=FileSaver.min.js.map","import Vue from \"vue\";\nimport { Component } from \"vue-property-decorator\";\n\nimport util from \"../lib/util\";\nimport config from \"../../config/environment.json\";\n\n@Component\nexport default class InitMixin extends Vue {\n    customConfig = config;\n    mounted () {\n        util.init(this.$store.getters.homepage);\n        document.title = config.title;\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ui container padding\"},[_c('div',{staticClass:\"ui grid\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"column\",staticStyle:{\"z-index\":\"1700\"}},[_c('select',{staticClass:\"ui search dropdown label selection\",on:{\"change\":function($event){_vm.label = _vm.select('.label.selection.ui.dropdown').dropdown('get value')}}},_vm._l((_vm.all_label),function(lb){return _c('option',{key:lb,domProps:{\"value\":lb,\"textContent\":_vm._s(lb)}})}),0)])]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"column\"},[_c('button',{staticClass:\"ui primary button\",on:{\"click\":_vm.getXLSFile}},[_vm._v(\" \"+_vm._s(_vm.$t(\"export problem\"))+\" \")])])]),_c('div',{staticClass:\"row\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.exported_number > 0),expression:\"exported_number > 0\"}],staticClass:\"column\"},[_vm._v(\" Exported: \"+_vm._s(_vm.exported_number)+\" \")])])]),_c('table',{style:('display:none;vnd.ms-excel.numberformat:@'),attrs:{\"id\":\"save\"}},[_c('tbody',[_vm._m(0),_vm._l((_vm.problemList),function(row,key){return _c('tr',{key:key},[_c('td',{attrs:{\"align\":\"center\"}},[_vm._v(_vm._s(row.problem_id))]),_c('td',{attrs:{\"align\":\"center\"}},[_vm._v(_vm._s(row.title))])])})],2)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('tr',{staticClass:\"toprow\",attrs:{\"align\":\"center\"}},[_c('td',[_vm._v(\"Problem ID\")]),_c('td',[_vm._v(\"title\")])])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport mixins from \"../../../mixin/init\";\nimport { saveAs } from \"file-saver\";\nimport { Mixins, Component } from \"vue-property-decorator\";\nimport jquery from \"jquery\";\nconst $: any = jquery;\n@Component\nexport default class ProblemList extends Mixins(mixins) {\n    select = $;\n    label = [];\n    all_label = [];\n    problemList: any[] = [];\n    exported_number = 0;\n\n    mounted () {\n        this.getLabel();\n    }\n\n    async getXLSFile () {\n        let page = 0;\n        const label = this.label;\n        console.log(label);\n        const collector: any[] = [];\n        while (true) {\n            const flag = await this.axios.get(`/api/problemset/${page}/none/problem_id/0/?label=${label}`)\n                .then(({ data }) => {\n                    if (data.problem.length === 0) {\n                        return false;\n                    }\n                    collector.push(...(data.problem.filter((e: any) => e.label.split(\" \").length === 1)));\n                    return true;\n                });\n            if (!flag) {\n                break;\n            }\n            this.exported_number = collector.length;\n            ++page;\n        }\n        this.problemList = collector;\n        this.$nextTick(() => {\n            const doc: any = document.getElementById(\"save\");\n            let XLSContentHTML = \"<html xmlns:o=\\\"urn:schemas-microsoft-com:office:office\\\" xmlns:x=\\\"urn:schemas-microsoft-com:office:excel\\\" xmlns=\\\"http://www.w3.org/TR/REC-html40\\\">\" + \"<head><meta http-equiv='Content-Type' content='application/vnd.ms-excel; charset=utf-8' /></head>\";\n            XLSContentHTML += \"<table border=1>\" + doc.innerHTML.replace(\"<tbody>\", \"\").replace(\"</tbody>\", \"\");\n            XLSContentHTML += \"</table></html>\";\n            // const wopts = { bookType: 'csv', bookSST: false, type: 'binary' };//ods格式\n            // const wopts = { bookType: 'ods', bookSST: false, type: 'binary' };//ods格式\n            // const wopts = { bookType: 'xlsb', bookSST: false, type: 'binary' };//xlsb格式\n            // const wopts = { bookType: 'fods', bookSST: false, type: 'binary' };//fods格式\n            // const wopts = { bookType: 'biff2', bookSST: false, type: 'binary' };//xls格式\n            // downloadExl(doc);\n            const blob = new Blob([XLSContentHTML], { type: \"application/vnd.ms-excel;charset=UTF-8;\" });\n            saveAs(blob, `${label}.xls`);\n        });\n        // console.log(collector);\n    }\n\n    getLabel () {\n        const that = this;\n        this.axios.get(\"/api/problem/local/?label=true\")\n            .then(({ data }) => {\n                const $dropdown = $(\".label.selection.ui.dropdown\");\n                that.all_label = data.data;\n                const hasLabel = that.label;\n                $dropdown\n                    .dropdown({\n                        allowAdditions: false\n                    })\n                    .on(\"click\", function () {\n                        that.label = $dropdown.dropdown(\"get value\");\n                    });\n                for (let i = 0; i < hasLabel.length; ++i) {\n                    $dropdown.dropdown(\"set selected\", hasLabel[i]);\n                }\n            });\n    }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProblemList.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProblemList.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ProblemList.vue?vue&type=template&id=09f931c6&scoped=true&\"\nimport script from \"./ProblemList.vue?vue&type=script&lang=ts&\"\nexport * from \"./ProblemList.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"09f931c6\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}