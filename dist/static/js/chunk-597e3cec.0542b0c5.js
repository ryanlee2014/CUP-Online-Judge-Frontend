(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-597e3cec"],{3865:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"source",staticStyle:{width:"100%",height:"460px"},style:{width:"100%",height:e.height+"px",fontSize:e.fontSize+"px"},attrs:{cols:"180",rows:"20"}})},s=[],n=(i("e260"),i("2532"),i("ddb0"),i("9ab4")),o=i("c2c6"),c=i("6c54"),l=i("2b0e"),r=i("60a3"),p=class extends l["a"]{constructor(){super(...arguments),this.editor=null,this.source_code=""}onSourceCodeChanged(e){this.$emit("input",e)}onValueChanged(e){e!==this.source_code&&(this.source_code=e,this.editor.getModel().setValue(e))}onSelectedLanguageChanged(e){if(this.editor){var t=this.editor.getModel(),i=o["editor"].createModel(t.getValue(),c["a"][parseInt(e)]);this.editor.setModel(i),t&&t.dispose(),this.modelEventRegistry()}}onThemeChanged(e){this.editor&&(e.includes("vs")||e.includes("hc-black")?o["editor"].setTheme(e):o["editor"].setTheme("vs-dark"))}onFontSizeChanged(e){this.editor&&!isNaN(parseInt(e))&&this.editor.updateOptions({fontSize:parseInt(e)})}onHeightChanged(e){this.editor&&this.$nextTick(()=>{this.editor.layout()})}mounted(){this.$nextTick(()=>{this.initEditor()})}initEditor(){this.editor=o["editor"].create(this.$refs.source,{value:this.value,language:c["a"][this.selected_language],minimap:{enabled:this.minimap},fontLigatures:!0,scrollBeyondLastLine:!1,readOnly:this.readOnly}),this.editor.updateOptions({fontSize:this.getFontSizeFromStorage()}),o["editor"].setTheme(this.getThemeFromStorage()),this.modelEventRegistry()}modelEventRegistry(){var e=this.editor.getModel();e.onDidChangeContent(()=>{this.source_code=this.editor.getModel().getValue(),this.$store.commit("setCodeInfo",{code:this.source_code})})}getDataFromStorage(e,t){var i;try{i=JSON.parse(localStorage.submitConfig)[t]}catch(a){i=e}return i}getThemeFromStorage(){return this.getDataFromStorage("vs-dark","theme")}getFontSizeFromStorage(){return this.getDataFromStorage(16,"fontSize")}};Object(n["c"])([Object(r["c"])({default:"18"})],p.prototype,"fontSize",void 0),Object(n["c"])([Object(r["c"])({default:0})],p.prototype,"selected_language",void 0),Object(n["c"])([Object(r["c"])({default:"vs-dark"})],p.prototype,"theme",void 0),Object(n["c"])([Object(r["c"])({default:""})],p.prototype,"value",void 0),Object(n["c"])([Object(r["c"])({default:460})],p.prototype,"height",void 0),Object(n["c"])([Object(r["c"])({default:!1})],p.prototype,"readOnly",void 0),Object(n["c"])([Object(r["c"])({default:!0})],p.prototype,"minimap",void 0),Object(n["c"])([Object(r["d"])("source_code")],p.prototype,"onSourceCodeChanged",null),Object(n["c"])([Object(r["d"])("value")],p.prototype,"onValueChanged",null),Object(n["c"])([Object(r["d"])("selected_language")],p.prototype,"onSelectedLanguageChanged",null),Object(n["c"])([Object(r["d"])("theme")],p.prototype,"onThemeChanged",null),Object(n["c"])([Object(r["d"])("fontSize")],p.prototype,"onFontSizeChanged",null),Object(n["c"])([Object(r["d"])("height")],p.prototype,"onHeightChanged",null),p=Object(n["c"])([r["a"]],p);var d=p,u=d,m=i("2877"),h=Object(m["a"])(u,a,s,!1,null,"36cbcbe6",null);t["a"]=h.exports},"4a3b":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ui container padding"},[i("div",{staticClass:"ui grid"},[e._m(0),i("div",{staticClass:"two column row"},[i("div",{staticClass:"column"},[i("div",{staticClass:"ui input",staticStyle:{width:"100%"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],attrs:{type:"text"},domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value)}}})])]),i("div",{staticClass:"column",staticStyle:{"z-index":"1700"}},[i("select",{staticClass:"ui search dropdown label selection",attrs:{multiple:""},on:{change:function(t){e.label=e.select(".label.selection.ui.dropdown").dropdown("get value")}}},e._l(e.all_label,(function(t){return i("option",{key:t,domProps:{value:t,textContent:e._s(t)}})})),0)])]),i("div",{staticClass:"three column row"},[i("div",{staticClass:"column"},[i("div",{staticClass:"ui labeled input"},[i("div",{staticClass:"ui label"},[e._v(" Time ")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.time,expression:"time"}],attrs:{type:"text"},domProps:{value:e.time},on:{input:function(t){t.target.composing||(e.time=t.target.value)}}})])]),i("div",{staticClass:"column"},[i("div",{staticClass:"ui labeled input"},[i("div",{staticClass:"ui label"},[e._v(" Memory ")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.memory,expression:"memory"}],attrs:{type:"text"},domProps:{value:e.memory},on:{input:function(t){t.target.composing||(e.memory=t.target.value)}}})])]),i("div",{staticClass:"column",staticStyle:{margin:"auto"}},[i("div",{staticClass:"ui toggle checkbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.spj,expression:"spj"}],attrs:{type:"checkbox"},domProps:{checked:e.spj,checked:Array.isArray(e.spj)?e._i(e.spj,null)>-1:e.spj},on:{change:function(t){var i=e.spj,a=t.target,s=!!a.checked;if(Array.isArray(i)){var n=null,o=e._i(i,n);a.checked?o<0&&(e.spj=i.concat([n])):o>-1&&(e.spj=i.slice(0,o).concat(i.slice(o+1)))}else e.spj=s}}}),i("label",[e._v("Special Judge")])])])]),e._m(1),i("div",{staticClass:"row"},[i("mavon-editor",{ref:"description",attrs:{markInstance:e.descriptionInstance},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),i("br"),e._m(2),i("div",{staticClass:"row"},[i("mavon-editor",{ref:"input",attrs:{markInstance:e.inputInstance},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1),i("br"),e._m(3),i("div",{staticClass:"row"},[i("mavon-editor",{ref:"output",attrs:{markInstance:e.outputInstance},model:{value:e.output,callback:function(t){e.output=t},expression:"output"}})],1),i("br"),e._m(4),i("div",{staticClass:"row"},[i("div",{staticClass:"ui form",staticStyle:{"min-width":"85%"}},[i("div",{staticClass:"field"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.sampleinput,expression:"sampleinput"}],domProps:{value:e.sampleinput},on:{input:function(t){t.target.composing||(e.sampleinput=t.target.value)}}})])])]),i("br"),e._m(5),i("div",{staticClass:"row"},[i("div",{staticClass:"ui form",staticStyle:{"min-width":"85%"}},[i("div",{staticClass:"field"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.sampleoutput,expression:"sampleoutput"}],domProps:{value:e.sampleoutput},on:{input:function(t){t.target.composing||(e.sampleoutput=t.target.value)}}})])])]),e._m(6),i("div",{staticClass:"row"},e._l(e.files,(function(t){return i("a",{key:t,staticClass:"ui label",attrs:{href:e.makeHref(t)}},[e._v(e._s(t))])})),0),e._m(7),i("div",{staticClass:"row"},[i("div",{staticClass:"four wide column"},[i("div",{staticClass:"ui attached vertical fluid pointing menu",staticStyle:{height:"370px","overflow-y":"scroll","overflow-x":"hidden"}},[i("a",{class:0===e.prependSelected?"active item":"item",on:{click:function(t){e.prependSelected=0}}},[e._v("C "),i("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[e._v("GNU C99/C11 LLVM Clang ")])]),i("a",{class:1===e.prependSelected?"active item":"item",on:{click:function(t){e.prependSelected=1}}},[e._v("C++ "),i("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[e._v("GNU C++11/C++89/C++17 LLVM Clang++ ")])]),i("a",{class:2===e.prependSelected?"active item":"item",on:{click:function(t){e.prependSelected=2}}},[e._v("Pascal "),i("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[e._v("fpc Pascal ")])]),i("a",{class:3===e.prependSelected?"active item":"item",on:{click:function(t){e.prependSelected=3}}},[e._v("Java "),i("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[e._v(" openJDK 1.6/1.7/1.8/1.10 ")])]),i("a",{class:16===e.prependSelected?"active item":"item",on:{click:function(t){e.prependSelected=16}}},[e._v("JavaScript "),i("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[e._v(" NodeJS 10.13.0 ")])]),i("a",{class:6===e.prependSelected?"active item":"item",on:{click:function(t){e.prependSelected=6}}},[e._v("Python "),i("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[e._v(" Python 2.7/3.6 PyPy2/3 ")])]),i("a",{class:9===e.prependSelected?"active item":"item",on:{click:function(t){e.prependSelected=9}}},[e._v("C# "),i("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[e._v(" Mono ")])])])]),i("div",{staticClass:"ten wide column"},[i("monaco-editor",{attrs:{selected_language:e.prependSelected},model:{value:e.prepend[e.prependSelected],callback:function(t){e.$set(e.prepend,e.prependSelected,t)},expression:"prepend[prependSelected]"}})],1)]),e._m(8),i("div",{staticClass:"row"},[i("div",{staticClass:"four wide column"},[i("div",{staticClass:"ui attached vertical fluid pointing menu",staticStyle:{height:"370px","overflow-y":"scroll","overflow-x":"hidden"}},[i("a",{class:0===e.appendSelected?"active item":"item",on:{click:function(t){e.appendSelected=0}}},[e._v("C "),i("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[e._v("GNU C99/C11 LLVM Clang ")])]),i("a",{class:1===e.appendSelected?"active item":"item",on:{click:function(t){e.appendSelected=1}}},[e._v("C++ "),i("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[e._v("GNU C++11/C++89/C++17 LLVM Clang++ ")])]),i("a",{class:2===e.appendSelected?"active item":"item",on:{click:function(t){e.appendSelected=2}}},[e._v("Pascal "),i("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[e._v("fpc Pascal ")])]),i("a",{class:3===e.appendSelected?"active item":"item",on:{click:function(t){e.appendSelected=3}}},[e._v("Java "),i("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[e._v(" OpenJDK 1.6/1.7/1.8/1.10 ")])]),i("a",{class:16===e.appendSelected?"active item":"item",on:{click:function(t){e.appendSelected=16}}},[e._v("JavaScript "),i("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[e._v(" NodeJS 10.13.0 ")])]),i("a",{class:6===e.appendSelected?"active item":"item",on:{click:function(t){e.appendSelected=6}}},[e._v("Python "),i("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[e._v(" Python 2.7/3.6 PyPy2/3 ")])]),i("a",{class:9===e.appendSelected?"active item":"item",on:{click:function(t){e.appendSelected=9}}},[e._v("C# "),i("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[e._v(" Mono ")])])])]),i("div",{staticClass:"ten wide column"},[i("monaco-editor",{attrs:{selected_language:e.appendSelected},model:{value:e.append[e.appendSelected],callback:function(t){e.$set(e.append,e.appendSelected,t)},expression:"append[appendSelected]"}})],1)]),"local"===e.from?i("div",{staticClass:"row"},[i("h2",{staticClass:"ui header"},[e._v(" Hint ")])]):e._e(),"local"===e.from?i("div",{staticClass:"row"},[i("mavon-editor",{ref:"hint",attrs:{markInstance:e.hintInstance,test:"1"},model:{value:e.hint,callback:function(t){e.hint=t},expression:"hint"}})],1):e._e(),i("a",{staticClass:"ui button",on:{click:e.submit}},[e._v("提交")])])])},s=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row"},[i("h2",{staticClass:"ui header"},[e._v(" Title ")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row"},[i("h2",{staticClass:"ui header"},[e._v(" Description ")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row"},[i("h2",{staticClass:"ui header"},[e._v(" Input ")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row"},[i("h2",{staticClass:"ui header"},[e._v(" Output ")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row"},[i("h2",{staticClass:"ui header"},[e._v(" Sample Input ")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row"},[i("h2",{staticClass:"ui header"},[e._v(" Sample Output ")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row"},[i("h2",{staticClass:"ui header"},[e._v("Files")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row"},[i("h2",{staticClass:"ui header"},[e._v(" Prepend Code ")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row"},[i("h2",{staticClass:"ui header"},[e._v(" Append Code ")])])}],n=(i("e01a"),i("e260"),i("cca6"),i("1276"),i("498a"),i("ddb0"),i("9ab4")),o=i("2cd4"),c=i("6b34"),l=i("3865"),r=i("60a3"),p=i("1157"),d=i.n(p),u=i("2ef0"),m=d.a;function h(e){return e.filter((function(e,t,i){return i.indexOf(e)===t}))}var v=class extends(Object(r["b"])(o["a"])){constructor(){super(...arguments),this.title="",this.description="",this.time="",this.memory="",this.input="",this.output="",this.spj=!1,this.sampleinput="",this.sampleoutput="",this.descriptionInstance=c["a"].newInstance(),this.inputInstance=c["a"].newInstance(),this.outputInstance=c["a"].newInstance(),this.hintInstance=c["a"].newInstance(),this.hint="",this.source="",this.from="local",this.label=[],this.all_label=[],this.prepend={},this.prependSelected=0,this.append={},this.appendSelected=0,this.files=[],this.id="0",this.select=m}created(){this.id=this.$route.params.problem_id}mounted(){document.title="Problem ".concat(this.id," Edit -- ").concat(document.title),this.initData()}makeHref(e){return"/api/admin/problem/download/data/".concat(this.id,"/").concat(e)}PrependAppendLanguage(e,t,i){var a=this[e][t];"undefined"!==typeof a&&i.forEach(t=>{this[e][t]=a})}submit(){var e="local";this.PrependAppendLanguage("prepend",0,[21,13,28]),this.PrependAppendLanguage("prepend",1,[19,20,14,29]),this.PrependAppendLanguage("prepend",3,[23,24,27]),this.PrependAppendLanguage("append",3,[23,24,27]),this.PrependAppendLanguage("append",0,[21,13,28]),this.PrependAppendLanguage("append",1,[19,20,14,29]);var t=this.id,i={imageData:{}},a={payload:[],problemId:t};Object.keys(this.prepend).forEach(e=>{this.prepend[e].trim().length>0&&a.payload.push({language:parseInt(e),code:this.prepend[e]})});var s={payload:[],problemId:t};for(var n of(Object.keys(this.append).forEach(e=>{this.append[e].trim().length>0&&s.payload.push({language:parseInt(e),code:this.append[e]})}),this.$children))if("undefined"!==typeof n.markdownIt){var o=n.$vnode.data.model;i[o.expression]=o.value,i.imageData[o.expression]=n.markdownIt.__image||{}}i["time"]=this.time,i["memory"]=this.memory,i["title"]=this.title,i["sampleinput"]=this.sampleinput,i["sampleoutput"]=this.sampleoutput,i["spj"]=Number(this.spj),i["hint"]=this.hint;var c=this.label;i["label"]=h(c).join(" "),this.axios.post("/api/problem/".concat(this.source,"/").concat(t),{json:i}).then(i=>{var{data:a}=i;"OK"===a.status&&(this.axios.get("/api/problem/".concat(e,"?id=").concat(t)),alert("提交成功"))}),console.log(a),console.log(s),this.axios.post("/api/problem/prefile/prepend",a),this.axios.post("/api/problem/prefile/append",s)}imageHandler(e,t){var i={0:"description",1:"input",2:"output",3:"hint"},a=-1;u["forEach"](t.data,(t,s)=>{this.$refs[i[e]].markdownIt.image_add_with_check(t.name,t.data),a=Math.max(a,parseInt(t.name))}),this.$refs[i[e]].$children[0].num=a+1,this.$refs[i[e]].iRender()}initData(){var e=this,t=this.id;this.axios.get("/api/problem/local",{params:{id:this.id,raw:""}}).then(i=>{var{data:a}=i,s=a.problem,n={title:s.title,description:s.description,time:s.time_limit,memory:s.memory_limit,input:s.input,output:s.output,spj:!!parseInt(s.spj),sampleinput:s.sample_input,sampleoutput:s.sample_output,hint:s.hint,source:"local",label:s.label?s.label.split(" "):[],all_label:[],files:[]};Object.assign(this,n),this.axios.get("/api/problem/".concat(this.source,"/?label=true")).then(t=>{var{data:i}=t,a=m(".label.selection.ui.dropdown");e.all_label=i.data;var s=e.label;a.dropdown({allowAdditions:!0}).on("click",(function(){e.label=a.dropdown("get value")}));for(var n=0;n<s.length;++n)a.dropdown("set selected",s[n])}),this.initMarkdown("description",t,0),this.initMarkdown("input",t,1),this.initMarkdown("output",t,2),this.initMarkdown("hint",t,3),this.axios.get("/api/file/".concat(t)).then(e=>{var{data:t}=e;"OK"===t.status&&(this.files=t.data)})}),this.initPrependAppendCode("prepend","prepend"),this.initPrependAppendCode("append","append")}initPrependAppendCode(e,t){this.axios.get("/api/problem/prefile/".concat(t,"/").concat(this.id)).then(t=>{var{data:i}=t;if(i=i.data,i.payload&&i.payload.length&&i.payload.length>0){var a=i.payload;a.forEach(t=>{this[e][t.language]=t.code})}})}initMarkdown(e,t,i){this.axios.get("/api/photo/".concat(e,"/").concat(t)).then(e=>{var{data:t}=e;"OK"===t.status&&this.imageHandler(i,t)})}};v=Object(n["c"])([Object(r["a"])({components:{monacoEditor:l["a"]}})],v);var g=v,f=g,C=i("2877"),b=Object(C["a"])(f,a,s,!1,null,"0151b3fc",null);t["default"]=b.exports},"6c54":function(e,t,i){"use strict";t["a"]=["cpp","cpp","pascal","java","ruby","bash","python","php","perl","csharp","objectivec","freebasic","schema","cpp","cpp","lua","javascript","go","python","cpp","cpp","cpp","kotlin","java","java","python","python","java","cpp","cpp",""]}}]);