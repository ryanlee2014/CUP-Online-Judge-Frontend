{"version":3,"sources":["webpack:///./src/components/discuss/MainContent.vue?c0da","webpack:///./src/util/logger.ts","webpack:///./src/module/Decorator/method.ts","webpack:///./src/views/discuss/thread.vue?634b","webpack:///./src/components/discuss/MainContent.vue?c7e4","webpack:///./src/views/discuss/thread.vue?cb60","webpack:///./src/components/discuss/MainContent.vue?80f7","webpack:///./src/components/discuss/MainContent.vue?dc40","webpack:///./src/components/discuss/MainContent.vue?cc13","webpack:///./src/components/discuss/MainContent.vue?7786","webpack:///./src/views/discuss/thread.vue?619b","webpack:///./src/views/discuss/thread.vue?f00b","webpack:///./src/views/discuss/thread.vue?6ae1","webpack:///./src/components/discuss/MainContent.vue?9d37"],"names":["emptyFunc","args","log","logFactory","prefix","decoratorLog","Debounce","wait","options","target","propertyName","propertyDescriptor","constructor","name","method","value","debounce","Interval","this","timer_","length","Error","apply","push","setInterval","Debuglogging","params","map","a","JSON","stringify","join","result","r","WebSocketRequest","$socket","connected","alert","Lock","lock","async","acquireAsync","resp","release","ErrorAlert","e","message","module","exports","Component","__i18n","_Ctor","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","$t","attrs","id","thread_head","title","owner","_l","row","key","hasAvatarURL","getAvatarURL","nick","Date","create_time","toLocaleString","domProps","content","user_id","_e","on","$event","block_reply","comment_id","model","callback","$$v","replyText","expression","staticStyle","directives","rawName","composing","captcha","replyComment","staticRenderFns","$tc","readTime","n","thread_content","doc","document","createElement","$","uslug","avatarMixin","MarkdownWorkerMixin","mermaidMixin","val","ret","renderAsync","$nextTick","renderMermaid","initMermaid","innerHTML","Math","trunc","ceil","innerText","tableOfContents","$content","html","$container","sticky","context","offset","find","documentElement","body","animate","scrollTop","getElementById","top","trim","default","components","UserCard","component","page","table_val","total","isadmin","parseInt","$route","forEach","v","admin","assign","discuss_header_content","discuss","that","axios","get","then","data","table","copyContent","text","trigger","parent","next","popup","send","comment","post","status","location","reload","commentId","MainContent"],"mappings":"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","file":"static/js/chunk-12531e06.e4f8869c.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainContent.vue?vue&type=style&index=0&id=5aacee6f&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainContent.vue?vue&type=style&index=0&id=5aacee6f&scoped=true&lang=css&\"","const emptyFunc = (...args: any[]) => {};\n\nconst logger = (...args: any[]) => { console.log(...args); };\n\nexport const log = process.env.NODE_ENV === \"production\" ? emptyFunc : logger;\n\nexport function logFactory (prefix: string) {\n    return function (...args: any[]) {\n        log(prefix, ...args);\n    };\n}\n","import _ from \"lodash\";\n\nimport { log, logFactory } from \"@/util/logger\";\nimport AwaitLock from \"await-lock\";\n\nconst decoratorLog = logFactory(\"Decorator mounted: \");\ninterface IPropertyDescriptor extends PropertyDescriptor {\n    timer_?: any[]\n}\n\ninterface IWebSocketPropertyDescriptor extends PropertyDescriptor {\n    $socket?: any;\n    sockets?: any;\n}\n\nexport function Debounce (wait?: number, options?: any) {\n    return function (target: any, propertyName: string, propertyDescriptor: PropertyDescriptor) {\n        decoratorLog(`debounce, target:${target.constructor.name}, propertyName:${propertyName}`);\n        const method = propertyDescriptor.value;\n        propertyDescriptor.value = _.debounce(method, wait, options);\n        return propertyDescriptor;\n    };\n}\n\nexport function Interval (wait = 0) {\n    return function (target: any, propertyName: string, propertyDescriptor: IPropertyDescriptor) {\n        decoratorLog(`Interval, target:${target.constructor.name}, propertyName:${propertyName}`);\n        const method = propertyDescriptor.value;\n        propertyDescriptor.value = function (...args: any[]) {\n            if (typeof this.timer_ === \"undefined\" || typeof this.timer_.length === \"undefined\") {\n                throw new Error(\"You should mixin TimerMixin to your component\");\n            }\n            method.apply(this, args);\n            this.timer_.push(setInterval(() => { decoratorLog(`${target.constructor.name}.${propertyName} called.`); method.apply(this, args); }, wait));\n        };\n        log(\"mounted interval\");\n    };\n}\n\nexport function Debuglogging (target: any, propertyName: string, propertyDescriptor: IPropertyDescriptor) {\n    decoratorLog(`Debuglogging, target:${target.constructor.name}, propertyName:${propertyName}`);\n    const method = propertyDescriptor.value;\n    propertyDescriptor.value = function (...args: any[]) {\n        const params = args.map(a => JSON.stringify(a)).join();\n        const result = method.apply(this, args);\n        const r = JSON.stringify(result);\n        log(`Call: ${propertyName}(${params}) => ${r}`);\n        return result;\n    };\n}\n\nexport function DebugloggingAsync (target: any, propertyName: string, propertyDescriptor: IPropertyDescriptor) {\n    decoratorLog(`DebugloggingAsync, target:${target.constructor.name}, propertyName:${propertyName}`);\n    const method = propertyDescriptor.value;\n    propertyDescriptor.value = async function (...args: any[]) {\n        const params = args.map(a => JSON.stringify(a)).join();\n        const result = await method.apply(this, args);\n        const r = JSON.stringify(result);\n        log(`Call: ${propertyName}(${params}) => ${r}`);\n        return result;\n    };\n}\n\nexport function WebSocketRequest (target: any, propertyName: string, propertyDescriptor: IWebSocketPropertyDescriptor) {\n    decoratorLog(`WebSocketRequest, target:${target.constructor.name}, propertyName:${propertyName}`);\n    const method = propertyDescriptor.value;\n    propertyDescriptor.value = function (...args: any[]) {\n        if (!this.$socket!.connected) {\n            alert(\"WebSocket服务未启动，请等待服务启动后提交\\nWebSocket服务启动标志未:\\n右上角显示在线人数\");\n            return;\n        }\n        return method.apply(this, args);\n    };\n}\n\nexport function Lock (lock: AwaitLock) {\n    return function (target: any, propertyName: string, propertyDescriptor: IWebSocketPropertyDescriptor) {\n        decoratorLog(`Lock, target:${target.constructor.name}, propertyName:${propertyName}`);\n        const method = propertyDescriptor.value;\n        propertyDescriptor.value = async function (...args: any) {\n            await lock.acquireAsync();\n            const resp = method.apply(this, args);\n            lock.release();\n            return resp;\n        };\n    };\n}\n\nexport function ErrorAlert (target: any, propertyName: string, propertyDescriptor: PropertyDescriptor) {\n    const method = propertyDescriptor.value;\n    propertyDescriptor.value = function (...args: any) {\n        try {\n            return method.apply(this, args);\n        }\n        catch (e) {\n            alert(e.message);\n        }\n    };\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./thread.vue?vue&type=style&index=0&id=828c2a76&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./thread.vue?vue&type=style&index=0&id=828c2a76&scoped=true&lang=css&\"","module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"zh-cn\":{\"read time cost\":\"阅读本文需要大约{n}分钟\"},\"en\":{\"read time cost\":\"It takes about {n} minute to read this article | It takes about {n} minutes to read this article\"},\"ja\":{\"read time cost\":\"この記事を読むには約{n}分かかります\"}}')\n  delete Component.options._Ctor\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ui container padding\"},[_c('h2',{staticClass:\"ui dividing header\"},[_vm._v(_vm._s(_vm.$t(\"discuss\")))]),_c('div',{staticClass:\"ui breadcrumb\"},[_c('router-link',{staticClass:\"section\",attrs:{\"to\":\"/discuss\"}},[_vm._v(\"讨论主页\")]),_c('i',{staticClass:\"right angle icon divider\"}),_c('div',{staticClass:\"active section\"},[_vm._v(\"Discuss ID:\"+_vm._s(_vm.id))])],1),_c('h1',[_vm._v(_vm._s(_vm.thread_head ? _vm.thread_head.title : \"\"))]),_c('MainContent',{attrs:{\"id\":_vm.id,\"owner\":_vm.owner,\"thread_head\":_vm.thread_head || {}}}),_c('h3',{staticClass:\"ui dividing header\"},[_vm._v(_vm._s(_vm.$t(\"comments\")))]),_c('div',{staticClass:\"ui comments\"},_vm._l((_vm.reply),function(row,key){return _c('div',{key:key,staticClass:\"comment\"},[_c('div',{staticClass:\"avatar\"},[(_vm.hasAvatarURL(row))?_c('router-link',{staticClass:\"avatar\",attrs:{\"src\":_vm.getAvatarURL(row),\"to\":(\"/user/\" + (row.user_id)),\"tag\":\"img\"}}):_c('router-link',{attrs:{\"src\":\"@/static/image/white-image.png\",\"to\":(\"/user/\" + (row.user_id)),\"tag\":\"img\"}})],1),_c('div',{staticClass:\"content\"},[_c('router-link',{staticClass:\"author\",attrs:{\"to\":(\"/user/\" + (row.user_id))}},[_vm._v(_vm._s(row.nick))]),_c('div',{staticClass:\"metadata\"},[_c('span',{staticClass:\"date\"},[_vm._v(_vm._s(new Date(row.create_time).toLocaleString()))])]),_c('div',{staticClass:\"text\",domProps:{\"innerHTML\":_vm._s(row.content)}}),_c('div',{staticClass:\"actions\"},[(row.user_id + '' === _vm.owner)?_c('router-link',{staticClass:\"reply\",attrs:{\"to\":(\"/discuss/edit/\" + _vm.id + \"/\" + (row.comment_id))}},[_vm._v(\" \"+_vm._s(_vm.$t(\"edit\"))+\" \")]):_vm._e(),(_vm.isadmin)?_c('a',{staticClass:\"reply\",on:{\"click\":function($event){return _vm.block_reply(row.comment_id)}}},[_vm._v(\"屏蔽\")]):_vm._e()],1)],1)])}),0),_c('h3',{staticClass:\"ui dividing header\"},[_vm._v(_vm._s(_vm.$t(\"reply\")))]),_c('form',{staticClass:\"ui reply form\"},[_c('div',{staticClass:\"field\"},[_c('mavon-editor',{model:{value:(_vm.replyText),callback:function ($$v) {_vm.replyText=$$v},expression:\"replyText\"}})],1),_c('div',{staticClass:\"two field\"},[_c('div',{staticClass:\"ui left input\",staticStyle:{\"width\":\"auto\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.captcha),expression:\"captcha\"}],attrs:{\"id\":\"vcode\",\"name\":\"vcode\",\"placeholder\":\"验证码\",\"type\":\"text\"},domProps:{\"value\":(_vm.captcha)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.captcha=$event.target.value}}}),_c('img',{attrs:{\"alt\":\"click to change\",\"height\":\"40px\",\"id\":\"vcode_graph\",\"onclick\":\"this.src='/api/captcha?from=discuss&random='+Math.random()\",\"src\":\"/api/captcha?from=discuss\"}})])]),_c('div',{staticClass:\"ui blue labeled submit icon button\",on:{\"click\":_vm.replyComment}},[_c('i',{staticClass:\"icon edit\"}),_vm._v(\" \"+_vm._s(_vm.$t(\"add\"))+\" \")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ui grid\"},[_c('div',{staticClass:\"four wide column\"},[_c('UserCard',{attrs:{\"thread_head\":_vm.thread_head}}),_c('div',{staticClass:\"ui sticky\",staticStyle:{\"left\":\"50.1429px\"},attrs:{\"id\":\"sticky_content\"}},[_c('h3',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.content),expression:\"content\"}],staticClass:\"ui header\",attrs:{\"id\":\"contents\"}},[_vm._v(\"目录\")]),_c('div',{attrs:{\"id\":\"contentContainer\"}})])],1),_c('div',{staticClass:\"twelve wide column\"},[_c('div',{staticClass:\"ui existing full segment\",attrs:{\"id\":\"main_context\"}},[(_vm.thread_head.user_id + '' === _vm.owner)?_c('router-link',{staticClass:\"ui blue right ribbon label\",attrs:{\"to\":(\"/discuss/edit/\" + _vm.id)}},[_vm._v(\" \"+_vm._s(_vm.$t(\"edit\"))+\" \")]):_vm._e(),_c('div',{staticClass:\"ui info message\"},[_c('div',{staticClass:\"header\"},[_vm._v(\" \"+_vm._s(_vm.$tc(\"read time cost\", _vm.readTime(_vm.thread_head.content), {n: _vm.readTime(_vm.thread_head.content)}))+\" \")])]),_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.thread_content)}})],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport avatarMixin from \"../../mixin/avatarMixin\";\nimport { Mixins, Component, Prop, Watch } from \"vue-property-decorator\";\nimport UserCard from \"@/components/user/UserCard.vue\";\nimport MarkdownWorkerMixin from \"@/mixin/MarkdownWorkerMixin\";\nimport jquery from \"jquery\";\nimport mermaidMixin from \"@/mixin/mermaidMixin\";\nimport { Debounce } from \"@/module/Decorator/method\";\nconst doc = document.createElement(\"div\");\nconst $: any = jquery;\nconst uslug = require(\"uslug\");\n\n@Component({\n    components: {\n        UserCard\n    }\n})\nexport default class DiscussContent extends Mixins(avatarMixin, MarkdownWorkerMixin, mermaidMixin) {\n    @Prop({ default: () => { return {}; } }) thread_head!: any;\n    @Prop({ default: \"\" }) owner!: string;\n    @Prop({ default: \"\" }) id!: string;\n\n    thread_content: string = \"\";\n    content: boolean = false;\n\n    created () {\n        this.thread_content = this.$t(\"loading\") as string;\n    }\n\n    @Watch(\"thread_head\")\n    async onThreadHeadChanged (val: any) {\n        if (val.content) {\n            const ret = await this.renderAsync(val.content);\n            this.thread_content = ret;\n            this.$nextTick(() => {\n                this.renderMermaid();\n            });\n        }\n    }\n\n    @Debounce(100)\n    renderMermaid () {\n        this.initMermaid();\n    }\n\n    readTime (content: string) {\n        doc.innerHTML = content;\n        return Math.trunc(Math.ceil(doc.innerText.length / 300) ** 1.41428579532);\n    }\n\n    updated () {\n        const tableOfContents = $(\".table-of-contents\");\n        let $content = tableOfContents.html();\n        const $container = $(\"#contentContainer\");\n        if (!$content) $content = \"\";\n        tableOfContents.html(\"\");\n        if ($content) {\n            $container.html(\"\" + $content + \"\");\n        }\n        $(\"#sticky_content\").sticky({\n            context: \"#main_context\",\n            offset: 50\n        });\n        $container.find(\"a\").on(\"click\", function (this: any) {\n            $([document.documentElement, document.body]).animate({\n                scrollTop: $(document.getElementById(uslug(this.innerText))).offset().top - 50\n            }, 600);\n            return false;\n        });\n        this.content = ($content && $content.trim && $content.trim().length > 0) || ($container && $container.html() && $container.html().trim().length > 0);\n    }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainContent.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainContent.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./MainContent.vue?vue&type=template&id=5aacee6f&scoped=true&\"\nimport script from \"./MainContent.vue?vue&type=script&lang=ts&\"\nexport * from \"./MainContent.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./MainContent.vue?vue&type=style&index=0&id=5aacee6f&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5aacee6f\",\n  null\n  \n)\n\n/* custom blocks */\nimport block0 from \"./MainContent.vue?vue&type=custom&index=0&blockType=i18n\"\nif (typeof block0 === 'function') block0(component)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport MainContent from \"../../components/discuss/MainContent.vue\";\nimport mixins from \"../../mixin/init\";\nimport avatarMixin from \"../../mixin/avatarMixin\";\nimport mermaidMixin from \"../../mixin/mermaidMixin\";\nimport jquery from \"jquery\";\nimport _ from \"lodash\";\nimport Clipboard from \"clipboard\";\nimport { Mixins, Component } from \"vue-property-decorator\";\nimport MarkdownWorkerMixin from \"@/mixin/MarkdownWorkerMixin\";\n\nconst $: any = jquery;\nconst uslug = require(\"uslug\");\n@Component({\n    components: {\n        MainContent\n    }\n})\nexport default class Thread extends Mixins(mixins, avatarMixin, MarkdownWorkerMixin) {\n    page = 0;\n    table_val: any = {};\n    total = 0;\n    id = 0;\n    replyText = \"\";\n    captcha = \"\";\n    owner = \"\";\n    isadmin = false;\n    created () {\n        this.id = parseInt(this.$route.params.id) || 0;\n    }\n\n    get table () {\n        return this.table_val;\n    }\n\n    set table (val: any) {\n        _.forEach(val, (v) => {\n            if (v && v.length) {\n                _.forEach(v, async (v) => {\n                    if (v.content) {\n                        v.content = await this.renderAsync(v.content);\n                    }\n                });\n            }\n        });\n\n        this.table_val = val;\n        this.owner = val.owner;\n        this.isadmin = val.admin;\n    }\n\n    get thread_head () {\n        const context: any = {\n            title: \"\"\n        };\n        _.assign(context, this.table_val.discuss_header_content);\n        return context;\n    }\n\n    get reply () {\n        return this.table_val.discuss;\n    }\n\n    mounted () {\n        document.title = `Thread ${this.id} -- ${document.title}`;\n        const page = this.page * 20;\n        const that = this;\n        this.axios.get(`/api/discuss/${this.id}?page=${page}`)\n            .then(({ data }) => {\n                that.table = data;\n            });\n\n        this.$nextTick(function () {\n            const copyContent = new Clipboard(\".copy.context\", {\n                text: function (trigger) {\n                    return $(trigger).parent().next().text();\n                }\n            });\n            copyContent.on(\"success\", function (e) {\n                $(e.trigger)\n                    .popup({\n                        title: \"Finished\",\n                        content: \"Context is in your clipboard\",\n                        on: \"click\"\n                    })\n                    .popup(\"show\");\n            });\n        });\n    }\n\n    replyComment () {\n        const send = {\n            comment: this.replyText,\n            captcha: this.captcha\n        };\n        this.axios.post(`/api/discuss/reply/${this.id}`, send)\n            .then(({ data }) => {\n                if (data.status === \"OK\") {\n                    alert(\"回复成功\");\n                    location.reload();\n                }\n                else {\n                    alert(\"回复失败！服务器发生未知错误\");\n                }\n            });\n    }\n\n    block_reply (commentId: string) {\n        this.axios.get(`/api/discuss/update/reply/block/${this.id}/${commentId}`)\n            .then(({ data }) => {\n                if (data.status === \"OK\") {\n                    alert(\"操作成功\");\n                }\n                else {\n                    alert(\"操作失败\");\n                }\n            });\n    }\n\n    readTime (content: string) {\n        const doc = document.createElement(\"div\");\n        doc.innerHTML = content;\n        return Math.trunc(Math.ceil(doc.innerText.length / 300) ** 1.41428579532);\n    }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./thread.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./thread.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./thread.vue?vue&type=template&id=828c2a76&scoped=true&\"\nimport script from \"./thread.vue?vue&type=script&lang=ts&\"\nexport * from \"./thread.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./thread.vue?vue&type=style&index=0&id=828c2a76&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"828c2a76\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainContent.vue?vue&type=custom&index=0&blockType=i18n\"; export default mod; export * from \"-!../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainContent.vue?vue&type=custom&index=0&blockType=i18n\""],"sourceRoot":""}