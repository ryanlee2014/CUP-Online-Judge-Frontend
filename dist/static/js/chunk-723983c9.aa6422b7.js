(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-723983c9"],{3865:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"source",staticStyle:{width:"100%",height:"460px"},style:{width:"100%",height:e.height+"px",fontSize:e.fontSize+"px"},attrs:{cols:"180",rows:"20"}})},s=[],n=(a("e260"),a("2532"),a("ddb0"),a("9ab4")),c=a("c2c6"),o=a("6c54"),l=a("2b0e"),r=a("60a3"),d=class extends l["a"]{constructor(){super(...arguments),this.editor=null,this.source_code=""}onSourceCodeChanged(e){this.$emit("input",e)}onValueChanged(e){e!==this.source_code&&(this.source_code=e,this.editor.getModel().setValue(e))}onSelectedLanguageChanged(e){if(this.editor){var t=this.editor.getModel(),a=c["editor"].createModel(t.getValue(),o["a"][parseInt(e)]);this.editor.setModel(a),t&&t.dispose(),this.modelEventRegistry()}}onThemeChanged(e){this.editor&&(e.includes("vs")||e.includes("hc-black")?c["editor"].setTheme(e):c["editor"].setTheme("vs-dark"))}onFontSizeChanged(e){this.editor&&!isNaN(parseInt(e))&&this.editor.updateOptions({fontSize:parseInt(e)})}onHeightChanged(e){this.editor&&this.$nextTick(()=>{this.editor.layout()})}mounted(){this.$nextTick(()=>{this.initEditor()})}initEditor(){this.editor=c["editor"].create(this.$refs.source,{value:this.value,language:o["a"][this.selected_language],minimap:{enabled:this.minimap},fontLigatures:!0,scrollBeyondLastLine:!1,readOnly:this.readOnly}),this.editor.updateOptions({fontSize:this.getFontSizeFromStorage()}),c["editor"].setTheme(this.getThemeFromStorage()),this.modelEventRegistry()}modelEventRegistry(){var e=this.editor.getModel();e.onDidChangeContent(()=>{this.source_code=this.editor.getModel().getValue(),this.$store.commit("setCodeInfo",{code:this.source_code})})}getDataFromStorage(e,t){var a;try{a=JSON.parse(localStorage.submitConfig)[t]}catch(i){a=e}return a}getThemeFromStorage(){return this.getDataFromStorage("vs-dark","theme")}getFontSizeFromStorage(){return this.getDataFromStorage(16,"fontSize")}};Object(n["c"])([Object(r["c"])({default:"18"})],d.prototype,"fontSize",void 0),Object(n["c"])([Object(r["c"])({default:0})],d.prototype,"selected_language",void 0),Object(n["c"])([Object(r["c"])({default:"vs-dark"})],d.prototype,"theme",void 0),Object(n["c"])([Object(r["c"])({default:""})],d.prototype,"value",void 0),Object(n["c"])([Object(r["c"])({default:460})],d.prototype,"height",void 0),Object(n["c"])([Object(r["c"])({default:!1})],d.prototype,"readOnly",void 0),Object(n["c"])([Object(r["c"])({default:!0})],d.prototype,"minimap",void 0),Object(n["c"])([Object(r["d"])("source_code")],d.prototype,"onSourceCodeChanged",null),Object(n["c"])([Object(r["d"])("value")],d.prototype,"onValueChanged",null),Object(n["c"])([Object(r["d"])("selected_language")],d.prototype,"onSelectedLanguageChanged",null),Object(n["c"])([Object(r["d"])("theme")],d.prototype,"onThemeChanged",null),Object(n["c"])([Object(r["d"])("fontSize")],d.prototype,"onFontSizeChanged",null),Object(n["c"])([Object(r["d"])("height")],d.prototype,"onHeightChanged",null),d=Object(n["c"])([r["a"]],d);var p=d,u=p,m=a("2877"),v=Object(m["a"])(u,i,s,!1,null,"77f132be",null);t["a"]=v.exports},"6c54":function(e,t,a){"use strict";t["a"]=["cpp","cpp","pascal","java","ruby","shell","python","php","perl","csharp","objectivec","freebasic","schema","cpp","cpp","lua","javascript","go","python","cpp","cpp","cpp","kotlin","java","java","python","python","java","cpp","cpp","cpp",""]},"986d":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("c975");function i(e){return e.filter((function(e,t,a){return a.indexOf(e)===t}))}},ba15:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui container padding"},[a("div",{staticClass:"ui grid"},[e._m(0),a("div",{staticClass:"two column row"},[a("div",{staticClass:"column"},[a("div",{staticClass:"ui input",staticStyle:{width:"100%"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],attrs:{type:"text"},domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value)}}})])]),a("div",{staticClass:"column",staticStyle:{"z-index":"1700"}},[a("select",{staticClass:"ui search dropdown label selection",attrs:{multiple:""},on:{change:function(t){e.label=e.select(".label.selection.ui.dropdown").dropdown("get value")}}},e._l(e.all_label,(function(t){return a("option",{key:t,domProps:{value:t,textContent:e._s(t)}})})),0)])]),a("div",{staticClass:"three column row"},[a("div",{staticClass:"column"},[a("div",{staticClass:"ui labeled input"},[a("div",{staticClass:"ui label"},[e._v(" Time ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.time,expression:"time"}],attrs:{type:"text"},domProps:{value:e.time},on:{input:function(t){t.target.composing||(e.time=t.target.value)}}})])]),a("div",{staticClass:"column"},[a("div",{staticClass:"ui labeled input"},[a("div",{staticClass:"ui label"},[e._v(" Memory ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.memory,expression:"memory"}],attrs:{type:"text"},domProps:{value:e.memory},on:{input:function(t){t.target.composing||(e.memory=t.target.value)}}})])]),a("div",{staticClass:"column",staticStyle:{margin:"auto"}},[a("div",{staticClass:"ui toggle checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.spj,expression:"spj"}],attrs:{type:"checkbox"},domProps:{checked:e.spj,checked:Array.isArray(e.spj)?e._i(e.spj,null)>-1:e.spj},on:{change:function(t){var a=e.spj,i=t.target,s=!!i.checked;if(Array.isArray(a)){var n=null,c=e._i(a,n);i.checked?c<0&&(e.spj=a.concat([n])):c>-1&&(e.spj=a.slice(0,c).concat(a.slice(c+1)))}else e.spj=s}}}),a("label",[e._v("Special Judge")])])])]),e._m(1),a("div",{staticClass:"row"},[a("mavon-editor",{ref:"description",attrs:{markInstance:e.descriptionInstance},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),a("br"),e._m(2),a("div",{staticClass:"row"},[a("mavon-editor",{ref:"input",attrs:{markInstance:e.inputInstance},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1),a("br"),e._m(3),a("div",{staticClass:"row"},[a("mavon-editor",{ref:"output",attrs:{markInstance:e.outputInstance},model:{value:e.output,callback:function(t){e.output=t},expression:"output"}})],1),a("br"),e._m(4),a("div",{staticClass:"row"},[a("div",{staticClass:"ui form",staticStyle:{"min-width":"85%"}},[a("div",{staticClass:"field"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.sampleinput,expression:"sampleinput"}],domProps:{value:e.sampleinput},on:{input:function(t){t.target.composing||(e.sampleinput=t.target.value)}}})])])]),a("br"),e._m(5),a("div",{staticClass:"row"},[a("div",{staticClass:"ui form",staticStyle:{"min-width":"85%"}},[a("div",{staticClass:"field"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.sampleoutput,expression:"sampleoutput"}],domProps:{value:e.sampleoutput},on:{input:function(t){t.target.composing||(e.sampleoutput=t.target.value)}}})])])]),e._m(6),a("div",{staticClass:"row"},e._l(e.files,(function(t){return a("a",{key:t,staticClass:"ui label",attrs:{href:e.makeHref(t)}},[e._v(e._s(t))])})),0),e._m(7),a("div",{staticClass:"row"},[a("div",{staticClass:"four wide column"},[a("div",{staticClass:"ui attached vertical fluid pointing menu",staticStyle:{height:"370px","overflow-y":"scroll","overflow-x":"hidden"}},[a("a",{class:0===e.prependSelected?"active item":"item",on:{click:function(t){e.prependSelected=0}}},[e._v("C "),a("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[e._v("GNU C99/C11 LLVM Clang ")])]),a("a",{class:1===e.prependSelected?"active item":"item",on:{click:function(t){e.prependSelected=1}}},[e._v("C++ "),a("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[e._v("GNU C++11/C++89/C++17 LLVM Clang++ ")])]),a("a",{class:2===e.prependSelected?"active item":"item",on:{click:function(t){e.prependSelected=2}}},[e._v("Pascal "),a("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[e._v("fpc Pascal ")])]),a("a",{class:3===e.prependSelected?"active item":"item",on:{click:function(t){e.prependSelected=3}}},[e._v("Java "),a("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[e._v(" openJDK 1.6/1.7/1.8/1.10 ")])]),a("a",{class:16===e.prependSelected?"active item":"item",on:{click:function(t){e.prependSelected=16}}},[e._v("JavaScript "),a("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[e._v(" NodeJS 10.13.0 ")])]),a("a",{class:6===e.prependSelected?"active item":"item",on:{click:function(t){e.prependSelected=6}}},[e._v("Python "),a("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[e._v(" Python 2.7/3.6 PyPy2/3 ")])]),a("a",{class:9===e.prependSelected?"active item":"item",on:{click:function(t){e.prependSelected=9}}},[e._v("C# "),a("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[e._v(" Mono ")])])])]),a("div",{staticClass:"ten wide column"},[a("monaco-editor",{attrs:{selected_language:e.prependSelected},model:{value:e.prepend[e.prependSelected],callback:function(t){e.$set(e.prepend,e.prependSelected,t)},expression:"prepend[prependSelected]"}})],1)]),e._m(8),a("div",{staticClass:"row"},[a("div",{staticClass:"four wide column"},[a("div",{staticClass:"ui attached vertical fluid pointing menu",staticStyle:{height:"370px","overflow-y":"scroll","overflow-x":"hidden"}},[a("a",{class:0===e.appendSelected?"active item":"item",on:{click:function(t){e.appendSelected=0}}},[e._v("C "),a("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[e._v("GNU C99/C11 LLVM Clang ")])]),a("a",{class:1===e.appendSelected?"active item":"item",on:{click:function(t){e.appendSelected=1}}},[e._v("C++ "),a("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[e._v("GNU C++11/C++89/C++17 LLVM Clang++ ")])]),a("a",{class:2===e.appendSelected?"active item":"item",on:{click:function(t){e.appendSelected=2}}},[e._v("Pascal "),a("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[e._v("fpc Pascal ")])]),a("a",{class:3===e.appendSelected?"active item":"item",on:{click:function(t){e.appendSelected=3}}},[e._v("Java "),a("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[e._v(" OpenJDK 1.6/1.7/1.8/1.10 ")])]),a("a",{class:16===e.appendSelected?"active item":"item",on:{click:function(t){e.appendSelected=16}}},[e._v("JavaScript "),a("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[e._v(" NodeJS 10.13.0 ")])]),a("a",{class:6===e.appendSelected?"active item":"item",on:{click:function(t){e.appendSelected=6}}},[e._v("Python "),a("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[e._v(" Python 2.7/3.6 PyPy2/3 ")])]),a("a",{class:9===e.appendSelected?"active item":"item",on:{click:function(t){e.appendSelected=9}}},[e._v("C# "),a("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[e._v(" Mono ")])])])]),a("div",{staticClass:"ten wide column"},[a("monaco-editor",{attrs:{selected_language:e.appendSelected},model:{value:e.append[e.appendSelected],callback:function(t){e.$set(e.append,e.appendSelected,t)},expression:"append[appendSelected]"}})],1)]),"local"===e.from?a("div",{staticClass:"row"},[a("h2",{staticClass:"ui header"},[e._v(" Hint ")])]):e._e(),"local"===e.from?a("div",{staticClass:"row"},[a("mavon-editor",{ref:"hint",attrs:{markInstance:e.hintInstance,test:"1"},model:{value:e.hint,callback:function(t){e.hint=t},expression:"hint"}})],1):e._e(),a("a",{staticClass:"ui button",on:{click:e.submit}},[e._v("提交")])])])},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("h2",{staticClass:"ui header"},[e._v(" Title ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("h2",{staticClass:"ui header"},[e._v(" Description ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("h2",{staticClass:"ui header"},[e._v(" Input ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("h2",{staticClass:"ui header"},[e._v(" Output ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("h2",{staticClass:"ui header"},[e._v(" Sample Input ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("h2",{staticClass:"ui header"},[e._v(" Sample Output ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("h2",{staticClass:"ui header"},[e._v("Files")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("h2",{staticClass:"ui header"},[e._v(" Prepend Code ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("h2",{staticClass:"ui header"},[e._v(" Append Code ")])])}],n=(a("e01a"),a("e260"),a("498a"),a("ddb0"),a("1da1")),c=a("9ab4"),o=a("2cd4"),l=a("60a3"),r=a("ec1c"),d=a("3865"),p=a("986d"),u=a("1157"),m=a.n(u),v=m.a,h=class extends(Object(l["b"])(o["a"])){constructor(){super(...arguments),this.title="",this.description="",this.time="",this.memory="",this.input="",this.output="",this.spj=!1,this.sampleinput="",this.sampleoutput="",this.descriptionInstance=r["a"].newInstance(),this.inputInstance=r["a"].newInstance(),this.outputInstance=r["a"].newInstance(),this.hintInstance=r["a"].newInstance(),this.hint="",this.source="local",this.from="local",this.label=[],this.all_label=[],this.prepend={},this.prependSelected=0,this.append={},this.appendSelected=0,this.files=[],this.id=null,this.select=v}mounted(){document.title="".concat(this.$t("addproblem")," -- ").concat(document.title),this.initData()}makeHref(e){return"/api/admin/problem/download/data/".concat(this.id,"/").concat(e)}PrependAppendLanguage(e,t,a){var i=this[e][t];"undefined"!==typeof i&&a.forEach(t=>{this[e][t]=i})}generateProblemId(){return this.axios.post("/api/problem/add").then(e=>{var{data:t}=e;return t.data})}submit(){var e=this;return Object(n["a"])((function*(){var t="local";e.PrependAppendLanguage("prepend",0,[21,13,28]),e.PrependAppendLanguage("prepend",1,[19,20,14,29]),e.PrependAppendLanguage("prepend",3,[23,24,27]),e.PrependAppendLanguage("append",3,[23,24,27]),e.PrependAppendLanguage("append",0,[21,13,28]),e.PrependAppendLanguage("append",1,[19,20,14,29]);var a=yield e.generateProblemId(),i={imageData:{}},s={payload:[],problemId:a};Object.keys(e.prepend).forEach(t=>{e.prepend[t].trim().length>0&&s.payload.push({language:parseInt(t),code:e.prepend[t]})});var n={payload:[],problemId:a};for(var c of(Object.keys(e.append).forEach(t=>{e.append[t].trim().length>0&&n.payload.push({language:parseInt(t),code:e.append[t]})}),e.$children))if("undefined"!==typeof c.markdownIt){var o=c.$vnode.data.model;i[o.expression]=o.value,i.imageData[o.expression]=c.markdownIt.__image||{}}i.time=e.time,i.memory=e.memory,i.title=e.title,i.sampleinput=e.sampleinput,i.sampleoutput=e.sampleoutput,i.spj=Number(e.spj),i.hint=e.hint;var l=e.label;i.label=Object(p["a"])(l).join(" "),e.axios.post("/api/problem/".concat(e.source,"/").concat(a),{json:i}).then(i=>{var{data:s}=i;"OK"===s.status&&(e.axios.get("/api/problem/".concat(t,"?id=").concat(a)),alert("提交成功"))}),e.axios.post("/api/problem/prefile/prepend",s),e.axios.post("/api/problem/prefile/append",n)}))()}initData(){this.axios.get("/api/problem/local/?label=true").then(e=>{var{data:t}=e,a=v(".label.selection.ui.dropdown");this.all_label=t.data;var i=this.label;a.dropdown({allowAdditions:!0}).on("click",()=>{this.label=a.dropdown("get value")});for(var s=0;s<i.length;++s)a.dropdown("set selected",i[s])})}};h=Object(c["c"])([Object(l["a"])({components:{monacoEditor:d["a"]}})],h);var f=h,g=f,C=a("2877"),y=Object(C["a"])(g,i,s,!1,null,"79bf68fe",null);t["default"]=y.exports}}]);