(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a2d96"],{"0055":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui container pusher"},[a("div",{staticClass:"padding"},[a("div",{staticClass:"ui grid"},[a("div",{staticClass:"five wide column"},[a("div",{staticClass:"column"},[a("div",{staticClass:"ui card",staticStyle:{width:"100%"}},[a("div",{staticClass:"image"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.img_src,expression:"img_src"}],attrs:{id:"head"}})])])])]),a("div",{staticClass:"eleven wide column"},[a("form",{attrs:{method:"post"}},[a("div",{staticClass:"ui top attached block header"},[t._v("Update Information")]),a("div",{staticClass:"ui bottom attached segment"},[a("table",{staticStyle:{margin:"auto",width:"100%"}},[a("div",{staticClass:"ui form"},[a("div",{staticClass:"two fields"},[a("div",{staticClass:"field"},[a("label",[t._v("User ID")]),a("div",{staticClass:"ui disabled input"},[a("input",{attrs:{size:"50",type:"text"},domProps:{value:t.user_id}})])]),a("div",{staticClass:"field"},[a("label",[t._v("Nick Name")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.nick,expression:"nick"}],attrs:{name:"nick",size:"50",type:"text"},domProps:{value:t.nick},on:{input:function(e){e.target.composing||(t.nick=e.target.value)}}})])]),a("div",{staticClass:"three fields"},[a("div",{staticClass:"field"},[a("label",[t._v("Old Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{name:"opassword",placeholder:"请输入密码后更改其他信息",size:"20",type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),a("div",{staticClass:"field"},[a("label",[t._v("New Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newpassword,expression:"newpassword"}],attrs:{name:"npassword",size:"20",type:"password"},domProps:{value:t.newpassword},on:{input:function(e){e.target.composing||(t.newpassword=e.target.value)}}})]),a("div",{staticClass:"field"},[a("label",[t._v("Repeat New Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.repeatpassword,expression:"repeatpassword"}],attrs:{name:"rptpassword",size:"20",type:"password"},domProps:{value:t.repeatpassword},on:{input:function(e){e.target.composing||(t.repeatpassword=e.target.value)}}})])]),a("div",{staticClass:"two fields"},[a("div",{staticClass:"field"},[a("label",[t._v("School")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.school,expression:"school"}],attrs:{name:"school",size:"30",type:"text"},domProps:{value:t.school},on:{input:function(e){e.target.composing||(t.school=e.target.value)}}})]),a("div",{staticClass:"field"},[a("label",[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{name:"email",size:"30",type:"text"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})])]),a("div",{staticClass:"two fields"},[a("div",{staticClass:"field"},[a("label",[t._v("找回密码问题")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmquestion,expression:"confirmquestion"}],attrs:{name:"confirmquestion",size:"30",type:"text"},domProps:{value:t.confirmquestion},on:{input:function(e){e.target.composing||(t.confirmquestion=e.target.value)}}})]),a("div",{staticClass:"field"},[a("label",[t._v("找回密码答案")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmanswer,expression:"confirmanswer"}],attrs:{name:"confirmanswer",size:"30",type:"text"},domProps:{value:t.confirmanswer},on:{input:function(e){e.target.composing||(t.confirmanswer=e.target.value)}}})])]),a("div",{staticClass:"two fields"},[a("div",{staticClass:"field"},[a("label",[t._v("Blog")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.blog,expression:"blog"}],attrs:{name:"blog",type:"text"},domProps:{value:t.blog},on:{input:function(e){e.target.composing||(t.blog=e.target.value)}}})]),a("div",{staticClass:"field"},[a("label",[t._v("GitHub")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.github,expression:"github"}],attrs:{name:"github",type:"text"},domProps:{value:t.github},on:{input:function(e){e.target.composing||(t.github=e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",[t._v("AvatarURL(可使用外链,若需要自行上传,请参考"),a("router-link",{attrs:{to:"/discuss/thread/15"}},[t._v("如何使用图床")]),t._v("并将链接贴在下面)")],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.avatarUrl,expression:"avatarUrl"}],attrs:{name:"avatarUrl",type:"text"},domProps:{value:t.avatarUrl},on:{input:function(e){e.target.composing||(t.avatarUrl=e.target.value)}}})]),a("div",{staticClass:"field"},[a("label",[t._v("Biography(支持markdown语法)")]),a("mavon-editor",{attrs:{markInstance:t.markdownIt},model:{value:t.biography,callback:function(e){t.biography=e},expression:"biography"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.biography,expression:"biography"}],attrs:{name:"biography",type:"text"},domProps:{value:t.biography},on:{input:function(e){e.target.composing||(t.biography=e.target.value)}}})],1),a("div",{staticClass:"fields"},[a("div",{staticClass:"field"},[a("label"),a("input",{staticClass:"ui primary button",attrs:{name:"submit",type:"submit",value:"Submit"},on:{click:function(e){return e.preventDefault(),t.updateInformation(e)}}})]),a("div",{staticClass:"field"},[a("label"),a("input",{staticClass:"ui secondary button",attrs:{name:"reset",type:"reset",value:"Reset"},on:{click:function(e){return e.preventDefault(),t.reset(e)}}})])])])])])])])])]),a("br"),a("br")])},s=[],r=(a("a4d3"),a("4de4"),a("4160"),a("e439"),a("dbb4"),a("b64b"),a("498a"),a("159b"),a("ade3")),o=a("d4ec"),n=a("bee2"),l=a("99de"),c=a("7e84"),d=a("262e"),u=a("9ab4"),p=a("2f62"),v=a("f1ed"),m=a("2cd4"),f=a("6b34"),g=a("60a3");function b(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function h(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?b(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var w=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.blog="",t.github="",t.biography="",t.confirmquestion="",t.confirmanswer="",t.password="",t.newpassword="",t.repeatpassword="",t.dirty=!1,t.email="",t.school="",t.nick="",t.avatar=!1,t.avatarUrl="",t.markdownIt=f["a"],t}return Object(d["a"])(e,t),Object(n["a"])(e,[{key:"created",value:function(){this.nick=this.$store.getters.nick,this.avatar=this.$store.getters.avatar,this.avatarUrl=v["a"].stringify(this.$store.getters.avatarUrl||"")}},{key:"mounted",value:function(){var t=this;this.axios.get("/api/user/".concat(this.user_id)).then((function(e){var a=e.data;Object.assign(t,a.data.information)})),this.axios.get("/api/reset/password").then((function(e){var a=e.data;"OK"===a.status&&(t.confirmquestion=a.data)}))}},{key:"updateInformation",value:function(){var t=this;this.axios.post("/api/user/update/profile",this.$data).then((function(e){var a=e.data;"OK"===a.status?(t.$store.dispatch("NavStatus"),alert("更改成功")):alert("服务器遇到错误: \n"+a.statement)}))}},{key:"reset",value:function(){location.reload()}},{key:"refreshImage",value:function(){var t=this;this.dirty&&(this.dirty=!1,this.$nextTick((function(){setTimeout((function(){t.$Lazyload.lazyLoadHandler(),t.$forceUpdate()}),0)})))}},{key:"onAvatarUrlChanged",value:function(){this.refreshImage()}},{key:"onImageSrcChanged",value:function(){this.refreshImage()}},{key:"img_src",get:function(){var t=v["a"].stringify(this.avatarUrl);return!this.avatar||t.length>0?t.length>0?t:"https://semantic-ui.com/images/wireframe/square-image.png":"/avatar/".concat(this.user_id,".jpg")},set:function(t){t!==this.avatarUrl&&(this.dirty=!0,this.avatarUrl=t.trim())}}]),e}(Object(g["b"])(m["a"]));Object(u["c"])([Object(g["d"])("avatarUrl")],w.prototype,"onAvatarUrlChanged",null),Object(u["c"])([Object(g["d"])("img_src")],w.prototype,"onImageSrcChanged",null),w=Object(u["c"])([Object(g["a"])({computed:h({},Object(p["b"])(["user_id"]))})],w);var y=w,C=y,O=a("2877"),k=Object(O["a"])(C,i,s,!1,null,"6e7d9b99",null);e["default"]=k.exports}}]);