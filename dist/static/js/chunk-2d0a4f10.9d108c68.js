(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a4f10"],{"091b":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"ui container padding"},[t.contest_mode?r("contest-mode"):t._e(),t.contest_mode?t._e():r("h2",{staticClass:"ui dividing header"},t._l(t.header,(function(e,a){return r("router-link",{key:a,attrs:{to:"/contest/problem/"+e}},[t._v(t._s(e)+" ")])})),1),r("div",{staticClass:"ui grid"},[r("div",{staticClass:"fourteen wide column"},[r("div",{staticClass:"ui fluid multiple search selection dropdown"},[r("input",{attrs:{type:"hidden",name:"country"},domProps:{value:t.contest_id_raw},on:{change:function(e){t.select2=e.target.value}}}),r("i",{staticClass:"dropdown icon"}),r("div",{staticClass:"default text"},[t._v("Select Contest Or Input Contest ID")]),r("div",{staticClass:"menu"},t._l(t.contest_list,(function(e,a){return r("div",{key:a,staticClass:"item",attrs:{"data-value":e.contest_id,title:e.title}},[t._v(t._s("Contest"+e.contest_id+" "+e.title))])})),0)])]),r("div",{staticClass:"two wide column"},[r("a",{staticClass:"primary button ui",on:{click:function(e){return t.run(2)}}},[t._v("Go")])])]),r("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"ui segment"},[r("h2",{staticClass:"ui header"},[t._v("加载中")])]),r("div",{staticClass:"ui segment"},[r("div",{staticClass:"ui container",staticStyle:{padding:"1em"}},[r("div",{staticClass:"ui labeled input"},[r("div",{staticClass:"ui label"},[t._v(" 柱状数 ")]),r("input",{attrs:{type:"text",placeholder:"10"},on:{change:function(e){t.row_count=parseInt(e.target.value)}}})]),r("div",{staticClass:"ui labeled input"},[r("div",{staticClass:"ui label"},[t._v(" 大于等于 ")]),r("input",{attrs:{type:"text",placeholder:""},on:{change:function(e){t.greater=e.target.value}}})]),r("div",{staticClass:"ui labeled input"},[r("div",{staticClass:"ui label"},[t._v(" 小于等于 ")]),r("input",{attrs:{type:"text",placeholder:""},on:{change:function(e){t.lower=e.target.value}}})]),r("a",{staticClass:"ui primary button"},[t._v("应用")])]),r("div",{staticStyle:{height:"500px"},attrs:{id:"chartdiv"}})]),r("div",{staticClass:"ui grid"},[r("div",{staticClass:"row"},[r("table",{staticClass:"ui table"},[r("thead",[r("tr",[r("th",{on:{click:function(e){return t.sort(1)}}},[r("a",[r("i",{directives:[{name:"show",rawName:"v-show",value:1==t.type,expression:"type == 1"}],class:"sort numeric icon "+(t.order>0?"down":"up")}),t._v("User ID")])]),r("th",{on:{click:function(e){return t.sort(2)}}},[r("a",[r("i",{directives:[{name:"show",rawName:"v-show",value:2==t.type,expression:"type == 2"}],class:"sort numeric icon "+(t.order>0?"down":"up")}),t._v("Nick")])]),r("th",[r("a",{on:{click:function(e){return t.sort(3)}}},[r("i",{directives:[{name:"show",rawName:"v-show",value:3==t.type,expression:"type == 3"}],class:"sort numeric icon "+(t.order>0?"down":"up")}),t._v("通过")])]),r("th",[r("a",{on:{click:function(e){return t.sort(4)}}},[r("i",{directives:[{name:"show",rawName:"v-show",value:4==t.type,expression:"type == 4"}],class:"sort numeric icon "+(t.order>0?"down":"up")}),t._v("总提交")])]),r("th",[r("a",{on:{click:function(e){return t.sort(5)}}},[r("i",{directives:[{name:"show",rawName:"v-show",value:5==t.type,expression:"type == 5"}],class:"sort numeric icon "+(t.order>0?"down":"up")}),t._v("平均代码行数")])]),r("th",[r("a",{on:{click:function(e){return t.sort(6)}}},[r("i",{directives:[{name:"show",rawName:"v-show",value:6==t.type,expression:"type == 6"}],class:"sort numeric icon "+(t.order>0?"down":"up")}),t._v("平均代码长度")])]),r("th",[r("a",{on:{click:function(e){return t.sort(7)}}},[r("i",{directives:[{name:"show",rawName:"v-show",value:7==t.type,expression:"type == 7"}],class:"sort numeric icon "+(t.order>0?"down":"up")}),t._v("总代码长度 ")])])])]),r("tbody",t._l(t.status_data,(function(e,a){return r("tr",{key:a},[r("td",[r("router-link",{attrs:{to:"/user/"+e.user_id},domProps:{innerHTML:t._s(e.user_id)}})],1),r("td",[r("router-link",{attrs:{to:"/user/"+e.user_id},domProps:{innerHTML:t._s(e.nick)}})],1),r("td",{domProps:{innerHTML:t._s(e.ac.size)}}),r("td",{domProps:{innerHTML:t._s(e.submit.size)}}),r("td",{domProps:{innerHTML:t._s(e.average_line)}}),r("td",{domProps:{innerHTML:t._s(e.average_length+"B")}}),r("td",{domProps:{innerHTML:t._s(e.total_line)}})])})),0)])])])],1)},n=[],i=(r("e260"),r("26e9"),r("4e82"),r("e6cf"),r("2532"),r("1276"),r("ddb0"),r("9ab4")),s=r("2cd4"),o=r("71c9"),c=r("c497"),u=r("2ef0"),d=r.n(u),l=r("1157"),h=r.n(l),p=r("60a3"),v=h.a,_=r("5a54").default;function g(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;e=Math.max(e,1),o["e"](_);var r=o["d"]("chartdiv",c["j"]);r.hiddenState.properties.opacity=0;for(var a=t[0],n=t[t.length-1],i=Math.trunc((a-n)/e),s=a-i,u=[],l=0;l<e-1;++l)u.push({part:s+"-"+(s+i),count:0}),s-=i;u.push({part:n+"-"+(s+i),count:0}),s=a-i;var h=0,p=0;d.a.forEach(t,(function(t){if(t>=s)++u[h].count;else try{u.length-1>h?(++u[++h].count,s-=i):++u[h].count}catch(e){console.log("cnt",h),console.log("val",t)}p=Math.max(p,u[h].count)})),u=u.reverse(),r.data=u;var v=r.xAxes.push(new c["a"]);v.renderer.grid.template.location=0,v.dataFields.category="part",v.renderer.minGridDistance=40,v.fontSize=11;var g=r.yAxes.push(new c["i"]);g.min=0,g.max=p,g.strictMinMax=!0,g.renderer.minGridDistance=30;var m=r.series.push(new c["d"]);m.dataFields.categoryX="part",m.dataFields.valueY="count",m.columns.template.tooltipText="{valueY.value}",m.columns.template.tooltipY=0,m.columns.template.strokeOpacity=0,m.columns.template.adapter.add("fill",(function(t,e){return r.colors.getIndex(e.dataItem.index)}))}var m=class extends(Object(p["b"])(s["a"])){constructor(){super(...arguments),this.cidArray=[],this.contest_mode=!1,this.raw_data=[],this.header=[],this.contest_id_raw="",this.status_data=[],this.data_set=[],this.order=1,this.contest_list=[],this.select1="",this.select2="",this.type=1,this.row_count=10,this.lower="",this.greater="",this.ranged=!1,this.loading=!1}created(){var t=this.$route.params.contest_id;this.contest_id_raw=this.$route.params.contest_id,t&&t.length&&(t=t.split(",")),this.header=t,this.cidArray=t}onRowCountChanged(t,e){t!==e&&(!1===!!t&&(t=10),g(this.data_set,t))}onLowerChanged(t,e){var r=this;this.$nextTick((function(){r.rangeChange()}))}onGreaterChanged(t,e){var r=this;this.$nextTick((function(){r.rangeChange()}))}onRangeChanged(t,e){if(!t){var r=this;this.$nextTick((function(){r.generate(r.raw_data)}))}}mounted(){var t=this;this.loading=!0,this.axios.get("/api/contest/list").then(e=>{var r=e.data;r.data.sort((function(t,e){return parseInt(e.contest_id)-parseInt(t.contest_id)})),t.contest_list=r.data,setTimeout((function(){v(".multiple.search").dropdown({fullTextSearch:!0})}),1e3)}),this.getData()}updatecidArrayFromSelect(){var t=this.select2;this.loading=!0,t&&t.length&&(t=t.split(",")),this.cidArray=t,this.header=t}getData(){var t=this,e=[];d.a.forEach(this.cidArray,t=>{e.push(new Promise((e,r)=>{this.axios.get("/api/scoreboard/".concat(t,"/line")).then(a=>{var{data:n}=a;"OK"==n.status?e(n.data):r(t)})}))}),Promise.all(e).then(e=>{t.raw_data=e,t.generate(e)})}sortOrder(t){var e=this.status_data,r=this.order;switch(t){case 1:e.sort((function(t,e){return r*(e.user_id>t.user_id?1:e.user_id==t.user_id?0:-1)}));break;case 2:e.sort((function(t,e){return r*(e.nick>t.nick?1:e.nick==t.nick?0:-1)}));break;case 3:e.sort((function(t,e){return r*(e.ac.size-t.ac.size)}));break;case 4:e.sort((function(t,e){return r*(e.submit.size-t.submit.size)}));break;case 6:e.sort((function(t,e){return r*(e.average_length-t.average_length)}));break;case 5:e.sort((function(t,e){return r*(e.average_line-t.average_line)}));break;case 7:e.sort((function(t,e){return r*(e.total_line-t.total_line)}));break}}sort(t){var e=this.type;this.order=e!=t?1:-this.order,this.type=t,this.sortOrder(t)}rangeChange(){if(isNaN(this.lower)&&isNaN(this.greater))this.ranged=!1;else{if(this.lower=parseInt(this.lower),0===this.lower&&(this.lower=1/0),this.greater=parseInt(this.greater),0===this.greater&&(this.greater=-1/0),this.lower<this.greater)return;this.ranged=!0}this.ranged&&this.generate(this.raw_data)}generate(t){var e=this;new Promise((function(e,r){e(t)})).then((function(t){var r=e.greater,a=e.lower,n=[];return d.a.forEach(t,(function(t){var i=d.a.values(t.map),s=t.user.map((function(t){return t.user_id}));if(s.length>0){var o=[];d.a.forEach(i,(function(t){if(s.includes(t.user_id)){if(e.ranged){if(isNaN(t.user_id))return;var n=parseInt(t.user_id);if(n<r||n>a)return}o.push(t)}})),i=o}n=n.concat(i)})),n})).then((function(t){var e={};return d.a.forEach(t,(function(t){"undefined"===typeof e[t.user_id]&&(e[t.user_id]={ac:new Set,submit:new Set,line:[],len:[],user_id:t.user_id,nick:t.nick,average_line:0,average_length:0,total_line:0}),4===t.result&&(e[t.user_id].ac.add(t.problem_id),e[t.user_id].line.push(t.line),e[t.user_id].len.push(t.code_length)),e[t.user_id].submit.add(t.solution_id)})),d.a.values(e)})).then((function(t){return t.sort((function(t,e){return 1*(e.user_id>t.user_id?1:e.user_id==t.user_id?0:-1)})),e.order=1,e.type=1,t})).then((function(t){return d.a.forEach(t,(function(t){0===t.line.length&&(t.line=[0]),0===t.len.length&&(t.len=[0]),t.average_line=Math.trunc(Math.round(t.line.reduce((function(t,e){return t+e}))/Math.max(1,t.line.length))),t.average_length=Math.trunc(Math.round(t.len.reduce((function(t,e){return t+e}))/Math.max(1,t.len.length))),t.total_line=t.line.reduce((function(t,e){return t+e}))})),t})).then((function(t){var r=[];return d.a.forEach(t,(function(t){r.push(t.total_line)})),r.sort((function(t,e){return e-t})),g(r,10),e.data_set=r,t})).then((function(t){e.status_data=t,e.loading=!1}))}run(t){this.updatecidArrayFromSelect(),this.getData()}};Object(i["c"])([Object(p["d"])("row_count")],m.prototype,"onRowCountChanged",null),Object(i["c"])([Object(p["d"])("lower")],m.prototype,"onLowerChanged",null),Object(i["c"])([Object(p["d"])("greater")],m.prototype,"onGreaterChanged",null),Object(i["c"])([Object(p["d"])("range")],m.prototype,"onRangeChanged",null),m=Object(i["c"])([p["a"]],m);var f=m,w=f,y=r("2877"),b=Object(y["a"])(w,a,n,!1,null,"3ff7d5ec",null);e["default"]=b.exports}}]);